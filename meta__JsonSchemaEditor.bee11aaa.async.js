(self.webpackChunk_quiet_front_end_json_schema_editor_antd=self.webpackChunk_quiet_front_end_json_schema_editor_antd||[]).push([[593],{77102:function(Je,z,n){"use strict";n.r(z),n.d(z,{demos:function(){return c}});var ce=n(15009),T=n.n(ce),xe=n(99289),p=n.n(xe),Y=n(67294),Le=n(57396),W=n(56506),c={"jsonschemaeditor-demo-0":{component:Y.memo(Y.lazy(p()(T()().mark(function oe(){var K,q;return T()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,Promise.resolve().then(n.bind(n,56506));case 2:return K=k.sent,q=K.JsonSchemaEditor,k.abrupt("return",{default:function(){return Y.createElement(q,null)}});case 5:case"end":return k.stop()}},oe)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@quiet-front-end/json-schema-editor-antd';

export default () => <JsonSchemaEditor />;`},"@quiet-front-end/json-schema-editor-antd":{type:"NPM",value:"1.0.2"}},entry:"index.jsx"},context:{"@quiet-front-end/json-schema-editor-antd":W},renderOpts:{compile:function(){var oe=p()(T()().mark(function q(){var _,k=arguments;return T()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,n.e(335).then(n.bind(n,37335));case 2:return U.abrupt("return",(_=U.sent).default.apply(_,k));case 3:case"end":return U.stop()}},q)}));function K(){return oe.apply(this,arguments)}return K}()}}}},56506:function(Je,z,n){"use strict";n.r(z),n.d(z,{JsonSchemaEditor:function(){return Tt}});var ce=n(52677),T=n.n(ce),xe=n(5574),p=n.n(xe),Y=n(68872),Le=n(96486),W=n.n(Le),c=n(67294),oe=n(15009),K=n.n(oe),q=n(99289),_=n.n(q),k=n(13769),Se=n.n(k),U=n(97857),P=n.n(U),dt=n(39398),ct=n(14313),ft=n(42952),ke=n(24969),mt=n(57546),Re=n(48689),Ne=n(9361),I=n(23323),C=n(71230),l=n(15746),H=n(92797),ee=n(56846),ht=n(56616),Ze=n(21628),fe=n(61865),pt=n(65695),$e=n(75027),R=n(24435),vt=n(41637),gt=n(78045),yt=n(79443),jt=n(63764),xt={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=n(85893),St=function(a){var h=a.width,A=a.lineNumbers,x=A===void 0?"on":A,u=a.height,b=a.value,S=a.folding,g=S===void 0?!0:S,y=a.language,Z=a.readOnly,J=Z===void 0?!1:Z,O=a.renderLineHighlight,te=O===void 0?"all":O,ne=a.onChange,G=Ne.Z.useToken(),Q=G.token;function N(ie){ie.editor.defineTheme("x-code-default",xt)}return(0,e.jsx)("div",{style:{border:"1px solid ".concat(Q.colorBorder),width:h||"100%"},children:(0,e.jsx)(jt.ZP,{height:u,width:h,value:b,language:y,onChange:ne,onMount:a.handleEditorDidMount,beforeMount:N,theme:"x-code-default",options:{readOnly:J,lineNumbers:x,renderLineHighlight:te,folding:g,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:9,horizontalScrollbarSize:9},minimap:{enabled:!1}}})})},We=St,Zt=n(64599),It=n.n(Zt),Ct=n(65009),Ot=n.n(Ct);function w(t,a){if(t.$ref){var h=t.$ref;if(h.startsWith("#/")){var A=h.slice(2).split("/"),x=W().cloneDeep(a),u=It()(A),b;try{for(u.s();!(b=u.n()).done;){var S=b.value;if(x[S])x=x[S];else throw new Error("Unable to resolve $ref: ".concat(h))}}catch(y){u.e(y)}finally{u.f()}return x}else throw new Error("Unsupported $ref format: ".concat(h))}if(t.properties)for(var g in t.properties)t.properties[g]&&(t.properties[g]=w(t.properties[g],a));return t.items&&(Array.isArray(t.items)?t.items=t.items.map(function(y){return w(y,a)}):t.items=w(t.items,a)),t.oneOf&&(t.oneOf=t.oneOf.map(function(y){return w(y,a)})),t.anyOf&&(t.anyOf=t.anyOf.map(function(y){return w(y,a)})),t.allOf&&(t.allOf=t.allOf.map(function(y){return w(y,a)})),t}function V(t){var a;if(t.$ref){var h=t.$ref;if(h.startsWith("#/")){var A=h.slice(2).split("/");return A[0]}if(t.properties){for(var x in t.properties)if(t.properties[x]&&(a=V(t.properties[x]),a))return a}}if(t.items){if(Array.isArray(t.items))for(var u=0;u<t.items.length;u++){var b=t.items[u];if(a=V(b),a)return a}else if(a=V(t.items),a)return a}if(t.oneOf)for(var S=0;S<t.oneOf.length;S++){var g=t.oneOf[S];if(a=V(g),a)return a}if(t.anyOf)for(var y=0;y<t.anyOf.length;y++){var Z=t.anyOf[y];if(a=V(Z),a)return a}if(t.allOf)for(var J=0;J<t.allOf.length;J++){var O=t.allOf[J];if(a=V(O),a)return a}}function Ft(t){return Ie.apply(this,arguments)}function Ie(){return Ie=_()(K()().mark(function t(a){var h,A;return K()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Ot().dereference(a,{mutateInputSchema:!1,dereference:{circular:"ignore"}});case 2:if(h=u.sent,A=V(h),!A){u.next=6;break}return u.abrupt("return",w(h,h));case 6:return u.abrupt("return",h);case 7:case"end":return u.stop()}},t)})),Ie.apply(this,arguments)}function Et(t){if(typeof t=="string"){var a=t.trim();if(a.startsWith("{")&&a.endsWith("}"))try{return JSON.parse(a)}catch(h){return}}}var Ke=["string","number","array","object","boolean","integer"];function se(t,a){if(t===null||T()(t)!=="object")return console.error("The provided value is not an object."),-1;var h=Object.keys(t);return h.indexOf(a)}var At=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],bt=Ke.map(function(t){return{value:t}});function ze(t){switch(t){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var Dt=function(a){var h=function(u){return Array.isArray(u)?"array":u===null?"null":T()(u)},A=function x(u){var b=h(u);switch(b){case"object":{var S={};for(var g in u)u.hasOwnProperty(g)&&(S[g]=x(u[g]));return{type:"object",properties:S,required:Object.keys(u)}}case"array":return{type:"array",items:u.length?x(u[0]):{}};default:return{type:b}}};return A(a)},Pt=["key","name"];function Ce(t){var a=Ne.Z.useToken(),h=a.token,A=I.Z.useForm(),x=p()(A,1),u=x[0],b=Y.ZP.useMessage(),S=p()(b,2),g=S[0],y=S[1],Z=t.changeSchema,J=t.renameProperty,O=t.isArrayItems,te=t.updateRequiredProperty,ne=t.parentSchemaDepth,G=ne===void 0?0:ne,Q=t.removeProperty,N=t.addProperty,ie=t.isRequire,Oe=(0,c.useState)(t.schema),i=p()(Oe,2),o=i[0],v=i[1],f=(0,c.useState)(),m=p()(f,2),d=m[0],j=m[1],B=(0,c.useState)(t.propertyName),L=p()(B,2),E=L[0],Fe=L[1],re=(0,c.useState)(o.title),me=p()(re,2),le=me[0],he=me[1],pe=(0,c.useState)(o.description),Ue=p()(pe,2),He=Ue[0],Jt=Ue[1],Lt=(0,c.useState)(t.nodeDepth?t.nodeDepth:0),we=p()(Lt,2),ve=we[0],kt=we[1],Rt=(0,c.useState)(t.namePath?t.namePath:[]),Ve=p()(Rt,2),D=Ve[0],Nt=Ve[1],$t=(0,c.useState)(!0),Ge=p()($t,2),ge=Ge[0],Wt=Ge[1],Kt=(0,c.useState)(!1),Qe=p()(Kt,2),X=Qe[0],ye=Qe[1],zt=(0,c.useState)(!1),Xe=p()(zt,2),Ee=Xe[0],Ae=Xe[1],Ut=(0,c.useState)("json"),Ye=p()(Ut,2),qe=Ye[0],Ht=Ye[1],wt=(0,c.useState)(),_e=p()(wt,2),be=_e[0],et=_e[1],Vt=(0,c.useState)(!1),tt=p()(Vt,2),Gt=tt[0],Qt=tt[1],Xt=(0,c.useState)(!1),nt=p()(Xt,2),Yt=nt[0],qt=nt[1],_t=(0,c.useState)(!1),rt=p()(_t,2),ue=rt[0],en=rt[1],tn=(0,c.useState)(!1),at=p()(tn,2),ot=at[0],nn=at[1],rn=(0,c.useState)(!1),st=p()(rn,2),de=st[0],an=st[1],on=(0,c.useState)(!1),it=p()(on,2),ae=it[0],sn=it[1],De=(0,c.useRef)(null),M=typeof E=="undefined";(0,c.useEffect)(function(){v(t.schema)},[t.schema]),(0,c.useEffect)(function(){Nt(t.namePath?t.namePath:[])},[t.namePath]),(0,c.useEffect)(function(){kt(t.nodeDepth?t.nodeDepth:0)},[t.nodeDepth]);var Pe=(0,c.useCallback)(W().debounce(function(s){typeof s=="function"?s():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,c.useEffect)(function(){return function(){Pe.cancel()}},[Pe]),(0,c.useEffect)(function(){!X||!d||(u.setFieldsValue(d),Qt(d.type==="object"),qt(d.type==="array"),en(d.type==="number"),nn(d.type==="boolean"),an(d.type==="integer"),sn(d.type==="string"))},[X,d]);function lt(s){De.current=s}var Be=o.items,Me=!!(o.type==="object"||O&&(Be==null?void 0:Be.type)==="object")&&!O&&!M;return o.type?(0,e.jsxs)(e.Fragment,{children:[y,(0,e.jsxs)(C.Z,{align:"middle",style:{paddingBottom:10},children:[(0,e.jsx)(l.Z,{flex:"".concat(24+ve*17,"px"),style:{marginLeft:ve*5},children:(0,e.jsx)(C.Z,{justify:"end",children:o.type==="object"&&(0,e.jsx)(H.ZP,{type:"text",size:"small",icon:ge?(0,e.jsx)(dt.Z,{}):(0,e.jsx)(ct.Z,{}),onClick:function(){return Wt(!ge)}})})}),(0,e.jsx)(l.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(ee.Z,{status:!M&&E.length===0?"error":void 0,disabled:M||O,value:M?"root":E,placeholder:"\u5C5E\u6027\u540D\u79F0",onBlur:function(){if((E==null?void 0:E.length)===0){g.error("\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}J&&E&&(E==null?void 0:E.length)!==0&&J(D,E)},onChange:function(r){return Fe(r.target.value)}})}),(0,e.jsx)(l.Z,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(ht.Z,{disabled:O||M,checked:ie,onChange:function(r){te&&E&&te(D.slice(0,G),E,!r.target.checked)}})}),(0,e.jsx)(l.Z,{flex:"95px",style:{marginLeft:5},children:(0,e.jsx)(Ze.Z,{style:{width:"95px"},value:o.type,options:bt,onChange:function(r){Z&&Z(D,ze(r),"type")}})}),(0,e.jsx)(l.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(ee.Z,{placeholder:"\u6807\u9898",value:le,onBlur:function(){Z&&Z(D.concat(se(o,"title")),le,"title")},onChange:function(r){return he(r.target.value)}})}),(0,e.jsx)(l.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(ee.Z,{placeholder:"\u63CF\u8FF0",value:He,onBlur:function(){Z&&Z(D.concat(se(o,"description")),He,"description")},onChange:function(r){return Jt(r.target.value)}})}),(0,e.jsx)(l.Z,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(C.Z,{style:{width:"72px"},children:[(0,e.jsx)(fe.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)(H.ZP,{type:"text",size:"small",icon:(0,e.jsx)(ft.Z,{}),style:{color:"green"},onClick:function(){j(o),ye(!X)}})}),!M&&!O||o.type==="object"?(0,e.jsx)(pt.Z,{disabled:!Me,placement:"bottom",menu:{items:[{key:"addNode",label:"\u540C\u7EA7\u8282\u70B9",onClick:function(){N&&N(D,!1)}},{key:"addChildNode",label:"\u5B50\u7EA7\u8282\u70B9",onClick:function(){N&&N(D,!0)}}]},children:(0,e.jsx)(fe.Z,{title:!Me&&"\u6DFB\u52A0\u8282\u70B9",children:(0,e.jsx)(H.ZP,{type:"text",size:"small",icon:(0,e.jsx)(ke.Z,{}),style:{color:h.colorPrimary},onClick:function(){Me||N&&N(D,!(!O&&!M))}})})}):(0,e.jsx)("div",{style:{width:"24px"}}),(0,e.jsx)(l.Z,{flex:"24px",children:M?(0,e.jsx)(fe.Z,{title:"\u5BFC\u5165Json",children:(0,e.jsx)(H.ZP,{type:"text",size:"small",icon:(0,e.jsx)(mt.Z,{}),style:{color:"purple"},onClick:function(){return Ae(!0)}})}):O?(0,e.jsx)("div",{style:{width:"24px"}}):(0,e.jsx)(fe.Z,{title:"\u5220\u9664\u8282\u70B9",children:(0,e.jsx)(H.ZP,{danger:!0,type:"text",size:"small",icon:(0,e.jsx)(Re.Z,{}),onClick:function(){Q&&Q(D)}})})}),M&&o.type!=="object"&&(0,e.jsx)(l.Z,{flex:"24px",children:!O&&(0,e.jsx)("div",{style:{width:"24px"}})})]})})]}),o.type==="object"&&ge&&o.properties&&Object.keys(o.properties).map(function(s){if(o.properties){var r;return(0,e.jsx)("div",{children:(0,e.jsx)(Ce,P()(P()({},t),{},{isRequire:(r=o.required)===null||r===void 0?void 0:r.includes(s),isArrayItems:!1,nodeDepth:ve+1,parentSchemaDepth:M?0:G+2,namePath:D.concat(se(o,"properties"),se(o.properties,s)),propertyName:s,schema:o.properties[s]}))},String(s))}return(0,e.jsx)(e.Fragment,{})}),o.type==="array"&&ge&&(0,e.jsx)(Ce,P()(P()({},t),{},{isRequire:!1,isArrayItems:!0,nodeDepth:ve+1,parentSchemaDepth:M?0:G+1,propertyName:"items",namePath:D.concat(se(o,"items")),schema:o.items})),(0,e.jsx)($e.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",width:900,open:X,okText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",onOk:function(){if(Z){if(M||o.type==="object"){Z(D,P()(P()({},o),d),"root"),ye(!X);return}u.validateFields().then(function(r){Z(D,P()(P()({},o),r),E),ye(!X)}).catch(function(r){console.log("Failed:",r)})}},onCancel:function(){return ye(!X)},children:(0,e.jsxs)(I.Z,{form:u,onValuesChange:function(r,$){De.current&&De.current.setValue(JSON.stringify(P()(P()({},d),$),null,2))},children:[!Gt&&Ke.indexOf(d==null?void 0:d.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(h.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"\u57FA\u672C\u8BBE\u7F6E"}),(ae||ue||de||ot)&&(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u9ED8\u8BA4\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsxs)(I.Z.Item,{noStyle:!0,name:"default",children:[ae&&(0,e.jsx)(ee.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"}),(ue||de)&&(0,e.jsx)(R.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"}),ot&&(0,e.jsx)(Ze.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",options:[{value:!0,label:"true"},{value:!1,label:"false"}]})]})})]}),ae&&(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u957F\u5EA6\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,name:"minLength",children:(0,e.jsx)(R.Z,{min:0,style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6"})})}),(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u957F\u5EA6\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,name:"maxLength",children:(0,e.jsx)(R.Z,{min:0,style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6"})})})]}),(ue||de)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,name:"minimum",children:(0,e.jsx)(R.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C"})})}),(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,name:"maximum",children:(0,e.jsx)(R.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C"})})})]}),(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,name:"exclusiveMinimum",children:(0,e.jsx)(R.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C"})})}),(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,name:"exclusiveMaximum",children:(0,e.jsx)(R.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C"})})})]})]}),ae&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6B63\u5219\u5339\u914D\uFF1A"}),(0,e.jsx)(l.Z,{span:20,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,name:"pattern",children:(0,e.jsx)(ee.Z,{placeholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F"})})})]}),(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u683C\u5F0F\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,name:"format",children:(0,e.jsx)(Ze.Z,{allowClear:!0,options:At,placeholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",style:{width:"100%"}})})})]})]}),Yt&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u5143\u7D20\u552F\u4E00\uFF1A"}),(0,e.jsx)(l.Z,{span:20,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,name:"uniqueItems",valuePropName:"checked",children:(0,e.jsx)(vt.Z,{})})})]}),(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,name:"minItems",children:(0,e.jsx)(R.Z,{style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570"})})}),(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u591A\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,name:"maxItems",children:(0,e.jsx)(R.Z,{style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570"})})})]})]}),(ae||ue||de)&&(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u679A\u4E3E\uFF1A"}),(0,e.jsx)(l.Z,{span:20,children:(0,e.jsx)(I.Z.List,{name:"enums",children:function(r,$){var Te=$.add,F=$.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(C.Z,{gutter:6,children:r.map(function(je){var ln=je.key,ut=je.name,un=Se()(je,Pt);return(0,e.jsx)(l.Z,{span:12,children:(0,e.jsxs)(C.Z,{gutter:2,justify:"start",align:"middle",style:{marginBottom:6},children:[(0,e.jsx)(l.Z,{flex:"auto",children:(0,e.jsxs)(I.Z.Item,P()(P()({},un),{},{noStyle:!0,name:[ut],rules:[{required:!0}],children:[ae&&(0,e.jsx)(ee.Z,{placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"}),(ue||de)&&(0,e.jsx)(R.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})]}))}),(0,e.jsx)(l.Z,{flex:"24px",children:(0,e.jsx)(H.ZP,{icon:(0,e.jsx)(Re.Z,{}),size:"small",type:"text",danger:!0,onClick:function(){return F(ut)}})})]})},ln)})}),(0,e.jsx)(C.Z,{children:(0,e.jsx)(l.Z,{span:6,children:(0,e.jsx)(I.Z.Item,{noStyle:!0,children:(0,e.jsx)(H.ZP,{onClick:function(){return Te()},block:!0,icon:(0,e.jsx)(ke.Z,{}),children:"\u6DFB\u52A0\u679A\u4E3E\u503C"})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(h.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)(We,{height:300,language:"json",value:JSON.stringify(d,null,2),handleEditorDidMount:lt,onChange:function(r){Pe(function(){if(r)try{var $=JSON.parse(r);j($)}catch(Te){}})}})]})}),(0,e.jsxs)($e.Z,{title:"\u5BFC\u5165",width:900,okText:"\u5BFC\u5165",cancelText:"\u53D6\u6D88",open:Ee,onOk:_()(K()().mark(function s(){var r,$;return K()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!(!be||be.length===0)){F.next=3;break}return g.warning("\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E"),F.abrupt("return");case 3:if(r=Et(be),r){F.next=7;break}return g.error("\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E"),F.abrupt("return");case 7:F.t0=qe,F.next=F.t0==="json"?10:F.t0==="json-schema"?12:16;break;case 10:return $=new yt.NL().createSchemaOf(r),F.abrupt("break",16);case 12:return F.next=14,Ft(r);case 14:return $=F.sent,F.abrupt("break",16);case 16:Z&&(Z([],$,"root"),Ae(!Ee),et(void 0));case 17:case"end":return F.stop()}},s)})),onCancel:function(){return Ae(!Ee)},children:[(0,e.jsx)(C.Z,{style:{marginBottom:16},children:(0,e.jsx)(gt.ZP.Group,{value:qe,optionType:"button",buttonStyle:"solid",onChange:function(r){return Ht(r.target.value)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(C.Z,{children:(0,e.jsx)(We,{height:390,language:"json",handleEditorDidMount:lt,onChange:function(r){return et(r)}})})]})]}):(0,e.jsx)(e.Fragment,{})}var Bt=Ce;function Mt(t){var a=Y.ZP.useMessage(),h=p()(a,2),A=h[0],x=h[1];function u(i){var o={type:"object",properties:{field:{type:"string"}}};if(!i)return o;switch(T()(i)){case"string":try{return Dt(JSON.parse(i))}catch(v){return A.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),o}case"object":return i}}var b=(0,c.useState)(u(t.data)),S=p()(b,2),g=S[0],y=S[1],Z=(0,c.useState)(0),J=p()(Z,2),O=J[0],te=J[1];(0,c.useEffect)(function(){t.onSchemaChange&&t.onSchemaChange(g)},[g]);function ne(i,o,v){if(i.length===0){y(o);return}for(var f=W().cloneDeep(g),m=f,d=0;d<i.length-1;d++){var j=Object.keys(m)[i[d]];m[j]||(m[j]={}),m=m[j]}var B=i[i.length-1],L=Object.keys(m)[B];if(B===-1){if(typeof o=="undefined")return;m[v]=o}else{if(m[L]===o)return;m[L]=o}y(f)}function G(i,o){for(var v=W().cloneDeep(g),f=v,m=null,d="",j=0;j<i.length-1;j++){var B=Object.keys(f),L=void 0;if(typeof i[j]=="number"?L=i[j]:L=B.indexOf(String(i[j])),L<0||L>=B.length){console.error("Path not found: ".concat(i.slice(0,j+1).join(".")));return}m=f,d=B[L],f=f[d]}var E=i[i.length-1],Fe=Object.keys(f),re=Fe[E];if(re!==o){if(f.hasOwnProperty(re))m[d]=Object.fromEntries(Object.entries(f).map(function(me){var le=p()(me,2),he=le[0],pe=le[1];return he===re?[o,pe]:[he,pe]}));else{console.error("Key not found: ".concat(re));return}y(v)}}function Q(i,o,v){i.required||(i.required=[]);var f=i.required.indexOf(o);v?f!==-1&&i.required.splice(f,1):f===-1&&i.required.push(o),i.required.length===0&&delete i.required}function N(i,o,v){for(var f=W().cloneDeep(g),m=f,d=0;d<i.length;d++){var j=i[d],B=Object.keys(m);typeof m[B[j]]=="undefined"&&(m[B[j]]={}),m=m[B[j]]}Q(m,o,v),y(f)}function ie(i){for(var o=W().cloneDeep(g),v=o,f=o,m=0;m<i.length-1;m++)if(v!=null)f=v,v=v[Object.keys(v)[i[m]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",i);return}var d=Object.keys(v)[i[i.length-1]];Q(f,d,!0),v&&T()(v)==="object"&&v.hasOwnProperty(d)&&delete v[d],y(o)}function Oe(i,o){for(var v=W().cloneDeep(g),f=v,m=0;m<i.length-(o?0:1);m++){var d=Object.keys(f)[i[m]];f[d]||(f[d]={}),f=f[d]}var j=ze("string");o?f.properties["field_".concat(O)]=j:f["field_".concat(O)]=j,te(O+1),y(v)}return(0,e.jsxs)("div",{style:{paddingTop:"10px 10px 0 10px"},children:[x,(0,e.jsx)(Bt,{schema:g,changeSchema:ne,renameProperty:G,removeProperty:ie,addProperty:Oe,updateRequiredProperty:N})]})}var Tt=Mt},71860:function(Je,z,n){"use strict";n.r(z),n.d(z,{texts:function(){return T}});var ce=n(57396);const T=[{value:"1.x.x \u7248\u672C\u7684\u4EE3\u7801\u5DF2\u5B8C\u5168\u91CD\u6784\u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:` UI \u5E03\u5C40\u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528
`,paraId:0,tocIndex:0},{value:"0.x.x",paraId:0,tocIndex:0},{value:" \u7248\u672C\u3002",paraId:0,tocIndex:0},{value:`yarn add @quiet-front-end/json-schema-editor-antd
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"\u53C2\u6570\u540D\u79F0",paraId:6,tocIndex:2},{value:"\u63CF\u8FF0",paraId:6,tocIndex:2},{value:"\u7C7B\u578B",paraId:6,tocIndex:2},{value:"\u9ED8\u8BA4\u503C",paraId:6,tocIndex:2},{value:"onChange",paraId:6,tocIndex:2},{value:"JsonSchema \u53D8\u66F4\u7684\u56DE\u8C03",paraId:6,tocIndex:2},{value:"(schema: JSONSchema7) => void",paraId:6,tocIndex:2},{value:"-",paraId:6,tocIndex:2},{value:"data",paraId:6,tocIndex:2},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E",paraId:6,tocIndex:2},{value:"JSONSchema7 | string | undefined",paraId:6,tocIndex:2},{value:'{"type": "object", "properties": {"field": {"type": "string"}}}',paraId:6,tocIndex:2}]},49832:function(){}}]);
