"use strict";(self.webpackChunk_quiet_front_end_json_schema_editor_antd=self.webpackChunk_quiet_front_end_json_schema_editor_antd||[]).push([[593],{73513:function(Oe,L,n){n.r(L),n.d(L,{demos:function(){return xe}});var _=n(15009),T=n.n(_),ge=n(99289),d=n.n(ge),V=n(67294),xe={"jsonschemaeditor-demo-0":{component:V.memo(V.lazy(d()(T()().mark(function O(){var l,w;return T()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,Promise.resolve().then(n.bind(n,56506));case 2:return l=P.sent,w=l.JsonSchemaEditor,P.abrupt("return",{default:function(){return V.createElement(w,null)}});case 5:case"end":return P.stop()}},O)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@quiet-front-end/json-schema-editor-antd';

export default () => <JsonSchemaEditor />;`},"@quiet-front-end/json-schema-editor-antd":{type:"NPM",value:"1.0.1"}},entry:"index.jsx"},context:{"@quiet-front-end/json-schema-editor-antd":n(56506)},renderOpts:{compile:function(){var O=d()(T()().mark(function w(){var ee,P=arguments;return T()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,n.e(335).then(n.bind(n,37335));case 2:return N.abrupt("return",(ee=N.sent).default.apply(ee,P));case 3:case"end":return N.stop()}},w)}));function l(){return O.apply(this,arguments)}return l}()}}}},56506:function(Oe,L,n){n.r(L),n.d(L,{JsonSchemaEditor:function(){return yt}});var _=n(52677),T=n.n(_),ge=n(5574),d=n.n(ge),V=n(68872),xe=n(96486),O=n.n(xe),l=n(67294),w=n(13769),ee=n.n(w),P=n(97857),I=n.n(P),N=n(61996),rt=n(91286),at=n(15026),Pe=n(24193),ot=n(80120),De=n(79855),Be=n(9361),v=n(25796),j=n(71230),s=n(15746),G=n(14726),Q=n(52993),st=n(56616),pe=n(92932),se=n(61865),it=n(53707),Me=n(38273),D=n(2571),lt=n(72269),ut=n(78045),dt=n(63764),ct={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=n(85893),ht=function(p){var C=p.width,$=p.lineNumbers,J=$===void 0?"on":$,g=p.height,R=p.value,A=p.folding,y=A===void 0?!0:A,B=p.language,S=p.readOnly,z=S===void 0?!1:S,Z=p.renderLineHighlight,X=Z===void 0?"all":Z,Y=p.onChange,K=Be.Z.useToken(),W=K.token;function M(ne){ne.editor.defineTheme("x-code-default",ct)}return(0,e.jsx)("div",{style:{border:"1px solid ".concat(W.colorBorder),width:C||"100%"},children:(0,e.jsx)(dt.ZP,{height:g,width:C,value:R,language:B,onChange:Y,onMount:p.handleEditorDidMount,beforeMount:M,theme:"x-code-default",options:{readOnly:z,lineNumbers:J,renderLineHighlight:X,folding:y,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:9,horizontalScrollbarSize:9},minimap:{enabled:!1}}})})},ke=ht,Te=["string","number","array","object","boolean","integer"];function te(i,p){if(i===null||T()(i)!=="object")return console.error("The provided value is not an object."),-1;var C=Object.keys(i);return C.indexOf(p)}var mt=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],ft=Te.map(function(i){return{value:i}});function Je(i){switch(i){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var Le=function(p){var C=function(g){return Array.isArray(g)?"array":g===null?"null":T()(g)},$=function J(g){var R=C(g);switch(R){case"object":{var A={};for(var y in g)g.hasOwnProperty(y)&&(A[y]=J(g[y]));return{type:"object",properties:A,required:Object.keys(g)}}case"array":return{type:"array",items:g.length?J(g[0]):{}};default:return{type:R}}};return $(p)},gt=["key","name"];function ye(i){var p=Be.Z.useToken(),C=p.token,$=v.Z.useForm(),J=d()($,1),g=J[0],R=V.ZP.useMessage(),A=d()(R,2),y=A[0],B=A[1],S=i.changeSchema,z=i.renameProperty,Z=i.isArrayItems,X=i.updateRequiredProperty,Y=i.parentSchemaDepth,K=Y===void 0?0:Y,W=i.removeProperty,M=i.addProperty,ne=(0,l.useState)(i.schema),ie=d()(ne,2),t=ie[0],h=ie[1],c=(0,l.useState)(),u=d()(c,2),a=u[0],f=u[1],x=(0,l.useState)(i.propertyName),F=d()(x,2),m=F[0],ve=F[1],je=(0,l.useState)(t.title),H=d()(je,2),le=H[0],ue=H[1],de=(0,l.useState)(t.description),re=d()(de,2),Ne=re[0],vt=re[1],jt=(0,l.useState)(i.nodeDepth?i.nodeDepth:0),$e=d()(jt,2),ce=$e[0],St=$e[1],Zt=(0,l.useState)(i.namePath?i.namePath:[]),Re=d()(Zt,2),E=Re[0],It=Re[1],Ct=(0,l.useState)(!0),ze=d()(Ct,2),he=ze[0],Ft=ze[1],Et=(0,l.useState)(!1),Ke=d()(Et,2),U=Ke[0],me=Ke[1],bt=(0,l.useState)(!1),We=d()(bt,2),Se=We[0],Ze=We[1],At=(0,l.useState)("json"),He=d()(At,2),Ue=He[0],Ot=He[1],Pt=(0,l.useState)(),Ve=d()(Pt,2),Ie=Ve[0],we=Ve[1],Dt=(0,l.useState)(!1),Ge=d()(Dt,2),Bt=Ge[0],Mt=Ge[1],kt=(0,l.useState)(!1),Qe=d()(kt,2),Tt=Qe[0],Jt=Qe[1],Lt=(0,l.useState)(!1),Xe=d()(Lt,2),ae=Xe[0],Nt=Xe[1],$t=(0,l.useState)(!1),Ye=d()($t,2),qe=Ye[0],Rt=Ye[1],zt=(0,l.useState)(!1),_e=d()(zt,2),oe=_e[0],Kt=_e[1],Wt=(0,l.useState)(!1),et=d()(Wt,2),q=et[0],Ht=et[1],Ce=(0,l.useRef)(null),b=typeof m=="undefined";(0,l.useEffect)(function(){h(i.schema)},[i.schema]),(0,l.useEffect)(function(){It(i.namePath?i.namePath:[])},[i.namePath]),(0,l.useEffect)(function(){St(i.nodeDepth?i.nodeDepth:0)},[i.nodeDepth]);var Fe=(0,l.useCallback)(O().debounce(function(o){typeof o=="function"?o():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,l.useEffect)(function(){return function(){Fe.cancel()}},[Fe]),(0,l.useEffect)(function(){!U||!a||(g.setFieldsValue(a),Mt(a.type==="object"),Jt(a.type==="array"),Nt(a.type==="number"),Rt(a.type==="boolean"),Kt(a.type==="integer"),Ht(a.type==="string"))},[U,a]);function tt(o){Ce.current=o}var Ee=t.items,be=!!(t.type==="object"||Z&&(Ee==null?void 0:Ee.type)==="object")&&!Z&&!b;return(0,e.jsxs)(e.Fragment,{children:[B,(0,e.jsxs)(j.Z,{align:"middle",style:{paddingBottom:10},children:[(0,e.jsx)(s.Z,{flex:"".concat((ce+1)*21,"px"),style:{marginLeft:ce*5},children:(0,e.jsx)(j.Z,{justify:"end",children:t.type==="object"&&(0,e.jsx)(G.ZP,{type:"text",size:"small",icon:he?(0,e.jsx)(N.Z,{}):(0,e.jsx)(rt.Z,{}),onClick:function(){return Ft(!he)}})})}),(0,e.jsx)(s.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(Q.Z,{status:!b&&m.length===0?"error":void 0,disabled:b||Z,value:b?"root":m,placeholder:"\u5C5E\u6027\u540D\u79F0",onBlur:function(){if((m==null?void 0:m.length)===0){y.error("\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}z&&m&&(m==null?void 0:m.length)!==0&&z(E,m)},onChange:function(r){return ve(r.target.value)}})}),(0,e.jsx)(s.Z,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(st.Z,{disabled:Z||b,onChange:function(r){X&&m&&X(E.slice(0,K),m,!r.target.checked)}})}),(0,e.jsx)(s.Z,{flex:"95px",style:{marginLeft:5},children:(0,e.jsx)(pe.Z,{style:{width:"95px"},value:t.type,options:ft,onChange:function(r){S&&S(E,Je(r),"type")}})}),(0,e.jsx)(s.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(Q.Z,{placeholder:"\u6807\u9898",value:le,onBlur:function(){S&&S(E.concat(te(t,"title")),le,"title")},onChange:function(r){return ue(r.target.value)}})}),(0,e.jsx)(s.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(Q.Z,{placeholder:"\u63CF\u8FF0",value:Ne,onBlur:function(){S&&S(E.concat(te(t,"description")),Ne,"description")},onChange:function(r){return vt(r.target.value)}})}),(0,e.jsx)(s.Z,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(j.Z,{style:{width:"72px"},children:[(0,e.jsx)(se.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)(G.ZP,{type:"text",size:"small",icon:(0,e.jsx)(at.Z,{}),style:{color:"green"},onClick:function(){f(t),me(!U)}})}),!b||!Z||t.type==="object"?(0,e.jsx)(it.Z,{disabled:!be,placement:"bottom",menu:{items:[{key:"addNode",label:"\u540C\u7EA7\u8282\u70B9",onClick:function(){M&&M(E,!1)}},{key:"addChildNode",label:"\u5B50\u7EA7\u8282\u70B9",onClick:function(){M&&M(E,!0)}}]},children:(0,e.jsx)(se.Z,{title:!be&&"\u6DFB\u52A0\u8282\u70B9",children:(0,e.jsx)(G.ZP,{type:"text",size:"small",icon:(0,e.jsx)(Pe.Z,{}),style:{color:C.colorPrimary},onClick:function(){be||M&&M(E,!(!Z&&!b))}})})}):(0,e.jsx)("div",{style:{width:"24px"}}),(0,e.jsx)(s.Z,{flex:"24px",children:b?(0,e.jsx)(se.Z,{title:"\u5BFC\u5165Json",children:(0,e.jsx)(G.ZP,{type:"text",size:"small",icon:(0,e.jsx)(ot.Z,{}),style:{color:"purple"},onClick:function(){return Ze(!0)}})}):Z?(0,e.jsx)("div",{style:{width:"24px"}}):(0,e.jsx)(se.Z,{title:"\u5220\u9664\u8282\u70B9",children:(0,e.jsx)(G.ZP,{danger:!0,type:"text",size:"small",icon:(0,e.jsx)(De.Z,{}),onClick:function(){W&&W(E)}})})}),b&&t.type!=="object"&&(0,e.jsx)(s.Z,{flex:"24px",children:!Z&&(0,e.jsx)("div",{style:{width:"24px"}})})]})})]}),t.type==="object"&&he&&t.properties&&Object.keys(t.properties).map(function(o){return t.properties?(0,e.jsx)("div",{children:(0,e.jsx)(ye,I()(I()({},i),{},{isArrayItems:!1,nodeDepth:ce+1,parentSchemaDepth:b?0:K+2,namePath:E.concat(te(t,"properties"),te(t.properties,o)),propertyName:o,schema:t.properties[o]}))},String(o)):(0,e.jsx)(e.Fragment,{})}),t.type==="array"&&he&&(0,e.jsx)(ye,I()(I()({},i),{},{isArrayItems:!0,nodeDepth:ce+1,parentSchemaDepth:b?0:K+1,propertyName:"items",namePath:E.concat(te(t,"items")),schema:t.items})),(0,e.jsx)(Me.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",width:700,open:U,okText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",onOk:function(){if(S){if(b||t.type==="object"){S(E,I()(I()({},t),a),"root"),me(!U);return}g.validateFields().then(function(r){S(E,I()(I()({},t),r),m),me(!U)}).catch(function(r){console.log("Failed:",r)})}},onCancel:function(){return me(!U)},children:(0,e.jsxs)(v.Z,{form:g,onValuesChange:function(r,k){Ce.current&&Ce.current.setValue(JSON.stringify(I()(I()({},a),k),null,2))},children:[!Bt&&Te.indexOf(a==null?void 0:a.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(C.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"\u57FA\u672C\u8BBE\u7F6E"}),(q||ae||oe||qe)&&(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u9ED8\u8BA4\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsxs)(v.Z.Item,{noStyle:!0,name:"default",children:[q&&(0,e.jsx)(Q.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"}),(ae||oe)&&(0,e.jsx)(D.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"}),qe&&(0,e.jsx)(pe.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",options:[{value:!0,label:"true"},{value:!1,label:"false"}]})]})})]}),q&&(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u957F\u5EA6\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"minLength",children:(0,e.jsx)(D.Z,{min:0,style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6"})})}),(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u957F\u5EA6\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"maxLength",children:(0,e.jsx)(D.Z,{min:0,style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6"})})})]}),(ae||oe)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"minimum",children:(0,e.jsx)(D.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C"})})}),(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"maximum",children:(0,e.jsx)(D.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C"})})})]}),(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"exclusiveMinimum",children:(0,e.jsx)(D.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C"})})}),(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"exclusiveMaximum",children:(0,e.jsx)(D.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C"})})})]})]}),q&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6B63\u5219\u5339\u914D\uFF1A"}),(0,e.jsx)(s.Z,{span:20,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"pattern",children:(0,e.jsx)(Q.Z,{placeholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F"})})})]}),(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u683C\u5F0F\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"format",children:(0,e.jsx)(pe.Z,{allowClear:!0,options:mt,placeholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",style:{width:"100%"}})})})]})]}),Tt&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u5143\u7D20\u552F\u4E00\uFF1A"}),(0,e.jsx)(s.Z,{span:20,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"uniqueItems",valuePropName:"checked",children:(0,e.jsx)(lt.Z,{})})})]}),(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"minItems",children:(0,e.jsx)(D.Z,{style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570"})})}),(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u591A\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"maxItems",children:(0,e.jsx)(D.Z,{style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570"})})})]})]}),(q||ae||oe)&&(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u679A\u4E3E\uFF1A"}),(0,e.jsx)(s.Z,{span:20,children:(0,e.jsx)(v.Z.List,{name:"enums",children:function(r,k){var Ae=k.add,Ut=k.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z,{children:r.map(function(fe){var Vt=fe.key,nt=fe.name,wt=ee()(fe,gt);return(0,e.jsx)(s.Z,{span:12,children:(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:6},children:[(0,e.jsx)(s.Z,{flex:"auto",children:(0,e.jsxs)(v.Z.Item,I()(I()({},wt),{},{noStyle:!0,name:[nt],rules:[{required:!0}],children:[q&&(0,e.jsx)(Q.Z,{placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"}),(ae||oe)&&(0,e.jsx)(D.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})]}))}),(0,e.jsx)(s.Z,{flex:"36px",style:{paddingLeft:7},children:(0,e.jsx)(De.Z,{onClick:function(){return Ut(nt)}})})]})},Vt)})}),(0,e.jsx)(j.Z,{children:(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,children:(0,e.jsx)(G.ZP,{onClick:function(){return Ae()},block:!0,icon:(0,e.jsx)(Pe.Z,{}),children:"\u6DFB\u52A0\u679A\u4E3E\u503C"})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(C.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)(ke,{height:300,language:"json",value:JSON.stringify(a,null,2),handleEditorDidMount:tt,onChange:function(r){Fe(function(){if(r)try{var k=JSON.parse(r);f(k)}catch(Ae){}})}})]})}),(0,e.jsxs)(Me.Z,{title:"\u5BFC\u5165",width:900,okText:"\u5BFC\u5165",cancelText:"\u53D6\u6D88",open:Se,onOk:function(){if(!Ie||Ie.length===0){y.warning("\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E");return}var r;try{r=JSON.parse(Ie)}catch(Ae){y.error("\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E");return}var k;switch(Ue){case"json":k=Le(r);break;case"json-schema":k=r;break}S&&(S([],k,"root"),Ze(!Se),we(void 0))},onCancel:function(){return Ze(!Se)},children:[(0,e.jsx)(j.Z,{style:{marginBottom:16},children:(0,e.jsx)(ut.ZP.Group,{value:Ue,optionType:"button",buttonStyle:"solid",onChange:function(r){return Ot(r.target.value)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(j.Z,{children:(0,e.jsx)(ke,{height:390,language:"json",handleEditorDidMount:tt,onChange:function(r){return we(r)}})})]})]})}var xt=ye;function pt(i){var p=V.ZP.useMessage(),C=d()(p,2),$=C[0],J=C[1];function g(t){var h={type:"object",properties:{field:{type:"string"}}};if(!t)return h;switch(T()(t)){case"string":try{return Le(JSON.parse(t))}catch(c){return $.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),h}case"object":return t}}var R=(0,l.useState)(g(i.data)),A=d()(R,2),y=A[0],B=A[1],S=(0,l.useState)(0),z=d()(S,2),Z=z[0],X=z[1];(0,l.useEffect)(function(){i.onSchemaChange&&i.onSchemaChange(y)},[y]);function Y(t,h,c){if(t.length===0){B(h);return}for(var u=O().cloneDeep(y),a=u,f=0;f<t.length-1;f++){var x=Object.keys(a)[t[f]];a[x]||(a[x]={}),a=a[x]}var F=t[t.length-1],m=Object.keys(a)[F];if(F===-1){if(typeof h=="undefined")return;a[c]=h}else{if(a[m]===h)return;a[m]=h}B(u)}function K(t,h){for(var c=O().cloneDeep(y),u=c,a=null,f="",x=0;x<t.length-1;x++){var F=Object.keys(u),m=void 0;if(typeof t[x]=="number"?m=t[x]:m=F.indexOf(String(t[x])),m<0||m>=F.length){console.error("Path not found: ".concat(t.slice(0,x+1).join(".")));return}a=u,f=F[m],u=u[f]}var ve=t[t.length-1],je=Object.keys(u),H=je[ve];if(H!==h){if(u.hasOwnProperty(H))a[f]=Object.fromEntries(Object.entries(u).map(function(le){var ue=d()(le,2),de=ue[0],re=ue[1];return de===H?[h,re]:[de,re]}));else{console.error("Key not found: ".concat(H));return}B(c)}}function W(t,h,c){t.required||(t.required=[]);var u=t.required.indexOf(h);c?u!==-1&&t.required.splice(u,1):u===-1&&t.required.push(h),t.required.length===0&&delete t.required}function M(t,h,c){for(var u=O().cloneDeep(y),a=u,f=0;f<t.length;f++){var x=t[f],F=Object.keys(a);typeof a[F[x]]=="undefined"&&(a[F[x]]={}),a=a[F[x]]}W(a,h,c),B(u)}function ne(t){for(var h=O().cloneDeep(y),c=h,u=h,a=0;a<t.length-1;a++)if(c!=null)u=c,c=c[Object.keys(c)[t[a]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",t);return}var f=Object.keys(c)[t[t.length-1]];W(u,f,!0),c&&T()(c)==="object"&&c.hasOwnProperty(f)&&delete c[f],B(h)}function ie(t,h){for(var c=O().cloneDeep(y),u=c,a=0;a<t.length-(h?0:1);a++){var f=Object.keys(u)[t[a]];u[f]||(u[f]={}),u=u[f]}var x=Je("string");h?u.properties["field_".concat(Z)]=x:u["field_".concat(Z)]=x,X(Z+1),B(c)}return(0,e.jsxs)("div",{style:{paddingTop:"10px 10px 0 10px"},children:[J,(0,e.jsx)(xt,{schema:y,changeSchema:Y,renameProperty:K,removeProperty:ne,addProperty:ie,updateRequiredProperty:M})]})}var yt=pt},20588:function(Oe,L,n){n.r(L),n.d(L,{texts:function(){return _}});const _=[{value:"1.x.x \u7248\u672C\u7684\u4EE3\u7801\u5DF2\u5B8C\u5168\u91CD\u6784\u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:` UI \u5E03\u5C40\u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528
`,paraId:0,tocIndex:0},{value:"0.x.x",paraId:0,tocIndex:0},{value:" \u7248\u672C\u3002",paraId:0,tocIndex:0},{value:`yarn add @quiet-front-end/json-schema-editor-antd
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"\u53C2\u6570\u540D\u79F0",paraId:6,tocIndex:2},{value:"\u63CF\u8FF0",paraId:6,tocIndex:2},{value:"\u7C7B\u578B",paraId:6,tocIndex:2},{value:"\u9ED8\u8BA4\u503C",paraId:6,tocIndex:2},{value:"onChange",paraId:6,tocIndex:2},{value:"JsonSchema \u53D8\u66F4\u7684\u56DE\u8C03",paraId:6,tocIndex:2},{value:"(schema: JSONSchema7) => void",paraId:6,tocIndex:2},{value:"-",paraId:6,tocIndex:2},{value:"data",paraId:6,tocIndex:2},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E",paraId:6,tocIndex:2},{value:"JSONSchema7 | string | undefined",paraId:6,tocIndex:2},{value:'{"type": "object", "properties": {"field": {"type": "string"}}}',paraId:6,tocIndex:2}]}}]);
