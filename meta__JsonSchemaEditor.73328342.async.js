(self.webpackChunk_quiet_front_end_json_schema_editor_antd=self.webpackChunk_quiet_front_end_json_schema_editor_antd||[]).push([[593],{77102:function(Je,K,n){"use strict";n.r(K),n.d(K,{demos:function(){return c}});var de=n(15009),T=n.n(de),xe=n(99289),m=n.n(xe),X=n(67294),Le=n(57396),R=n(56506),c={"jsonschemaeditor-demo-0":{component:X.memo(X.lazy(m()(T()().mark(function ae(){var W,Y;return T()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,Promise.resolve().then(n.bind(n,56506));case 2:return W=L.sent,Y=W.JsonSchemaEditor,L.abrupt("return",{default:function(){return X.createElement(Y,null)}});case 5:case"end":return L.stop()}},ae)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@quiet-front-end/json-schema-editor-antd';

export default () => <JsonSchemaEditor />;`},"@quiet-front-end/json-schema-editor-antd":{type:"NPM",value:"1.0.2"}},entry:"index.jsx"},context:{"@quiet-front-end/json-schema-editor-antd":R},renderOpts:{compile:function(){var ae=m()(T()().mark(function Y(){var q,L=arguments;return T()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,n.e(335).then(n.bind(n,37335));case 2:return z.abrupt("return",(q=z.sent).default.apply(q,L));case 3:case"end":return z.stop()}},Y)}));function W(){return ae.apply(this,arguments)}return W}()}}}},56506:function(Je,K,n){"use strict";n.r(K),n.d(K,{JsonSchemaEditor:function(){return Mt}});var de=n(52677),T=n.n(de),xe=n(5574),m=n.n(xe),X=n(68872),Le=n(96486),R=n.n(Le),c=n(67294),ae=n(15009),W=n.n(ae),Y=n(99289),q=n.n(Y),L=n(13769),Se=n.n(L),z=n(97857),B=n.n(z),ut=n(39398),dt=n(14313),ct=n(42952),ke=n(24969),ft=n(57546),Ne=n(48689),$e=n(9361),C=n(23323),O=n(71230),l=n(15746),_=n(92797),ee=n(56846),mt=n(56616),Ze=n(21628),ce=n(61865),ht=n(65695),Re=n(75027),k=n(24435),pt=n(41637),vt=n(78045),gt=n(79443),yt=n(63764),jt={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=n(85893),xt=function(o){var f=o.width,A=o.lineNumbers,S=A===void 0?"on":A,u=o.height,b=o.value,Z=o.folding,v=Z===void 0?!0:Z,g=o.language,I=o.readOnly,J=I===void 0?!1:I,F=o.renderLineHighlight,te=F===void 0?"all":F,ne=o.onChange,w=$e.Z.useToken(),V=w.token;function N(se){se.editor.defineTheme("x-code-default",jt)}return(0,e.jsx)("div",{style:{border:"1px solid ".concat(V.colorBorder),width:f||"100%"},children:(0,e.jsx)(yt.ZP,{height:u,width:f,value:b,language:g,onChange:ne,onMount:o.handleEditorDidMount,beforeMount:N,theme:"x-code-default",options:{readOnly:J,lineNumbers:S,renderLineHighlight:te,folding:v,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:9,horizontalScrollbarSize:9},minimap:{enabled:!1}}})})},We=xt,St=n(64599),Zt=n.n(St),It=n(65009),Ct=n.n(It);function U(t,o){if(t.$ref){var f=t.$ref;if(f.startsWith("#/")){var A=f.slice(2).split("/"),S=R().cloneDeep(o),u=Zt()(A),b;try{for(u.s();!(b=u.n()).done;){var Z=b.value;if(S[Z])S=S[Z];else throw new Error("Unable to resolve $ref: ".concat(f))}}catch(g){u.e(g)}finally{u.f()}return S}else throw new Error("Unsupported $ref format: ".concat(f))}if(t.properties)for(var v in t.properties)t.properties[v]&&(t.properties[v]=U(t.properties[v],o));return t.items&&(Array.isArray(t.items)?t.items=t.items.map(function(g){return U(g,o)}):t.items=U(t.items,o)),t.oneOf&&(t.oneOf=t.oneOf.map(function(g){return U(g,o)})),t.anyOf&&(t.anyOf=t.anyOf.map(function(g){return U(g,o)})),t.allOf&&(t.allOf=t.allOf.map(function(g){return U(g,o)})),t}function H(t){var o;if(t.$ref){var f=t.$ref;if(f.startsWith("#/")){var A=f.slice(2).split("/");return A[0]}if(t.properties){for(var S in t.properties)if(t.properties[S]&&(o=H(t.properties[S]),o))return o}}if(t.items){if(Array.isArray(t.items))for(var u=0;u<t.items.length;u++){var b=t.items[u];if(o=H(b),o)return o}else if(o=H(t.items),o)return o}if(t.oneOf)for(var Z=0;Z<t.oneOf.length;Z++){var v=t.oneOf[Z];if(o=H(v),o)return o}if(t.anyOf)for(var g=0;g<t.anyOf.length;g++){var I=t.anyOf[g];if(o=H(I),o)return o}if(t.allOf)for(var J=0;J<t.allOf.length;J++){var F=t.allOf[J];if(o=H(F),o)return o}}function Ot(t){return Ie.apply(this,arguments)}function Ie(){return Ie=q()(W()().mark(function t(o){var f,A;return W()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Ct().dereference(o,{mutateInputSchema:!1,dereference:{circular:"ignore"}});case 2:if(f=u.sent,A=H(f),!A){u.next=6;break}return u.abrupt("return",U(f,f));case 6:return u.abrupt("return",f);case 7:case"end":return u.stop()}},t)})),Ie.apply(this,arguments)}function Ft(t){if(typeof t=="string"){var o=t.trim();if(o.startsWith("{")&&o.endsWith("}"))try{return JSON.parse(o)}catch(f){return}}}var Ke=["string","number","array","object","boolean","integer"];function oe(t,o){if(t===null||T()(t)!=="object")return console.error("The provided value is not an object."),-1;var f=Object.keys(t);return f.indexOf(o)}var Et=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],At=Ke.map(function(t){return{value:t}});function ze(t){switch(t){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var bt=function(o){var f=function(u){return Array.isArray(u)?"array":u===null?"null":T()(u)},A=function S(u){var b=f(u);switch(b){case"object":{var Z={};for(var v in u)u.hasOwnProperty(v)&&(Z[v]=S(u[v]));return{type:"object",properties:Z,required:Object.keys(u)}}case"array":return{type:"array",items:u.length?S(u[0]):{}};default:return{type:b}}};return A(o)},Dt=["key","name"];function Ce(t){var o=$e.Z.useToken(),f=o.token,A=C.Z.useForm(),S=m()(A,1),u=S[0],b=X.ZP.useMessage(),Z=m()(b,2),v=Z[0],g=Z[1],I=t.changeSchema,J=t.renameProperty,F=t.isArrayItems,te=t.updateRequiredProperty,ne=t.parentSchemaDepth,w=ne===void 0?0:ne,V=t.removeProperty,N=t.addProperty,se=(0,c.useState)(t.schema),fe=m()(se,2),r=fe[0],p=fe[1],h=(0,c.useState)(),d=m()(h,2),s=d[0],j=d[1],x=(0,c.useState)(t.propertyName),D=m()(x,2),y=D[0],Oe=D[1],Fe=(0,c.useState)(r.title),G=m()(Fe,2),me=G[0],he=G[1],pe=(0,c.useState)(r.description),ie=m()(pe,2),Ue=ie[0],Tt=ie[1],Jt=(0,c.useState)(t.nodeDepth?t.nodeDepth:0),He=m()(Jt,2),ve=He[0],Lt=He[1],kt=(0,c.useState)(t.namePath?t.namePath:[]),we=m()(kt,2),P=we[0],Nt=we[1],$t=(0,c.useState)(!0),Ve=m()($t,2),ge=Ve[0],Rt=Ve[1],Wt=(0,c.useState)(!1),Ge=m()(Wt,2),Q=Ge[0],ye=Ge[1],Kt=(0,c.useState)(!1),Qe=m()(Kt,2),Ee=Qe[0],Ae=Qe[1],zt=(0,c.useState)("json"),Xe=m()(zt,2),Ye=Xe[0],Ut=Xe[1],Ht=(0,c.useState)(),qe=m()(Ht,2),be=qe[0],_e=qe[1],wt=(0,c.useState)(!1),et=m()(wt,2),Vt=et[0],Gt=et[1],Qt=(0,c.useState)(!1),tt=m()(Qt,2),Xt=tt[0],Yt=tt[1],qt=(0,c.useState)(!1),nt=m()(qt,2),le=nt[0],_t=nt[1],en=(0,c.useState)(!1),rt=m()(en,2),at=rt[0],tn=rt[1],nn=(0,c.useState)(!1),ot=m()(nn,2),ue=ot[0],rn=ot[1],an=(0,c.useState)(!1),st=m()(an,2),re=st[0],on=st[1],De=(0,c.useRef)(null),M=typeof y=="undefined";(0,c.useEffect)(function(){p(t.schema)},[t.schema]),(0,c.useEffect)(function(){Nt(t.namePath?t.namePath:[])},[t.namePath]),(0,c.useEffect)(function(){Lt(t.nodeDepth?t.nodeDepth:0)},[t.nodeDepth]);var Pe=(0,c.useCallback)(R().debounce(function(i){typeof i=="function"?i():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,c.useEffect)(function(){return function(){Pe.cancel()}},[Pe]),(0,c.useEffect)(function(){!Q||!s||(u.setFieldsValue(s),Gt(s.type==="object"),Yt(s.type==="array"),_t(s.type==="number"),tn(s.type==="boolean"),rn(s.type==="integer"),on(s.type==="string"))},[Q,s]);function it(i){De.current=i}var Be=r.items,Me=!!(r.type==="object"||F&&(Be==null?void 0:Be.type)==="object")&&!F&&!M;return r.type?(0,e.jsxs)(e.Fragment,{children:[g,(0,e.jsxs)(O.Z,{align:"middle",style:{paddingBottom:10},children:[(0,e.jsx)(l.Z,{flex:"".concat(24+ve*17,"px"),style:{marginLeft:ve*5},children:(0,e.jsx)(O.Z,{justify:"end",children:r.type==="object"&&(0,e.jsx)(_.ZP,{type:"text",size:"small",icon:ge?(0,e.jsx)(ut.Z,{}):(0,e.jsx)(dt.Z,{}),onClick:function(){return Rt(!ge)}})})}),(0,e.jsx)(l.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(ee.Z,{status:!M&&y.length===0?"error":void 0,disabled:M||F,value:M?"root":y,placeholder:"\u5C5E\u6027\u540D\u79F0",onBlur:function(){if((y==null?void 0:y.length)===0){v.error("\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}J&&y&&(y==null?void 0:y.length)!==0&&J(P,y)},onChange:function(a){return Oe(a.target.value)}})}),(0,e.jsx)(l.Z,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(mt.Z,{disabled:F||M,onChange:function(a){te&&y&&te(P.slice(0,w),y,!a.target.checked)}})}),(0,e.jsx)(l.Z,{flex:"95px",style:{marginLeft:5},children:(0,e.jsx)(Ze.Z,{style:{width:"95px"},value:r.type,options:At,onChange:function(a){I&&I(P,ze(a),"type")}})}),(0,e.jsx)(l.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(ee.Z,{placeholder:"\u6807\u9898",value:me,onBlur:function(){I&&I(P.concat(oe(r,"title")),me,"title")},onChange:function(a){return he(a.target.value)}})}),(0,e.jsx)(l.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(ee.Z,{placeholder:"\u63CF\u8FF0",value:Ue,onBlur:function(){I&&I(P.concat(oe(r,"description")),Ue,"description")},onChange:function(a){return Tt(a.target.value)}})}),(0,e.jsx)(l.Z,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(O.Z,{style:{width:"72px"},children:[(0,e.jsx)(ce.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)(_.ZP,{type:"text",size:"small",icon:(0,e.jsx)(ct.Z,{}),style:{color:"green"},onClick:function(){j(r),ye(!Q)}})}),!M||!F||r.type==="object"?(0,e.jsx)(ht.Z,{disabled:!Me,placement:"bottom",menu:{items:[{key:"addNode",label:"\u540C\u7EA7\u8282\u70B9",onClick:function(){N&&N(P,!1)}},{key:"addChildNode",label:"\u5B50\u7EA7\u8282\u70B9",onClick:function(){N&&N(P,!0)}}]},children:(0,e.jsx)(ce.Z,{title:!Me&&"\u6DFB\u52A0\u8282\u70B9",children:(0,e.jsx)(_.ZP,{type:"text",size:"small",icon:(0,e.jsx)(ke.Z,{}),style:{color:f.colorPrimary},onClick:function(){Me||N&&N(P,!(!F&&!M))}})})}):(0,e.jsx)("div",{style:{width:"24px"}}),(0,e.jsx)(l.Z,{flex:"24px",children:M?(0,e.jsx)(ce.Z,{title:"\u5BFC\u5165Json",children:(0,e.jsx)(_.ZP,{type:"text",size:"small",icon:(0,e.jsx)(ft.Z,{}),style:{color:"purple"},onClick:function(){return Ae(!0)}})}):F?(0,e.jsx)("div",{style:{width:"24px"}}):(0,e.jsx)(ce.Z,{title:"\u5220\u9664\u8282\u70B9",children:(0,e.jsx)(_.ZP,{danger:!0,type:"text",size:"small",icon:(0,e.jsx)(Ne.Z,{}),onClick:function(){V&&V(P)}})})}),M&&r.type!=="object"&&(0,e.jsx)(l.Z,{flex:"24px",children:!F&&(0,e.jsx)("div",{style:{width:"24px"}})})]})})]}),r.type==="object"&&ge&&r.properties&&Object.keys(r.properties).map(function(i){return r.properties?(0,e.jsx)("div",{children:(0,e.jsx)(Ce,B()(B()({},t),{},{isArrayItems:!1,nodeDepth:ve+1,parentSchemaDepth:M?0:w+2,namePath:P.concat(oe(r,"properties"),oe(r.properties,i)),propertyName:i,schema:r.properties[i]}))},String(i)):(0,e.jsx)(e.Fragment,{})}),r.type==="array"&&ge&&(0,e.jsx)(Ce,B()(B()({},t),{},{isArrayItems:!0,nodeDepth:ve+1,parentSchemaDepth:M?0:w+1,propertyName:"items",namePath:P.concat(oe(r,"items")),schema:r.items})),(0,e.jsx)(Re.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",width:900,open:Q,okText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",onOk:function(){if(I){if(M||r.type==="object"){I(P,B()(B()({},r),s),"root"),ye(!Q);return}u.validateFields().then(function(a){I(P,B()(B()({},r),a),y),ye(!Q)}).catch(function(a){console.log("Failed:",a)})}},onCancel:function(){return ye(!Q)},children:(0,e.jsxs)(C.Z,{form:u,onValuesChange:function(a,$){De.current&&De.current.setValue(JSON.stringify(B()(B()({},s),$),null,2))},children:[!Vt&&Ke.indexOf(s==null?void 0:s.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(f.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"\u57FA\u672C\u8BBE\u7F6E"}),(re||le||ue||at)&&(0,e.jsxs)(O.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u9ED8\u8BA4\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsxs)(C.Z.Item,{noStyle:!0,name:"default",children:[re&&(0,e.jsx)(ee.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"}),(le||ue)&&(0,e.jsx)(k.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"}),at&&(0,e.jsx)(Ze.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",options:[{value:!0,label:"true"},{value:!1,label:"false"}]})]})})]}),re&&(0,e.jsxs)(O.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u957F\u5EA6\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,name:"minLength",children:(0,e.jsx)(k.Z,{min:0,style:{width:"100%"},parser:function(a){return a?parseInt(a.replace(/\D/g,""),10):""},formatter:function(a){return a?"".concat(Math.floor(Math.max(a,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6"})})}),(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u957F\u5EA6\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,name:"maxLength",children:(0,e.jsx)(k.Z,{min:0,style:{width:"100%"},parser:function(a){return a?parseInt(a.replace(/\D/g,""),10):""},formatter:function(a){return a?"".concat(Math.floor(Math.max(a,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6"})})})]}),(le||ue)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(O.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,name:"minimum",children:(0,e.jsx)(k.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C"})})}),(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,name:"maximum",children:(0,e.jsx)(k.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C"})})})]}),(0,e.jsxs)(O.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,name:"exclusiveMinimum",children:(0,e.jsx)(k.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C"})})}),(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,name:"exclusiveMaximum",children:(0,e.jsx)(k.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C"})})})]})]}),re&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(O.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6B63\u5219\u5339\u914D\uFF1A"}),(0,e.jsx)(l.Z,{span:20,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,name:"pattern",children:(0,e.jsx)(ee.Z,{placeholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F"})})})]}),(0,e.jsxs)(O.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u683C\u5F0F\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,name:"format",children:(0,e.jsx)(Ze.Z,{allowClear:!0,options:Et,placeholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",style:{width:"100%"}})})})]})]}),Xt&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(O.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u5143\u7D20\u552F\u4E00\uFF1A"}),(0,e.jsx)(l.Z,{span:20,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,name:"uniqueItems",valuePropName:"checked",children:(0,e.jsx)(pt.Z,{})})})]}),(0,e.jsxs)(O.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,name:"minItems",children:(0,e.jsx)(k.Z,{style:{width:"100%"},parser:function(a){return a?parseInt(a.replace(/\D/g,""),10):""},formatter:function(a){return a?"".concat(Math.floor(Math.max(a,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570"})})}),(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u591A\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,name:"maxItems",children:(0,e.jsx)(k.Z,{style:{width:"100%"},parser:function(a){return a?parseInt(a.replace(/\D/g,""),10):""},formatter:function(a){return a?"".concat(Math.floor(Math.max(a,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570"})})})]})]}),(re||le||ue)&&(0,e.jsxs)(O.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u679A\u4E3E\uFF1A"}),(0,e.jsx)(l.Z,{span:20,children:(0,e.jsx)(C.Z.List,{name:"enums",children:function(a,$){var Te=$.add,E=$.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(O.Z,{children:a.map(function(je){var sn=je.key,lt=je.name,ln=Se()(je,Dt);return(0,e.jsx)(l.Z,{span:12,children:(0,e.jsxs)(O.Z,{justify:"start",align:"middle",style:{marginBottom:6},children:[(0,e.jsx)(l.Z,{flex:"auto",children:(0,e.jsxs)(C.Z.Item,B()(B()({},ln),{},{noStyle:!0,name:[lt],rules:[{required:!0}],children:[re&&(0,e.jsx)(ee.Z,{placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"}),(le||ue)&&(0,e.jsx)(k.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})]}))}),(0,e.jsx)(l.Z,{flex:"36px",style:{paddingLeft:7},children:(0,e.jsx)(Ne.Z,{onClick:function(){return E(lt)}})})]})},sn)})}),(0,e.jsx)(O.Z,{children:(0,e.jsx)(l.Z,{span:12,children:(0,e.jsx)(C.Z.Item,{noStyle:!0,children:(0,e.jsx)(_.ZP,{onClick:function(){return Te()},block:!0,icon:(0,e.jsx)(ke.Z,{}),children:"\u6DFB\u52A0\u679A\u4E3E\u503C"})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(f.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)(We,{height:300,language:"json",value:JSON.stringify(s,null,2),handleEditorDidMount:it,onChange:function(a){Pe(function(){if(a)try{var $=JSON.parse(a);j($)}catch(Te){}})}})]})}),(0,e.jsxs)(Re.Z,{title:"\u5BFC\u5165",width:900,okText:"\u5BFC\u5165",cancelText:"\u53D6\u6D88",open:Ee,onOk:q()(W()().mark(function i(){var a,$;return W()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!be||be.length===0)){E.next=3;break}return v.warning("\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E"),E.abrupt("return");case 3:if(a=Ft(be),a){E.next=7;break}return v.error("\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E"),E.abrupt("return");case 7:E.t0=Ye,E.next=E.t0==="json"?10:E.t0==="json-schema"?12:16;break;case 10:return $=new gt.NL().createSchemaOf(a),E.abrupt("break",16);case 12:return E.next=14,Ot(a);case 14:return $=E.sent,E.abrupt("break",16);case 16:I&&(I([],$,"root"),Ae(!Ee),_e(void 0));case 17:case"end":return E.stop()}},i)})),onCancel:function(){return Ae(!Ee)},children:[(0,e.jsx)(O.Z,{style:{marginBottom:16},children:(0,e.jsx)(vt.ZP.Group,{value:Ye,optionType:"button",buttonStyle:"solid",onChange:function(a){return Ut(a.target.value)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(O.Z,{children:(0,e.jsx)(We,{height:390,language:"json",handleEditorDidMount:it,onChange:function(a){return _e(a)}})})]})]}):(0,e.jsx)(e.Fragment,{})}var Pt=Ce;function Bt(t){var o=X.ZP.useMessage(),f=m()(o,2),A=f[0],S=f[1];function u(r){var p={type:"object",properties:{field:{type:"string"}}};if(!r)return p;switch(T()(r)){case"string":try{return bt(JSON.parse(r))}catch(h){return A.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),p}case"object":return r}}var b=(0,c.useState)(u(t.data)),Z=m()(b,2),v=Z[0],g=Z[1],I=(0,c.useState)(0),J=m()(I,2),F=J[0],te=J[1];(0,c.useEffect)(function(){t.onSchemaChange&&t.onSchemaChange(v)},[v]);function ne(r,p,h){if(r.length===0){g(p);return}for(var d=R().cloneDeep(v),s=d,j=0;j<r.length-1;j++){var x=Object.keys(s)[r[j]];s[x]||(s[x]={}),s=s[x]}var D=r[r.length-1],y=Object.keys(s)[D];if(D===-1){if(typeof p=="undefined")return;s[h]=p}else{if(s[y]===p)return;s[y]=p}g(d)}function w(r,p){for(var h=R().cloneDeep(v),d=h,s=null,j="",x=0;x<r.length-1;x++){var D=Object.keys(d),y=void 0;if(typeof r[x]=="number"?y=r[x]:y=D.indexOf(String(r[x])),y<0||y>=D.length){console.error("Path not found: ".concat(r.slice(0,x+1).join(".")));return}s=d,j=D[y],d=d[j]}var Oe=r[r.length-1],Fe=Object.keys(d),G=Fe[Oe];if(G!==p){if(d.hasOwnProperty(G))s[j]=Object.fromEntries(Object.entries(d).map(function(me){var he=m()(me,2),pe=he[0],ie=he[1];return pe===G?[p,ie]:[pe,ie]}));else{console.error("Key not found: ".concat(G));return}g(h)}}function V(r,p,h){r.required||(r.required=[]);var d=r.required.indexOf(p);h?d!==-1&&r.required.splice(d,1):d===-1&&r.required.push(p),r.required.length===0&&delete r.required}function N(r,p,h){for(var d=R().cloneDeep(v),s=d,j=0;j<r.length;j++){var x=r[j],D=Object.keys(s);typeof s[D[x]]=="undefined"&&(s[D[x]]={}),s=s[D[x]]}V(s,p,h),g(d)}function se(r){for(var p=R().cloneDeep(v),h=p,d=p,s=0;s<r.length-1;s++)if(h!=null)d=h,h=h[Object.keys(h)[r[s]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",r);return}var j=Object.keys(h)[r[r.length-1]];V(d,j,!0),h&&T()(h)==="object"&&h.hasOwnProperty(j)&&delete h[j],g(p)}function fe(r,p){for(var h=R().cloneDeep(v),d=h,s=0;s<r.length-(p?0:1);s++){var j=Object.keys(d)[r[s]];d[j]||(d[j]={}),d=d[j]}var x=ze("string");p?d.properties["field_".concat(F)]=x:d["field_".concat(F)]=x,te(F+1),g(h)}return(0,e.jsxs)("div",{style:{paddingTop:"10px 10px 0 10px"},children:[S,(0,e.jsx)(Pt,{schema:v,changeSchema:ne,renameProperty:w,removeProperty:se,addProperty:fe,updateRequiredProperty:N})]})}var Mt=Bt},71860:function(Je,K,n){"use strict";n.r(K),n.d(K,{texts:function(){return T}});var de=n(57396);const T=[{value:"1.x.x \u7248\u672C\u7684\u4EE3\u7801\u5DF2\u5B8C\u5168\u91CD\u6784\u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:` UI \u5E03\u5C40\u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528
`,paraId:0,tocIndex:0},{value:"0.x.x",paraId:0,tocIndex:0},{value:" \u7248\u672C\u3002",paraId:0,tocIndex:0},{value:`yarn add @quiet-front-end/json-schema-editor-antd
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"\u53C2\u6570\u540D\u79F0",paraId:6,tocIndex:2},{value:"\u63CF\u8FF0",paraId:6,tocIndex:2},{value:"\u7C7B\u578B",paraId:6,tocIndex:2},{value:"\u9ED8\u8BA4\u503C",paraId:6,tocIndex:2},{value:"onChange",paraId:6,tocIndex:2},{value:"JsonSchema \u53D8\u66F4\u7684\u56DE\u8C03",paraId:6,tocIndex:2},{value:"(schema: JSONSchema7) => void",paraId:6,tocIndex:2},{value:"-",paraId:6,tocIndex:2},{value:"data",paraId:6,tocIndex:2},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E",paraId:6,tocIndex:2},{value:"JSONSchema7 | string | undefined",paraId:6,tocIndex:2},{value:'{"type": "object", "properties": {"field": {"type": "string"}}}',paraId:6,tocIndex:2}]},49832:function(){}}]);
