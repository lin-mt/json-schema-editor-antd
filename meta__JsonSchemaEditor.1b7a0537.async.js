(self.webpackChunk_quiet_front_end_json_schema_editor_antd=self.webpackChunk_quiet_front_end_json_schema_editor_antd||[]).push([[593],{77102:function(Te,ne,r){"use strict";r.r(ne),r.d(ne,{demos:function(){return c}});var Me=r(15009),w=r.n(Me),be=r(99289),x=r.n(be),se=r(67294),We=r(57396),Q=r(50033),c={"jsonschemaeditor-demo-0":{component:se.memo(se.lazy(x()(w()().mark(function ye(){var O,me;return w()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,Promise.resolve().then(r.bind(r,50033));case 2:return O=X.sent,me=O.JsonSchemaEditor,X.abrupt("return",{default:function(){return se.createElement(me,null)}});case 5:case"end":return X.stop()}},ye)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@quiet-front-end/json-schema-editor-antd';

export default () => <JsonSchemaEditor />;`},"@quiet-front-end/json-schema-editor-antd":{type:"NPM",value:"1.0.9"}},entry:"index.jsx"},context:{"@quiet-front-end/json-schema-editor-antd":Q},renderOpts:{compile:function(){var ye=x()(w()().mark(function me(){var je,X=arguments;return w()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,r.e(335).then(r.bind(r,37335));case 2:return re.abrupt("return",(je=re.sent).default.apply(je,X));case 3:case"end":return re.stop()}},me)}));function O(){return ye.apply(this,arguments)}return O}()}}}},50033:function(Te,ne,r){"use strict";r.r(ne),r.d(ne,{JsonSchemaEditor:function(){return Ot},registerLocale:function(){return qe}});var Me=r(52677),w=r.n(Me),be=r(5574),x=r.n(be),se=r(68872),We=r(96486),Q=r.n(We),c=r(67294),ye=r(97857),O=r.n(ye),me=r(39398),je=r(14313),X=r(42952),Ze=r(24969),re=r(57546),$e=r(48689),we=r(13769),Ge=r.n(we),Ae=r(9361),J=r(23323),Ve=r(75027),L=r(71230),m=r(15746),fe=r(56846),Y=r(24435),Fe=r(21628),Qe=r(41637),ie=r(92797),Xe=r(28459),Ye={"en-us":{PropertyPlaceholder:"Please input the property name",PropertyNameEmptyWarnMsg:"Property name cannot be empty",TitlePlaceholder:"Please input the title",DescriptionPlaceholder:"Please input the description",AdvancedSettings:"Advanced Settings",SiblingNodes:"Sibling Nodes",ChildNodes:"Child Nodes",AddNode:"Add Node",ImportJson:"Import JSON",DeleteNode:"Delete Node",Import:"Import",ImportEmptyJsonWarnMsg:"Please input the JSON data to import",ImportNotJsonWarnMsg:"The imported content is not in JSON format",ImportErrorContentWarnMsg:"The imported content is incorrect, please check and try again",BasicSettings:"Basic Settings",DefaultValue:"Default Value",DefaultValuePlaceholder:"Please input the default value",SelectDefaultValuePlaceholder:"Please select the default value",MinimumLength:"Minimum Length",MinimumLengthPlaceholder:"Please input the minimum length",MaximumLength:"Maximum Length",MaximumLengthPlaceholder:"Please input the maximum length",Minimum:"Minimum Value",MinimumPlaceholder:"Please input the minimum value",Maximum:"Maximum Value",MaximumPlaceholder:"Please input the maximum value",ExclusiveMinimum:"Exclusive Minimum",ExclusiveMinimumPlaceholder:"Please input the exclusive minimum value",ExclusiveMaximum:"Exclusive Maximum",ExclusiveMaximumPlaceholder:"Please input the exclusive maximum value",RegularMatch:"Regular Expression",RegularMatchPlaceholder:"Please input a regular expression",Format:"Format",FormatPlaceholder:"Please select a string format",UniqueItems:"Unique Items",MinItems:"Minimum Number of Items",MinItemsPlaceholder:"Please input the minimum number of items",MaxItems:"Maximum Number of Items",MaxItemsPlaceholder:"Please input the maximum number of items",Enums:"Enumerations",EnumsPlaceholder:"Please input enumeration values",AddEnums:"Add Enumeration"},"zh-cn":{PropertyPlaceholder:"\u8BF7\u8F93\u5165\u5C5E\u6027\u540D\u79F0",PropertyNameEmptyWarnMsg:"\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",TitlePlaceholder:"\u8BF7\u8F93\u5165\u6807\u9898",DescriptionPlaceholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0\u4FE1\u606F",AdvancedSettings:"\u9AD8\u7EA7\u8BBE\u7F6E",SiblingNodes:"\u540C\u7EA7\u8282\u70B9",ChildNodes:"\u5B50\u7EA7\u8282\u70B9",AddNode:"\u6DFB\u52A0\u8282\u70B9",ImportJson:"\u5BFC\u5165Json",DeleteNode:"\u5220\u9664\u8282\u70B9",Import:"\u5BFC\u5165",ImportEmptyJsonWarnMsg:"\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E",ImportNotJsonWarnMsg:"\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E",ImportErrorContentWarnMsg:"\u5BFC\u5165\u7684\u5185\u5BB9\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u540E\u91CD\u65B0\u5BFC\u5165",BasicSettings:"\u57FA\u672C\u8BBE\u7F6E",DefaultValue:"\u9ED8\u8BA4\u503C",DefaultValuePlaceholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C",SelectDefaultValuePlaceholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",MinimumLength:"\u6700\u5C0F\u957F\u5EA6",MinimumLengthPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6",MaximumLength:"\u6700\u5927\u957F\u5EA6",MaximumLengthPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6",Minimum:"\u6700\u5C0F\u503C",MinimumPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C",Maximum:"\u6700\u5927\u503C",MaximumPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C",ExclusiveMinimum:"\u6392\u4ED6\u6700\u5C0F\u503C",ExclusiveMinimumPlaceholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C",ExclusiveMaximum:"\u6392\u4ED6\u6700\u5927\u503C",ExclusiveMaximumPlaceholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C",RegularMatch:"\u6B63\u5219\u5339\u914D",RegularMatchPlaceholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F",Format:"\u683C\u5F0F",FormatPlaceholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",UniqueItems:"\u5143\u7D20\u552F\u4E00",MinItems:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570",MinItemsPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570",MaxItems:"\u6700\u591A\u5143\u7D20\u4E2A\u6570",MaxItemsPlaceholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570",Enums:"\u679A\u4E3E",EnumsPlaceholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C",AddEnums:"\u6DFB\u52A0\u679A\u4E3E"}},De={},qe=function(n,i){De[n]=O()(O()({},De[n]||{}),i)},Ne=function(){var n,i=(0,c.useContext)(Xe.ZP.ConfigContext),y=(i==null||(n=i.locale)===null||n===void 0?void 0:n.locale)||"en-us",f=O()(O()({},Ye[y]),De[y]),u=function(a){return f[a]||a};return{locale:y,t:u}},_e=r(63764),et={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=r(85893),tt=function(n){var i=n.width,y=n.lineNumbers,f=y===void 0?"on":y,u=n.height,Z=n.value,a=n.folding,E=a===void 0?!0:a,s=n.language,D=n.readOnly,C=D===void 0?!1:D,k=n.renderLineHighlight,$=k===void 0?"all":k,B=n.onChange,M=Ae.Z.useToken(),V=M.token;function q(H){H.editor.defineTheme("x-code-default",et)}return(0,e.jsx)("div",{style:{border:"1px solid ".concat(V.colorBorder),width:i||"100%"},children:(0,e.jsx)(_e.ZP,{height:u,width:i,value:Z,language:s,onChange:B,onMount:n.handleEditorDidMount,beforeMount:q,theme:"x-code-default",options:{readOnly:C,lineNumbers:f,renderLineHighlight:$,folding:E,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:9,horizontalScrollbarSize:9},minimap:{enabled:!1}}})})},Ke=tt,nt=r(15009),Oe=r.n(nt),rt=r(99289),Ue=r.n(rt),at=r(64599),ot=r.n(at),st=r(65009),it=r.n(st);function le(t,n){if(t.$ref){var i=t.$ref;if(i.startsWith("#/")){var y=i.slice(2).split("/"),f=Q().cloneDeep(n),u=ot()(y),Z;try{for(u.s();!(Z=u.n()).done;){var a=Z.value;if(f[a])f=f[a];else throw new Error("Unable to resolve $ref: ".concat(i))}}catch(s){u.e(s)}finally{u.f()}return f}else throw new Error("Unsupported $ref format: ".concat(i))}if(t.properties)for(var E in t.properties)t.properties[E]&&(t.properties[E]=le(t.properties[E],n));return t.items&&(Array.isArray(t.items)?t.items=t.items.map(function(s){return le(s,n)}):t.items=le(t.items,n)),t.oneOf&&(t.oneOf=t.oneOf.map(function(s){return le(s,n)})),t.anyOf&&(t.anyOf=t.anyOf.map(function(s){return le(s,n)})),t.allOf&&(t.allOf=t.allOf.map(function(s){return le(s,n)})),t}function ue(t){var n;if(t.$ref){var i=t.$ref;if(i.startsWith("#/")){var y=i.slice(2).split("/");return y[0]}if(t.properties){for(var f in t.properties)if(t.properties[f]&&(n=ue(t.properties[f]),n))return n}}if(t.items){if(Array.isArray(t.items))for(var u=0;u<t.items.length;u++){var Z=t.items[u];if(n=ue(Z),n)return n}else if(n=ue(t.items),n)return n}if(t.oneOf)for(var a=0;a<t.oneOf.length;a++){var E=t.oneOf[a];if(n=ue(E),n)return n}if(t.anyOf)for(var s=0;s<t.anyOf.length;s++){var D=t.anyOf[s];if(n=ue(D),n)return n}if(t.allOf)for(var C=0;C<t.allOf.length;C++){var k=t.allOf[C];if(n=ue(k),n)return n}}function lt(t){return Je.apply(this,arguments)}function Je(){return Je=Ue()(Oe()().mark(function t(n){var i,y;return Oe()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,it().dereference(n,{mutateInputSchema:!1,dereference:{circular:"ignore"}});case 2:if(i=u.sent,y=ue(i),!y){u.next=6;break}return u.abrupt("return",le(i,i));case 6:return u.abrupt("return",i);case 7:case"end":return u.stop()}},t)})),Je.apply(this,arguments)}function ut(t){if(typeof t=="string"){var n=t.trim();if(n.startsWith("{")&&n.endsWith("}"))try{return JSON.parse(n)}catch(i){return}}}var ze=["string","number","array","object","boolean","integer"];function Se(t,n){if(t===null||w()(t)!=="object")return console.error("The provided value is not an object."),-1;var i=Object.keys(t);return i.indexOf(n)}function dt(t,n){if(n.length===0)return t;for(var i=t,y=0;y<n.length;y++){var f=Object.keys(i)[n[y]];if(f===void 0)return;i=i[f]}return i}var ct=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],mt=ze.map(function(t){return{value:t}});function He(t){switch(t){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var ft=function(n){var i=function(u){return Array.isArray(u)?"array":u===null?"null":w()(u)},y=function f(u){var Z=i(u);switch(Z){case"object":{var a={};for(var E in u)u.hasOwnProperty(E)&&(a[E]=f(u[E]));return{type:"object",properties:a,required:Object.keys(u)}}case"array":return{type:"array",items:u.length?f(u[0]):{}};default:return{type:Z}}};return y(n)},ht=["key","name"],vt=function(t){var n=t.schema,i=t.open,y=i===void 0?!1:i,f=t.onOk,u=t.onCancel,Z=Ne(),a=Z.t,E=Ae.Z.useToken(),s=E.token,D=J.Z.useForm(),C=x()(D,1),k=C[0],$=(0,c.useState)(),B=x()($,2),M=B[0],V=B[1],q=(0,c.useState)(!1),H=x()(q,2),v=H[0],te=H[1],d=(0,c.useState)(!1),p=x()(d,2),o=p[0],g=p[1],P=(0,c.useState)(!1),l=x()(P,2),j=l[0],A=l[1],R=(0,c.useState)(!1),T=x()(R,2),K=T[0],W=T[1],he=(0,c.useState)(!1),I=x()(he,2),U=I[0],ae=I[1],_=(0,c.useState)(!1),ee=x()(_,2),b=ee[0],ke=ee[1],Be=(0,c.useState)(!1),Ie=x()(Be,2),G=Ie[0],Re=Ie[1],ve=(0,c.useRef)(null);(0,c.useEffect)(function(){V(n)},[n]),(0,c.useEffect)(function(){te(y)},[y]);var ge=(0,c.useCallback)(Q().debounce(function(N){typeof N=="function"?N():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,c.useEffect)(function(){return function(){ge.cancel()}},[ge]),(0,c.useEffect)(function(){!v||!M||(k.setFieldsValue(M),g(M.type==="object"),A(M.type==="array"),W(M.type==="number"),ae(M.type==="boolean"),ke(M.type==="integer"),Re(M.type==="string"))},[v,M]);function Ce(N){ve.current=N,ve.current.setValue(JSON.stringify(n,null,2))}function de(){u&&u(),te(!1)}return(0,e.jsx)(Ve.Z,{title:a("AdvancedSettings"),width:900,open:v,onOk:function(){k.validateFields().then(function(h){return f&&f(O()(O()({},M),h))}).catch(function(h){console.log("Failed:",h)}).finally(function(){return de()})},onCancel:de,children:(0,e.jsxs)(J.Z,{form:k,onValuesChange:function(h,oe){ve.current&&ve.current.setValue(JSON.stringify(O()(O()({},M),oe),null,2))},children:[!o&&ze.indexOf(M==null?void 0:M.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(s.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:a("BasicSettings")}),(G||K||b||U)&&(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("DefaultValue"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsxs)(J.Z.Item,{noStyle:!0,name:"default",children:[G&&(0,e.jsx)(fe.Z,{style:{width:"100%"},placeholder:a("DefaultValuePlaceholder")}),(K||b)&&(0,e.jsx)(Y.Z,{style:{width:"100%"},placeholder:a("DefaultValuePlaceholder")}),U&&(0,e.jsx)(Fe.Z,{style:{width:"100%"},placeholder:a("SelectDefaultValuePlaceholder"),options:[{value:!0,label:"true"},{value:!1,label:"false"}]})]})})]}),G&&(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("MinimumLength"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"minLength",children:(0,e.jsx)(Y.Z,{min:0,style:{width:"100%"},parser:function(h){return h?parseInt(h.replace(/\D/g,""),10):""},formatter:function(h){return h?"".concat(Math.floor(Math.max(h,0))):""},placeholder:a("MinimumLengthPlaceholder")})})}),(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("MaximumLength"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"maxLength",children:(0,e.jsx)(Y.Z,{min:0,style:{width:"100%"},parser:function(h){return h?parseInt(h.replace(/\D/g,""),10):""},formatter:function(h){return h?"".concat(Math.floor(Math.max(h,0))):""},placeholder:a("MaximumLengthPlaceholder")})})})]}),(K||b)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("Minimum"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"minimum",children:(0,e.jsx)(Y.Z,{style:{width:"100%"},placeholder:a("MinimumPlaceholder")})})}),(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("Maximum"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"maximum",children:(0,e.jsx)(Y.Z,{style:{width:"100%"},placeholder:a("MaximumPlaceholder")})})})]}),(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("ExclusiveMinimum"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"exclusiveMinimum",children:(0,e.jsx)(Y.Z,{style:{width:"100%"},placeholder:a("ExclusiveMinimumPlaceholder")})})}),(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("ExclusiveMaximum"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"exclusiveMaximum",children:(0,e.jsx)(Y.Z,{style:{width:"100%"},placeholder:a("ExclusiveMaximumPlaceholder")})})})]})]}),G&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("RegularMatch"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:20,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"pattern",children:(0,e.jsx)(fe.Z,{placeholder:a("RegularMatchPlaceholder")})})})]}),(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("Format"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"format",children:(0,e.jsx)(Fe.Z,{allowClear:!0,options:ct,placeholder:a("FormatPlaceholder"),style:{width:"100%"}})})})]})]}),j&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("UniqueItems"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:20,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"uniqueItems",valuePropName:"checked",children:(0,e.jsx)(Qe.Z,{})})})]}),(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("MinItems"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"minItems",children:(0,e.jsx)(Y.Z,{style:{width:"100%"},parser:function(h){return h?parseInt(h.replace(/\D/g,""),10):""},formatter:function(h){return h?"".concat(Math.floor(Math.max(h,0))):""},placeholder:a("MinItemsPlaceholder")})})}),(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("MaxItems"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"maxItems",children:(0,e.jsx)(Y.Z,{style:{width:"100%"},parser:function(h){return h?parseInt(h.replace(/\D/g,""),10):""},formatter:function(h){return h?"".concat(Math.floor(Math.max(h,0))):""},placeholder:a("MaxItemsPlaceholder")})})})]})]}),(G||K||b)&&(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("Enums"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:20,children:(0,e.jsx)(J.Z.List,{name:"enums",children:function(h,oe){var pe=oe.add,z=oe.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(L.Z,{gutter:6,children:h.map(function(ce){var Pe=ce.key,xe=ce.name,S=Ge()(ce,ht);return(0,e.jsx)(m.Z,{span:12,children:(0,e.jsxs)(L.Z,{gutter:2,justify:"start",align:"middle",style:{marginBottom:6},children:[(0,e.jsx)(m.Z,{flex:"auto",children:(0,e.jsxs)(J.Z.Item,O()(O()({},S),{},{noStyle:!0,name:[xe],rules:[{required:!0}],children:[G&&(0,e.jsx)(fe.Z,{placeholder:a("EnumsPlaceholder")}),(K||b)&&(0,e.jsx)(Y.Z,{style:{width:"100%"},placeholder:a("EnumsPlaceholder")})]}))}),(0,e.jsx)(m.Z,{flex:"24px",children:(0,e.jsx)(ie.ZP,{icon:(0,e.jsx)($e.Z,{}),size:"small",type:"text",danger:!0,onClick:function(){return z(xe)}})})]})},Pe)})}),(0,e.jsx)(L.Z,{children:(0,e.jsx)(m.Z,{span:6,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,children:(0,e.jsx)(ie.ZP,{onClick:function(){return pe()},block:!0,icon:(0,e.jsx)(Ze.Z,{}),children:a("AddEnums")})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(s.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)(Ke,{height:300,language:"json",value:JSON.stringify(M,null,2),handleEditorDidMount:Ce,onChange:function(h){ge(function(){if(h)try{var oe=JSON.parse(h);V(oe)}catch(pe){}})}})]})})},gt=r(1581),pt=r.n(gt),xt=r(78045),yt=r(79443),jt=function(n){var i=n.open,y=n.onOk,f=n.onCancel,u=Ne(),Z=u.t,a=se.ZP.useMessage(),E=x()(a,2),s=E[0],D=E[1],C=(0,c.useState)(),k=x()(C,2),$=k[0],B=k[1],M=(0,c.useState)(),V=x()(M,2),q=V[0],H=V[1],v=(0,c.useState)("json"),te=x()(v,2),d=te[0],p=te[1],o=(0,c.useRef)(null);function g(l){o.current=l}(0,c.useEffect)(function(){H(i)},[i]);function P(){var l;H(!1),B(void 0),(l=o.current)===null||l===void 0||l.setValue(""),f&&f()}return(0,e.jsxs)(e.Fragment,{children:[D,(0,e.jsxs)(Ve.Z,{title:Z("Import"),width:900,open:q,onOk:Ue()(Oe()().mark(function l(){var j,A,R,T,K,W;return Oe()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(!$||$.length===0)){I.next=3;break}return s.warning(Z("ImportEmptyJsonWarnMsg")),I.abrupt("return");case 3:if(j=ut($),j){I.next=7;break}return s.warning(Z("ImportNotJsonWarnMsg")),I.abrupt("return");case 7:I.t0=d,I.next=I.t0==="json"?10:I.t0==="json-schema"?12:16;break;case 10:return A=new yt.NL().createSchemaOf(j),I.abrupt("break",16);case 12:return I.next=14,lt(j);case 14:return A=I.sent,I.abrupt("break",16);case 16:if(A){I.next=21;break}return s.warning(Z("ImportErrorContentWarnMsg")),I.abrupt("return");case 21:if(R=new(pt())({allErrors:!0}),T=R.getSchema("http://json-schema.org/draft-07/schema#"),!(T&&!T(A))){I.next=27;break}return W=(K=T.errors)===null||K===void 0?void 0:K.map(function(U,ae){var _=U.instancePath.split("/").pop()||"root",ee="".concat(_," ").concat(U.message);return(0,e.jsx)("div",{children:'Error in field "'.concat(_,'": ').concat(ee)},ae)}),((W==null?void 0:W.length)||0)>0&&s.error({content:(0,e.jsx)("div",{children:W})}),I.abrupt("return");case 27:y&&y(A),P();case 29:case"end":return I.stop()}},l)})),onCancel:P,children:[(0,e.jsx)(L.Z,{style:{marginBottom:16},children:(0,e.jsx)(xt.ZP.Group,{value:d,optionType:"button",buttonStyle:"solid",onChange:function(j){return p(j.target.value)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(L.Z,{children:(0,e.jsx)(Ke,{height:390,language:"json",handleEditorDidMount:g,onChange:function(j){return B(j)}})})]})]})},St=jt,It=r(56616),Ee=r(61865),Pt=r(65695);function Le(t){var n=Ae.Z.useToken(),i=n.token,y=Ne(),f=y.t,u=se.ZP.useMessage(),Z=x()(u,2),a=Z[0],E=Z[1],s=t.changeSchema,D=t.renameProperty,C=t.isArrayItems,k=t.updateRequiredProperty,$=t.removeProperty,B=t.addProperty,M=t.isRequire,V=t.handleAdvancedSettingClick,q=(0,c.useState)(t.schema),H=x()(q,2),v=H[0],te=H[1],d=(0,c.useState)(t.propertyName),p=x()(d,2),o=p[0],g=p[1],P=(0,c.useState)(v.title),l=x()(P,2),j=l[0],A=l[1],R=(0,c.useState)(v.description),T=x()(R,2),K=T[0],W=T[1],he=(0,c.useState)(t.nodeDepth?t.nodeDepth:0),I=x()(he,2),U=I[0],ae=I[1],_=(0,c.useState)(t.namePath?t.namePath:[]),ee=x()(_,2),b=ee[0],ke=ee[1],Be=(0,c.useState)(!0),Ie=x()(Be,2),G=Ie[0],Re=Ie[1],ve=(0,c.useState)(!1),ge=x()(ve,2),Ce=ge[0],de=ge[1],N=(0,c.useState)(!1),h=x()(N,2),oe=h[0],pe=h[1],z=typeof o=="undefined";(0,c.useEffect)(function(){te(t.schema)},[t.schema]),(0,c.useEffect)(function(){ke(t.namePath?t.namePath:[])},[t.namePath]),(0,c.useEffect)(function(){ae(t.nodeDepth?t.nodeDepth:0)},[t.nodeDepth]);var ce=(0,c.useCallback)(Q().debounce(function(S){typeof S=="function"?S():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,c.useEffect)(function(){return function(){ce.cancel()}},[ce]);var Pe=v.items,xe=!!(v.type==="object"||C&&(Pe==null?void 0:Pe.type)==="object")&&!C&&!z;return v.type?(0,e.jsxs)(e.Fragment,{children:[E,(0,e.jsxs)(L.Z,{align:"middle",style:{paddingBottom:10},children:[(0,e.jsx)(m.Z,{flex:"".concat(24+U*17,"px"),style:{marginLeft:U*5},children:(0,e.jsx)(L.Z,{justify:"end",children:v.type==="object"&&(0,e.jsx)(ie.ZP,{type:"text",size:"small",icon:G?(0,e.jsx)(me.Z,{}):(0,e.jsx)(je.Z,{}),onClick:function(){return Re(!G)}})})}),(0,e.jsx)(m.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(fe.Z,{status:!z&&o.length===0?"error":void 0,disabled:z||C,value:z?"root":o,placeholder:f("PropertyPlaceholder"),onBlur:function(){if((o==null?void 0:o.length)===0){a.warning(f("PropertyNameEmptyWarnMsg")).then();return}D&&o&&(o==null?void 0:o.length)!==0&&D(b,o)},onChange:function(F){return g(F.target.value)}})}),(0,e.jsx)(m.Z,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(It.Z,{disabled:C||z,checked:M,onChange:function(F){k&&o&&k(b,!F.target.checked)}})}),(0,e.jsx)(m.Z,{flex:"95px",style:{marginLeft:5},children:(0,e.jsx)(Fe.Z,{style:{width:"95px"},value:v.type,options:mt,onChange:function(F){s&&s(b,He(F),"type")}})}),(0,e.jsx)(m.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(fe.Z,{placeholder:f("TitlePlaceholder"),value:j,onBlur:function(){s&&s(b.concat(Se(v,"title")),j,"title")},onChange:function(F){return A(F.target.value)}})}),(0,e.jsx)(m.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(fe.Z,{placeholder:f("DescriptionPlaceholder"),value:K,onBlur:function(){s&&s(b.concat(Se(v,"description")),K,"description")},onChange:function(F){return W(F.target.value)}})}),(0,e.jsx)(m.Z,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(L.Z,{style:{width:"72px"},children:[(0,e.jsx)(Ee.Z,{title:f("AdvancedSettings"),children:(0,e.jsx)(ie.ZP,{type:"text",size:"small",icon:(0,e.jsx)(X.Z,{}),style:{color:"green"},onClick:function(){V&&!V(b,v,z||v.type==="object"?void 0:o)||de(!Ce)}})}),!z&&!C||v.type==="object"?(0,e.jsx)(Pt.Z,{disabled:!xe,placement:"bottom",menu:{items:[{key:"addNode",label:f("SiblingNodes"),onClick:function(){B&&B(b,!1)}},{key:"addChildNode",label:f("ChildNodes"),onClick:function(){B&&B(b,!0)}}]},children:(0,e.jsx)(Ee.Z,{title:!xe&&f("AddNode"),children:(0,e.jsx)(ie.ZP,{type:"text",size:"small",icon:(0,e.jsx)(Ze.Z,{}),style:{color:i.colorPrimary},onClick:function(){xe||B&&B(b,!(!C&&!z))}})})}):(0,e.jsx)("div",{style:{width:"24px"}}),(0,e.jsx)(m.Z,{flex:"24px",children:z?(0,e.jsx)(Ee.Z,{title:f("ImportJson"),children:(0,e.jsx)(ie.ZP,{type:"text",size:"small",icon:(0,e.jsx)(re.Z,{}),style:{color:"purple"},onClick:function(){return pe(!0)}})}):C?(0,e.jsx)("div",{style:{width:"24px"}}):(0,e.jsx)(Ee.Z,{title:f("DeleteNode"),children:(0,e.jsx)(ie.ZP,{danger:!0,type:"text",size:"small",icon:(0,e.jsx)($e.Z,{}),onClick:function(){$&&$(b)}})})}),z&&v.type!=="object"&&(0,e.jsx)(m.Z,{flex:"24px",children:!C&&(0,e.jsx)("div",{style:{width:"24px"}})})]})})]}),v.type==="object"&&G&&v.properties&&Object.keys(v.properties).map(function(S){if(v.properties){var F;return(0,e.jsx)("div",{children:(0,e.jsx)(Le,O()(O()({},t),{},{isRequire:(F=v.required)===null||F===void 0?void 0:F.includes(S),isArrayItems:!1,nodeDepth:U+1,namePath:b.concat(Se(v,"properties"),Se(v.properties,S)),propertyName:S,schema:v.properties[S],handleAdvancedSettingClick:V}))},String(S))}return(0,e.jsx)(e.Fragment,{})}),v.type==="array"&&G&&(0,e.jsx)(Le,O()(O()({},t),{},{isRequire:!1,isArrayItems:!0,nodeDepth:U+1,propertyName:"items",namePath:b.concat(Se(v,"items")),schema:v.items,handleAdvancedSettingClick:V})),(0,e.jsx)(vt,{schema:v,open:Ce,onOk:function(F){if(s){if(z||v.type==="object"){s(b,O()({},F)),de(!1);return}s(b,O()({},F),o),de(!1)}},onCancel:function(){return de(!1)}}),(0,e.jsx)(St,{open:oe,onOk:function(F){s&&(s([],F),pe(!1))},onCancel:function(){return pe(!1)}})]}):(0,e.jsx)(e.Fragment,{})}var Mt=Le,Zt=(0,c.forwardRef)(function(t,n){var i=se.ZP.useMessage(),y=x()(i,2),f=y[0],u=y[1];function Z(d){var p={type:"object",properties:{field:{type:"string"}}};if(!d)return p;switch(w()(d)){case"string":try{return ft(JSON.parse(d))}catch(o){return f.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),p}case"object":return d}}var a=(0,c.useState)(Z(t.data)),E=x()(a,2),s=E[0],D=E[1],C=(0,c.useState)(0),k=x()(C,2),$=k[0],B=k[1];(0,c.useEffect)(function(){t.onSchemaChange&&t.onSchemaChange(s)},[s]);var M=function(p,o,g){if(p.length===0){D(o);return}for(var P=Q().cloneDeep(s),l=P,j=0;j<p.length-1;j++){var A=Object.keys(l)[p[j]];l[A]||(l[A]={}),l=l[A]}var R=p[p.length-1],T=Object.keys(l)[R];if(R===-1){if(typeof o=="undefined"||!g)return;l[g]=o}else{if(l[T]===o)return;l[T]=o}D(P)};function V(d,p){for(var o=Q().cloneDeep(s),g=o,P=null,l="",j=0;j<d.length-1;j++){var A=Object.keys(g),R=void 0;if(typeof d[j]=="number"?R=d[j]:R=A.indexOf(String(d[j])),R<0||R>=A.length){console.error("Path not found: ".concat(d.slice(0,j+1).join(".")));return}P=g,l=A[R],g=g[l]}var T=d[d.length-1],K=Object.keys(g),W=K[T];if(W!==p){if(g.hasOwnProperty(W))P[l]=Object.fromEntries(Object.entries(g).map(function(he){var I=x()(he,2),U=I[0],ae=I[1];if(U===W){var _=P.required;if(_){var ee=_.indexOf(W);ee>=0&&_.splice(ee,1,p)}return[p,ae]}return[U,ae]}));else{console.error("Key not found: ".concat(W));return}D(o)}}function q(d,p,o){d.required||(d.required=[]);var g=d.required.indexOf(p);o?g!==-1&&d.required.splice(g,1):g===-1&&d.required.push(p),d.required.length===0&&delete d.required}function H(d,p){if(d.length<2){console.error("\u8DEF\u5F84\u957F\u5EA6\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u66F4\u65B0\u5FC5\u9009\u5C5E\u6027");return}var o=Q().cloneDeep(s),g=d.slice(0,-2),P=d[d.length-1],l=dt(o,g);if(!l||!l.properties){console.error("\u65E0\u6CD5\u627E\u5230\u5FC5\u9009\u5C5E\u6027\u7684\u7236\u5BF9\u8C61",l);return}var j=Object.keys(l.properties);if(P<0||P>=j.length){console.error("\u5C5E\u6027\u7D22\u5F15\u8D85\u51FA\u8303\u56F4",P);return}var A=j[P];q(l,A,p),D(o)}function v(d){for(var p=Q().cloneDeep(s),o=p,g=p,P=0;P<d.length-1;P++)if(o!=null)g=o,o=o[Object.keys(o)[d[P]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",d);return}var l=Object.keys(o)[d[d.length-1]];q(g,l,!0),o&&w()(o)==="object"&&o.hasOwnProperty(l)&&delete o[l],D(p)}function te(d,p){for(var o=Q().cloneDeep(s),g=o,P=0;P<d.length-(p?0:1);P++){var l=Object.keys(g)[d[P]];g[l]||(g[l]={}),g=g[l]}var j=He("string");p?g.properties["field_".concat($)]=j:g["field_".concat($)]=j,B($+1),D(o)}return(0,c.useImperativeHandle)(n,function(){return{changeSchema:M}}),(0,e.jsxs)("div",{style:{paddingTop:"10px 10px 0 10px"},children:[u,(0,e.jsx)(Mt,{schema:s,changeSchema:M,renameProperty:V,removeProperty:v,addProperty:te,updateRequiredProperty:H,handleAdvancedSettingClick:t.handleAdvancedSettingClick})]})}),Ot=Zt},71860:function(Te,ne,r){"use strict";r.r(ne),r.d(ne,{texts:function(){return w}});var Me=r(57396);const w=[{value:"1.x.x \u7248\u672C\u7684\u4EE3\u7801\u5DF2\u5B8C\u5168\u91CD\u6784\u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:` UI \u5E03\u5C40\u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528
`,paraId:0,tocIndex:0},{value:"0.x.x",paraId:0,tocIndex:0},{value:" \u7248\u672C\u3002",paraId:0,tocIndex:0},{value:`yarn add @quiet-front-end/json-schema-editor-antd
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"JsonSchema \u53D8\u66F4\u7684\u56DE\u8C03\u3002",paraId:6,tocIndex:3},{value:"\u7C7B\u578B\uFF1A",paraId:7,tocIndex:3},{value:"(schema: JSONSchema7) => void",paraId:7,tocIndex:3},{value:"\u9ED8\u8BA4\u503C\uFF1A ",paraId:8,tocIndex:3},{value:"-",paraId:8,tocIndex:3},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E\u3002",paraId:9,tocIndex:4},{value:"\u7C7B\u578B\uFF1A",paraId:10,tocIndex:4},{value:"JSONSchema7 | string | undefined",paraId:10,tocIndex:4},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:11,tocIndex:4},{value:`{
  "type": "object",
  "properties": {
    "field": {
      "type": "string"
    }
  }
}
`,paraId:12,tocIndex:4},{value:"\u70B9\u51FB",paraId:13,tocIndex:5},{value:"\u9AD8\u7EA7\u8BBE\u7F6E",paraId:13,tocIndex:5},{value:"\u6309\u94AE\u7684\u56DE\u8C03\uFF0C\u8FD4\u56DE",paraId:13,tocIndex:5},{value:"false",paraId:13,tocIndex:5},{value:"\uFF1A\u4E0D\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\uFF0C\u8FD4\u56DE",paraId:13,tocIndex:5},{value:"true",paraId:13,tocIndex:5},{value:"\uFF1A\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\u3002",paraId:13,tocIndex:5},{value:"\u7C7B\u578B\uFF1A",paraId:14,tocIndex:5},{value:"(namePath: number[], schema: JSONSchema7, propertyName?: string) => boolean",paraId:14,tocIndex:5},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:15,tocIndex:5},{value:"-",paraId:15,tocIndex:5},{value:"\u8BF4\u660E\uFF1A\u53EF\u4EE5\u7ED3\u5408",paraId:16,tocIndex:5},{value:"\u7EC4\u4EF6\u5F15\u7528",paraId:16,tocIndex:5},{value:"\u5B9E\u73B0\u70B9\u51FB\u9AD8\u7EA7\u8BBE\u7F6E\u6309\u94AE\u540E\u83B7\u53D6\u8DEF\u5F84\u4E0B\u7684 JsonSchema\uFF0C\u6DFB\u52A0\u3001\u4FEE\u6539\u81EA\u5B9A\u4E49\u5B57\u6BB5\u7B49\uFF0C\u7136\u540E\u4FEE\u6539\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema\u3002",paraId:16,tocIndex:5},{value:`export interface JsonSchemaEditorHandle {
  /* \u66F4\u65B0\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema */
  changeSchema: (namePath: number[], value: any, propertyName?: string) => void;
}
`,paraId:17,tocIndex:6}]},49832:function(){}}]);
