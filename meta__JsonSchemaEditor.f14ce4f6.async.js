(self.webpackChunk_quiet_front_end_json_schema_editor_antd=self.webpackChunk_quiet_front_end_json_schema_editor_antd||[]).push([[593],{77102:function(Te,z,n){"use strict";n.r(z),n.d(z,{demos:function(){return c}});var fe=n(15009),J=n.n(fe),Se=n(99289),v=n.n(Se),Y=n(67294),Le=n(57396),W=n(56506),c={"jsonschemaeditor-demo-0":{component:Y.memo(Y.lazy(v()(J()().mark(function se(){var K,q;return J()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,Promise.resolve().then(n.bind(n,56506));case 2:return K=L.sent,q=K.JsonSchemaEditor,L.abrupt("return",{default:function(){return Y.createElement(q,null)}});case 5:case"end":return L.stop()}},se)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@quiet-front-end/json-schema-editor-antd';

export default () => <JsonSchemaEditor />;`},"@quiet-front-end/json-schema-editor-antd":{type:"NPM",value:"1.0.4"}},entry:"index.jsx"},context:{"@quiet-front-end/json-schema-editor-antd":W},renderOpts:{compile:function(){var se=v()(J()().mark(function q(){var _,L=arguments;return J()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,n.e(335).then(n.bind(n,37335));case 2:return H.abrupt("return",(_=H.sent).default.apply(_,L));case 3:case"end":return H.stop()}},q)}));function K(){return se.apply(this,arguments)}return K}()}}}},56506:function(Te,z,n){"use strict";n.r(z),n.d(z,{JsonSchemaEditor:function(){return kt}});var fe=n(52677),J=n.n(fe),Se=n(5574),v=n.n(Se),Y=n(68872),Le=n(96486),W=n.n(Le),c=n(67294),se=n(15009),K=n.n(se),q=n(99289),_=n.n(q),L=n(13769),Ie=n.n(L),H=n(97857),D=n.n(H),ct=n(39398),ft=n(14313),mt=n(42952),Re=n(24969),ht=n(57546),Ne=n(48689),$e=n(9361),Z=n(23323),C=n(71230),l=n(15746),V=n(92797),ee=n(56846),vt=n(56616),Ze=n(21628),me=n(61865),pt=n(65695),We=n(75027),R=n(24435),gt=n(41637),yt=n(78045),xt=n(79443),jt=n(63764),St={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=n(85893),It=function(o){var h=o.width,E=o.lineNumbers,S=E===void 0?"on":E,u=o.height,P=o.value,O=o.folding,I=O===void 0?!0:O,p=o.language,g=o.readOnly,N=g===void 0?!1:g,A=o.renderLineHighlight,U=A===void 0?"all":A,te=o.onChange,w=$e.Z.useToken(),ne=w.token;function k(le){le.editor.defineTheme("x-code-default",St)}return(0,e.jsx)("div",{style:{border:"1px solid ".concat(ne.colorBorder),width:h||"100%"},children:(0,e.jsx)(jt.ZP,{height:u,width:h,value:P,language:p,onChange:te,onMount:o.handleEditorDidMount,beforeMount:k,theme:"x-code-default",options:{readOnly:N,lineNumbers:S,renderLineHighlight:U,folding:I,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:9,horizontalScrollbarSize:9},minimap:{enabled:!1}}})})},Ke=It,Zt=n(64599),Ct=n.n(Zt),Ot=n(65009),Ft=n.n(Ot);function G(t,o){if(t.$ref){var h=t.$ref;if(h.startsWith("#/")){var E=h.slice(2).split("/"),S=W().cloneDeep(o),u=Ct()(E),P;try{for(u.s();!(P=u.n()).done;){var O=P.value;if(S[O])S=S[O];else throw new Error("Unable to resolve $ref: ".concat(h))}}catch(p){u.e(p)}finally{u.f()}return S}else throw new Error("Unsupported $ref format: ".concat(h))}if(t.properties)for(var I in t.properties)t.properties[I]&&(t.properties[I]=G(t.properties[I],o));return t.items&&(Array.isArray(t.items)?t.items=t.items.map(function(p){return G(p,o)}):t.items=G(t.items,o)),t.oneOf&&(t.oneOf=t.oneOf.map(function(p){return G(p,o)})),t.anyOf&&(t.anyOf=t.anyOf.map(function(p){return G(p,o)})),t.allOf&&(t.allOf=t.allOf.map(function(p){return G(p,o)})),t}function Q(t){var o;if(t.$ref){var h=t.$ref;if(h.startsWith("#/")){var E=h.slice(2).split("/");return E[0]}if(t.properties){for(var S in t.properties)if(t.properties[S]&&(o=Q(t.properties[S]),o))return o}}if(t.items){if(Array.isArray(t.items))for(var u=0;u<t.items.length;u++){var P=t.items[u];if(o=Q(P),o)return o}else if(o=Q(t.items),o)return o}if(t.oneOf)for(var O=0;O<t.oneOf.length;O++){var I=t.oneOf[O];if(o=Q(I),o)return o}if(t.anyOf)for(var p=0;p<t.anyOf.length;p++){var g=t.anyOf[p];if(o=Q(g),o)return o}if(t.allOf)for(var N=0;N<t.allOf.length;N++){var A=t.allOf[N];if(o=Q(A),o)return o}}function Et(t){return Ce.apply(this,arguments)}function Ce(){return Ce=_()(K()().mark(function t(o){var h,E;return K()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Ft().dereference(o,{mutateInputSchema:!1,dereference:{circular:"ignore"}});case 2:if(h=u.sent,E=Q(h),!E){u.next=6;break}return u.abrupt("return",G(h,h));case 6:return u.abrupt("return",h);case 7:case"end":return u.stop()}},t)})),Ce.apply(this,arguments)}function At(t){if(typeof t=="string"){var o=t.trim();if(o.startsWith("{")&&o.endsWith("}"))try{return JSON.parse(o)}catch(h){return}}}var ze=["string","number","array","object","boolean","integer"];function ie(t,o){if(t===null||J()(t)!=="object")return console.error("The provided value is not an object."),-1;var h=Object.keys(t);return h.indexOf(o)}var bt=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],Dt=ze.map(function(t){return{value:t}});function He(t){switch(t){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var Pt=function(o){var h=function(u){return Array.isArray(u)?"array":u===null?"null":J()(u)},E=function S(u){var P=h(u);switch(P){case"object":{var O={};for(var I in u)u.hasOwnProperty(I)&&(O[I]=S(u[I]));return{type:"object",properties:O,required:Object.keys(u)}}case"array":return{type:"array",items:u.length?S(u[0]):{}};default:return{type:P}}};return E(o)},Bt=["key","name"];function Oe(t){var o=$e.Z.useToken(),h=o.token,E=Z.Z.useForm(),S=v()(E,1),u=S[0],P=Y.ZP.useMessage(),O=v()(P,2),I=O[0],p=O[1],g=t.changeSchema,N=t.renameProperty,A=t.isArrayItems,U=t.updateRequiredProperty,te=t.parentSchemaDepth,w=te===void 0?0:te,ne=t.removeProperty,k=t.addProperty,le=t.isRequire,re=t.handleAdvancedSettingClick,Fe=(0,c.useState)(t.schema),d=v()(Fe,2),a=d[0],f=d[1],m=(0,c.useState)(),y=v()(m,2),i=y[0],x=y[1],B=(0,c.useState)(t.propertyName),T=v()(B,2),j=T[0],Ee=T[1],ae=(0,c.useState)(a.title),he=v()(ae,2),ue=he[0],ve=he[1],pe=(0,c.useState)(a.description),Ue=v()(pe,2),we=Ue[0],Tt=Ue[1],Lt=(0,c.useState)(t.nodeDepth?t.nodeDepth:0),Ve=v()(Lt,2),ge=Ve[0],Rt=Ve[1],Nt=(0,c.useState)(t.namePath?t.namePath:[]),Ge=v()(Nt,2),b=Ge[0],$t=Ge[1],Wt=(0,c.useState)(!0),Qe=v()(Wt,2),ye=Qe[0],Kt=Qe[1],zt=(0,c.useState)(!1),Xe=v()(zt,2),X=Xe[0],xe=Xe[1],Ht=(0,c.useState)(!1),Ye=v()(Ht,2),Ae=Ye[0],be=Ye[1],Ut=(0,c.useState)("json"),qe=v()(Ut,2),_e=qe[0],wt=qe[1],Vt=(0,c.useState)(),et=v()(Vt,2),De=et[0],tt=et[1],Gt=(0,c.useState)(!1),nt=v()(Gt,2),Qt=nt[0],Xt=nt[1],Yt=(0,c.useState)(!1),rt=v()(Yt,2),qt=rt[0],_t=rt[1],en=(0,c.useState)(!1),at=v()(en,2),de=at[0],tn=at[1],nn=(0,c.useState)(!1),ot=v()(nn,2),st=ot[0],rn=ot[1],an=(0,c.useState)(!1),it=v()(an,2),ce=it[0],on=it[1],sn=(0,c.useState)(!1),lt=v()(sn,2),oe=lt[0],ln=lt[1],Pe=(0,c.useRef)(null),M=typeof j=="undefined";(0,c.useEffect)(function(){f(t.schema)},[t.schema]),(0,c.useEffect)(function(){$t(t.namePath?t.namePath:[])},[t.namePath]),(0,c.useEffect)(function(){Rt(t.nodeDepth?t.nodeDepth:0)},[t.nodeDepth]);var Be=(0,c.useCallback)(W().debounce(function(s){typeof s=="function"?s():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,c.useEffect)(function(){return function(){Be.cancel()}},[Be]),(0,c.useEffect)(function(){!X||!i||(u.setFieldsValue(i),Xt(i.type==="object"),_t(i.type==="array"),tn(i.type==="number"),rn(i.type==="boolean"),on(i.type==="integer"),ln(i.type==="string"))},[X,i]);function ut(s){Pe.current=s}var Me=a.items,Je=!!(a.type==="object"||A&&(Me==null?void 0:Me.type)==="object")&&!A&&!M;return a.type?(0,e.jsxs)(e.Fragment,{children:[p,(0,e.jsxs)(C.Z,{align:"middle",style:{paddingBottom:10},children:[(0,e.jsx)(l.Z,{flex:"".concat(24+ge*17,"px"),style:{marginLeft:ge*5},children:(0,e.jsx)(C.Z,{justify:"end",children:a.type==="object"&&(0,e.jsx)(V.ZP,{type:"text",size:"small",icon:ye?(0,e.jsx)(ct.Z,{}):(0,e.jsx)(ft.Z,{}),onClick:function(){return Kt(!ye)}})})}),(0,e.jsx)(l.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(ee.Z,{status:!M&&j.length===0?"error":void 0,disabled:M||A,value:M?"root":j,placeholder:"\u5C5E\u6027\u540D\u79F0",onBlur:function(){if((j==null?void 0:j.length)===0){I.error("\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}N&&j&&(j==null?void 0:j.length)!==0&&N(b,j)},onChange:function(r){return Ee(r.target.value)}})}),(0,e.jsx)(l.Z,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(vt.Z,{disabled:A||M,checked:le,onChange:function(r){U&&j&&U(b.slice(0,w),j,!r.target.checked)}})}),(0,e.jsx)(l.Z,{flex:"95px",style:{marginLeft:5},children:(0,e.jsx)(Ze.Z,{style:{width:"95px"},value:a.type,options:Dt,onChange:function(r){g&&g(b,He(r),"type")}})}),(0,e.jsx)(l.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(ee.Z,{placeholder:"\u6807\u9898",value:ue,onBlur:function(){g&&g(b.concat(ie(a,"title")),ue,"title")},onChange:function(r){return ve(r.target.value)}})}),(0,e.jsx)(l.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(ee.Z,{placeholder:"\u63CF\u8FF0",value:we,onBlur:function(){g&&g(b.concat(ie(a,"description")),we,"description")},onChange:function(r){return Tt(r.target.value)}})}),(0,e.jsx)(l.Z,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(C.Z,{style:{width:"72px"},children:[(0,e.jsx)(me.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)(V.ZP,{type:"text",size:"small",icon:(0,e.jsx)(mt.Z,{}),style:{color:"green"},onClick:function(){re&&!re(b,a,M||a.type==="object"?void 0:j)||(x(a),xe(!X))}})}),!M&&!A||a.type==="object"?(0,e.jsx)(pt.Z,{disabled:!Je,placement:"bottom",menu:{items:[{key:"addNode",label:"\u540C\u7EA7\u8282\u70B9",onClick:function(){k&&k(b,!1)}},{key:"addChildNode",label:"\u5B50\u7EA7\u8282\u70B9",onClick:function(){k&&k(b,!0)}}]},children:(0,e.jsx)(me.Z,{title:!Je&&"\u6DFB\u52A0\u8282\u70B9",children:(0,e.jsx)(V.ZP,{type:"text",size:"small",icon:(0,e.jsx)(Re.Z,{}),style:{color:h.colorPrimary},onClick:function(){Je||k&&k(b,!(!A&&!M))}})})}):(0,e.jsx)("div",{style:{width:"24px"}}),(0,e.jsx)(l.Z,{flex:"24px",children:M?(0,e.jsx)(me.Z,{title:"\u5BFC\u5165Json",children:(0,e.jsx)(V.ZP,{type:"text",size:"small",icon:(0,e.jsx)(ht.Z,{}),style:{color:"purple"},onClick:function(){return be(!0)}})}):A?(0,e.jsx)("div",{style:{width:"24px"}}):(0,e.jsx)(me.Z,{title:"\u5220\u9664\u8282\u70B9",children:(0,e.jsx)(V.ZP,{danger:!0,type:"text",size:"small",icon:(0,e.jsx)(Ne.Z,{}),onClick:function(){ne&&ne(b)}})})}),M&&a.type!=="object"&&(0,e.jsx)(l.Z,{flex:"24px",children:!A&&(0,e.jsx)("div",{style:{width:"24px"}})})]})})]}),a.type==="object"&&ye&&a.properties&&Object.keys(a.properties).map(function(s){if(a.properties){var r;return(0,e.jsx)("div",{children:(0,e.jsx)(Oe,D()(D()({},t),{},{isRequire:(r=a.required)===null||r===void 0?void 0:r.includes(s),isArrayItems:!1,nodeDepth:ge+1,parentSchemaDepth:M?0:w+2,namePath:b.concat(ie(a,"properties"),ie(a.properties,s)),propertyName:s,schema:a.properties[s],handleAdvancedSettingClick:re}))},String(s))}return(0,e.jsx)(e.Fragment,{})}),a.type==="array"&&ye&&(0,e.jsx)(Oe,D()(D()({},t),{},{isRequire:!1,isArrayItems:!0,nodeDepth:ge+1,parentSchemaDepth:M?0:w+1,propertyName:"items",namePath:b.concat(ie(a,"items")),schema:a.items,handleAdvancedSettingClick:re})),(0,e.jsx)(We.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",width:900,open:X,okText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",onOk:function(){if(g){if(M||a.type==="object"){g(b,D()(D()({},a),i)),xe(!X);return}u.validateFields().then(function(r){g(b,D()(D()(D()({},a),i),r),j),xe(!X)}).catch(function(r){console.log("Failed:",r)})}},onCancel:function(){return xe(!X)},children:(0,e.jsxs)(Z.Z,{form:u,onValuesChange:function(r,$){Pe.current&&Pe.current.setValue(JSON.stringify(D()(D()({},i),$),null,2))},children:[!Qt&&ze.indexOf(i==null?void 0:i.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(h.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"\u57FA\u672C\u8BBE\u7F6E"}),(oe||de||ce||st)&&(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u9ED8\u8BA4\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsxs)(Z.Z.Item,{noStyle:!0,name:"default",children:[oe&&(0,e.jsx)(ee.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"}),(de||ce)&&(0,e.jsx)(R.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"}),st&&(0,e.jsx)(Ze.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",options:[{value:!0,label:"true"},{value:!1,label:"false"}]})]})})]}),oe&&(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u957F\u5EA6\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,name:"minLength",children:(0,e.jsx)(R.Z,{min:0,style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6"})})}),(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u957F\u5EA6\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,name:"maxLength",children:(0,e.jsx)(R.Z,{min:0,style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6"})})})]}),(de||ce)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,name:"minimum",children:(0,e.jsx)(R.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C"})})}),(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,name:"maximum",children:(0,e.jsx)(R.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C"})})})]}),(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,name:"exclusiveMinimum",children:(0,e.jsx)(R.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C"})})}),(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,name:"exclusiveMaximum",children:(0,e.jsx)(R.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C"})})})]})]}),oe&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6B63\u5219\u5339\u914D\uFF1A"}),(0,e.jsx)(l.Z,{span:20,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,name:"pattern",children:(0,e.jsx)(ee.Z,{placeholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F"})})})]}),(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u683C\u5F0F\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,name:"format",children:(0,e.jsx)(Ze.Z,{allowClear:!0,options:bt,placeholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",style:{width:"100%"}})})})]})]}),qt&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u5143\u7D20\u552F\u4E00\uFF1A"}),(0,e.jsx)(l.Z,{span:20,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,name:"uniqueItems",valuePropName:"checked",children:(0,e.jsx)(gt.Z,{})})})]}),(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,name:"minItems",children:(0,e.jsx)(R.Z,{style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570"})})}),(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u591A\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(l.Z,{span:8,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,name:"maxItems",children:(0,e.jsx)(R.Z,{style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570"})})})]})]}),(oe||de||ce)&&(0,e.jsxs)(C.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(l.Z,{span:4,style:{textAlign:"right"},children:"\u679A\u4E3E\uFF1A"}),(0,e.jsx)(l.Z,{span:20,children:(0,e.jsx)(Z.Z.List,{name:"enums",children:function(r,$){var ke=$.add,F=$.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(C.Z,{gutter:6,children:r.map(function(je){var un=je.key,dt=je.name,dn=Ie()(je,Bt);return(0,e.jsx)(l.Z,{span:12,children:(0,e.jsxs)(C.Z,{gutter:2,justify:"start",align:"middle",style:{marginBottom:6},children:[(0,e.jsx)(l.Z,{flex:"auto",children:(0,e.jsxs)(Z.Z.Item,D()(D()({},dn),{},{noStyle:!0,name:[dt],rules:[{required:!0}],children:[oe&&(0,e.jsx)(ee.Z,{placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"}),(de||ce)&&(0,e.jsx)(R.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})]}))}),(0,e.jsx)(l.Z,{flex:"24px",children:(0,e.jsx)(V.ZP,{icon:(0,e.jsx)(Ne.Z,{}),size:"small",type:"text",danger:!0,onClick:function(){return F(dt)}})})]})},un)})}),(0,e.jsx)(C.Z,{children:(0,e.jsx)(l.Z,{span:6,children:(0,e.jsx)(Z.Z.Item,{noStyle:!0,children:(0,e.jsx)(V.ZP,{onClick:function(){return ke()},block:!0,icon:(0,e.jsx)(Re.Z,{}),children:"\u6DFB\u52A0\u679A\u4E3E\u503C"})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(h.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)(Ke,{height:300,language:"json",value:JSON.stringify(i,null,2),handleEditorDidMount:ut,onChange:function(r){Be(function(){if(r)try{var $=JSON.parse(r);x($)}catch(ke){}})}})]})}),(0,e.jsxs)(We.Z,{title:"\u5BFC\u5165",width:900,okText:"\u5BFC\u5165",cancelText:"\u53D6\u6D88",open:Ae,onOk:_()(K()().mark(function s(){var r,$;return K()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!(!De||De.length===0)){F.next=3;break}return I.warning("\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E"),F.abrupt("return");case 3:if(r=At(De),r){F.next=7;break}return I.error("\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E"),F.abrupt("return");case 7:F.t0=_e,F.next=F.t0==="json"?10:F.t0==="json-schema"?12:16;break;case 10:return $=new xt.NL().createSchemaOf(r),F.abrupt("break",16);case 12:return F.next=14,Et(r);case 14:return $=F.sent,F.abrupt("break",16);case 16:g&&(g([],$),be(!Ae),tt(void 0));case 17:case"end":return F.stop()}},s)})),onCancel:function(){return be(!Ae)},children:[(0,e.jsx)(C.Z,{style:{marginBottom:16},children:(0,e.jsx)(yt.ZP.Group,{value:_e,optionType:"button",buttonStyle:"solid",onChange:function(r){return wt(r.target.value)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(C.Z,{children:(0,e.jsx)(Ke,{height:390,language:"json",handleEditorDidMount:ut,onChange:function(r){return tt(r)}})})]})]}):(0,e.jsx)(e.Fragment,{})}var Mt=Oe,Jt=(0,c.forwardRef)(function(t,o){var h=Y.ZP.useMessage(),E=v()(h,2),S=E[0],u=E[1];function P(d){var a={type:"object",properties:{field:{type:"string"}}};if(!d)return a;switch(J()(d)){case"string":try{return Pt(JSON.parse(d))}catch(f){return S.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),a}case"object":return d}}var O=(0,c.useState)(P(t.data)),I=v()(O,2),p=I[0],g=I[1],N=(0,c.useState)(0),A=v()(N,2),U=A[0],te=A[1];(0,c.useEffect)(function(){t.onSchemaChange&&t.onSchemaChange(p)},[p]);var w=function(a,f,m){if(a.length===0){g(f);return}for(var y=W().cloneDeep(p),i=y,x=0;x<a.length-1;x++){var B=Object.keys(i)[a[x]];i[B]||(i[B]={}),i=i[B]}var T=a[a.length-1],j=Object.keys(i)[T];if(T===-1){if(typeof f=="undefined"||!m)return;i[m]=f}else{if(i[j]===f)return;i[j]=f}g(y)};function ne(d,a){for(var f=W().cloneDeep(p),m=f,y=null,i="",x=0;x<d.length-1;x++){var B=Object.keys(m),T=void 0;if(typeof d[x]=="number"?T=d[x]:T=B.indexOf(String(d[x])),T<0||T>=B.length){console.error("Path not found: ".concat(d.slice(0,x+1).join(".")));return}y=m,i=B[T],m=m[i]}var j=d[d.length-1],Ee=Object.keys(m),ae=Ee[j];if(ae!==a){if(m.hasOwnProperty(ae))y[i]=Object.fromEntries(Object.entries(m).map(function(he){var ue=v()(he,2),ve=ue[0],pe=ue[1];return ve===ae?[a,pe]:[ve,pe]}));else{console.error("Key not found: ".concat(ae));return}g(f)}}function k(d,a,f){d.required||(d.required=[]);var m=d.required.indexOf(a);f?m!==-1&&d.required.splice(m,1):m===-1&&d.required.push(a),d.required.length===0&&delete d.required}function le(d,a,f){for(var m=W().cloneDeep(p),y=m,i=0;i<d.length;i++){var x=d[i],B=Object.keys(y);typeof y[B[x]]=="undefined"&&(y[B[x]]={}),y=y[B[x]]}k(y,a,f),g(m)}function re(d){for(var a=W().cloneDeep(p),f=a,m=a,y=0;y<d.length-1;y++)if(f!=null)m=f,f=f[Object.keys(f)[d[y]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",d);return}var i=Object.keys(f)[d[d.length-1]];k(m,i,!0),f&&J()(f)==="object"&&f.hasOwnProperty(i)&&delete f[i],g(a)}function Fe(d,a){for(var f=W().cloneDeep(p),m=f,y=0;y<d.length-(a?0:1);y++){var i=Object.keys(m)[d[y]];m[i]||(m[i]={}),m=m[i]}var x=He("string");a?m.properties["field_".concat(U)]=x:m["field_".concat(U)]=x,te(U+1),g(f)}return(0,c.useImperativeHandle)(o,function(){return{changeSchema:w}}),(0,e.jsxs)("div",{style:{paddingTop:"10px 10px 0 10px"},children:[u,(0,e.jsx)(Mt,{schema:p,changeSchema:w,renameProperty:ne,removeProperty:re,addProperty:Fe,updateRequiredProperty:le,handleAdvancedSettingClick:t.handleAdvancedSettingClick})]})}),kt=Jt},71860:function(Te,z,n){"use strict";n.r(z),n.d(z,{texts:function(){return J}});var fe=n(57396);const J=[{value:"1.x.x \u7248\u672C\u7684\u4EE3\u7801\u5DF2\u5B8C\u5168\u91CD\u6784\u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:` UI \u5E03\u5C40\u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528
`,paraId:0,tocIndex:0},{value:"0.x.x",paraId:0,tocIndex:0},{value:" \u7248\u672C\u3002",paraId:0,tocIndex:0},{value:`yarn add @quiet-front-end/json-schema-editor-antd
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"JsonSchema \u53D8\u66F4\u7684\u56DE\u8C03\u3002",paraId:6,tocIndex:3},{value:"\u7C7B\u578B\uFF1A",paraId:7,tocIndex:3},{value:"(schema: JSONSchema7) => void",paraId:7,tocIndex:3},{value:"\u9ED8\u8BA4\u503C\uFF1A ",paraId:8,tocIndex:3},{value:"-",paraId:8,tocIndex:3},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E\u3002",paraId:9,tocIndex:4},{value:"\u7C7B\u578B\uFF1A",paraId:10,tocIndex:4},{value:"JSONSchema7 | string | undefined",paraId:10,tocIndex:4},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:11,tocIndex:4},{value:`{
  "type": "object",
  "properties": {
    "field": {
      "type": "string"
    }
  }
}
`,paraId:12,tocIndex:4},{value:"\u70B9\u51FB",paraId:13,tocIndex:5},{value:"\u9AD8\u7EA7\u8BBE\u7F6E",paraId:13,tocIndex:5},{value:"\u6309\u94AE\u7684\u56DE\u8C03\uFF0C\u8FD4\u56DE",paraId:13,tocIndex:5},{value:"false",paraId:13,tocIndex:5},{value:"\uFF1A\u4E0D\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\uFF0C\u8FD4\u56DE",paraId:13,tocIndex:5},{value:"true",paraId:13,tocIndex:5},{value:"\uFF1A\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\u3002",paraId:13,tocIndex:5},{value:"\u7C7B\u578B\uFF1A",paraId:14,tocIndex:5},{value:"(namePath: number[], schema: JSONSchema7, propertyName?: string) => boolean",paraId:14,tocIndex:5},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:15,tocIndex:5},{value:"-",paraId:15,tocIndex:5},{value:"\u8BF4\u660E\uFF1A\u53EF\u4EE5\u7ED3\u5408",paraId:16,tocIndex:5},{value:"\u7EC4\u4EF6\u5F15\u7528",paraId:16,tocIndex:5},{value:"\u5B9E\u73B0\u70B9\u51FB\u9AD8\u7EA7\u8BBE\u7F6E\u6309\u94AE\u540E\u83B7\u53D6\u8DEF\u5F84\u4E0B\u7684 JsonSchema\uFF0C\u6DFB\u52A0\u3001\u4FEE\u6539\u81EA\u5B9A\u4E49\u5B57\u6BB5\u7B49\uFF0C\u7136\u540E\u4FEE\u6539\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema\u3002",paraId:16,tocIndex:5},{value:`export interface JsonSchemaEditorHandle {
  /* \u66F4\u65B0\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema */
  changeSchema: (namePath: number[], value: any, propertyName?: string) => void;
}
`,paraId:17,tocIndex:6}]},49832:function(){}}]);
