"use strict";(self.webpackChunk_quiet_front_end_json_schema_editor_antd=self.webpackChunk_quiet_front_end_json_schema_editor_antd||[]).push([[593],{77102:function(De,L,n){n.r(L),n.d(L,{demos:function(){return u}});var se=n(15009),O=n.n(se),xe=n(99289),d=n.n(xe),H=n(67294),be=n(57396),J=n(56506),u={"jsonschemaeditor-demo-0":{component:H.memo(H.lazy(d()(O()().mark(function ee(){var w,V;return O()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,Promise.resolve().then(n.bind(n,56506));case 2:return w=D.sent,V=w.JsonSchemaEditor,D.abrupt("return",{default:function(){return H.createElement(V,null)}});case 5:case"end":return D.stop()}},ee)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@quiet-front-end/json-schema-editor-antd';

export default () => <JsonSchemaEditor />;`},"@quiet-front-end/json-schema-editor-antd":{type:"NPM",value:"1.0.1"}},entry:"index.jsx"},context:{"@quiet-front-end/json-schema-editor-antd":J},renderOpts:{compile:function(){var ee=d()(O()().mark(function V(){var S,D=arguments;return O()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,n.e(335).then(n.bind(n,37335));case 2:return N.abrupt("return",(S=N.sent).default.apply(S,D));case 3:case"end":return N.stop()}},V)}));function w(){return ee.apply(this,arguments)}return w}()}}}},56506:function(De,L,n){n.r(L),n.d(L,{JsonSchemaEditor:function(){return yt}});var se=n(52677),O=n.n(se),xe=n(5574),d=n.n(xe),H=n(68872),be=n(96486),J=n.n(be),u=n(67294),ee=n(13769),w=n.n(ee),V=n(97857),S=n.n(V),D=n(39398),pe=n(14313),N=n(42952),Be=n(24969),ot=n(57546),Me=n(48689),ke=n(9361),j=n(23323),v=n(71230),s=n(15746),G=n(92797),Q=n(56846),st=n(56616),ye=n(21628),ie=n(61865),it=n(65695),Te=n(75027),b=n(24435),lt=n(41637),ut=n(78045),dt=n(63764),ct={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=n(85893),ht=function(p){var C=p.width,_=p.lineNumbers,T=_===void 0?"on":_,g=p.height,R=p.value,P=p.folding,y=P===void 0?!0:P,B=p.language,Z=p.readOnly,$=Z===void 0?!1:Z,I=p.renderLineHighlight,X=I===void 0?"all":I,Y=p.onChange,K=ke.Z.useToken(),W=K.token;function M(ne){ne.editor.defineTheme("x-code-default",ct)}return(0,e.jsx)("div",{style:{border:"1px solid ".concat(W.colorBorder),width:C||"100%"},children:(0,e.jsx)(dt.ZP,{height:g,width:C,value:R,language:B,onChange:Y,onMount:p.handleEditorDidMount,beforeMount:M,theme:"x-code-default",options:{readOnly:$,lineNumbers:T,renderLineHighlight:X,folding:y,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:9,horizontalScrollbarSize:9},minimap:{enabled:!1}}})})},Le=ht,Je=["string","number","array","object","boolean","integer"];function te(i,p){if(i===null||O()(i)!=="object")return console.error("The provided value is not an object."),-1;var C=Object.keys(i);return C.indexOf(p)}var mt=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],ft=Je.map(function(i){return{value:i}});function Ne(i){switch(i){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var _e=function(p){var C=function(g){return Array.isArray(g)?"array":g===null?"null":O()(g)},_=function T(g){var R=C(g);switch(R){case"object":{var P={};for(var y in g)g.hasOwnProperty(y)&&(P[y]=T(g[y]));return{type:"object",properties:P,required:Object.keys(g)}}case"array":return{type:"array",items:g.length?T(g[0]):{}};default:return{type:R}}};return _(p)},gt=["key","name"];function je(i){var p=ke.Z.useToken(),C=p.token,_=j.Z.useForm(),T=d()(_,1),g=T[0],R=H.ZP.useMessage(),P=d()(R,2),y=P[0],B=P[1],Z=i.changeSchema,$=i.renameProperty,I=i.isArrayItems,X=i.updateRequiredProperty,Y=i.parentSchemaDepth,K=Y===void 0?0:Y,W=i.removeProperty,M=i.addProperty,ne=(0,u.useState)(i.schema),le=d()(ne,2),t=le[0],h=le[1],c=(0,u.useState)(),l=d()(c,2),a=l[0],f=l[1],x=(0,u.useState)(i.propertyName),F=d()(x,2),m=F[0],ve=F[1],Se=(0,u.useState)(t.title),z=d()(Se,2),ue=z[0],de=z[1],ce=(0,u.useState)(t.description),re=d()(ce,2),Re=re[0],jt=re[1],vt=(0,u.useState)(i.nodeDepth?i.nodeDepth:0),$e=d()(vt,2),he=$e[0],St=$e[1],Zt=(0,u.useState)(i.namePath?i.namePath:[]),Ke=d()(Zt,2),E=Ke[0],It=Ke[1],Ct=(0,u.useState)(!0),We=d()(Ct,2),me=We[0],Ft=We[1],Et=(0,u.useState)(!1),ze=d()(Et,2),U=ze[0],fe=ze[1],At=(0,u.useState)(!1),Ue=d()(At,2),Ze=Ue[0],Ie=Ue[1],Ot=(0,u.useState)("json"),He=d()(Ot,2),we=He[0],Pt=He[1],Dt=(0,u.useState)(),Ve=d()(Dt,2),Ce=Ve[0],Ge=Ve[1],bt=(0,u.useState)(!1),Qe=d()(bt,2),Bt=Qe[0],Mt=Qe[1],kt=(0,u.useState)(!1),Xe=d()(kt,2),Tt=Xe[0],Lt=Xe[1],Jt=(0,u.useState)(!1),Ye=d()(Jt,2),ae=Ye[0],Nt=Ye[1],_t=(0,u.useState)(!1),qe=d()(_t,2),et=qe[0],Rt=qe[1],$t=(0,u.useState)(!1),tt=d()($t,2),oe=tt[0],Kt=tt[1],Wt=(0,u.useState)(!1),nt=d()(Wt,2),q=nt[0],zt=nt[1],Fe=(0,u.useRef)(null),A=typeof m=="undefined";(0,u.useEffect)(function(){h(i.schema)},[i.schema]),(0,u.useEffect)(function(){It(i.namePath?i.namePath:[])},[i.namePath]),(0,u.useEffect)(function(){St(i.nodeDepth?i.nodeDepth:0)},[i.nodeDepth]);var Ee=(0,u.useCallback)(J().debounce(function(o){typeof o=="function"?o():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,u.useEffect)(function(){return function(){Ee.cancel()}},[Ee]),(0,u.useEffect)(function(){!U||!a||(g.setFieldsValue(a),Mt(a.type==="object"),Lt(a.type==="array"),Nt(a.type==="number"),Rt(a.type==="boolean"),Kt(a.type==="integer"),zt(a.type==="string"))},[U,a]);function rt(o){Fe.current=o}var Ae=t.items,Oe=!!(t.type==="object"||I&&(Ae==null?void 0:Ae.type)==="object")&&!I&&!A;return(0,e.jsxs)(e.Fragment,{children:[B,(0,e.jsxs)(v.Z,{align:"middle",style:{paddingBottom:10},children:[(0,e.jsx)(s.Z,{flex:"".concat(24+he*17,"px"),style:{marginLeft:he*5},children:(0,e.jsx)(v.Z,{justify:"end",children:t.type==="object"&&(0,e.jsx)(G.ZP,{type:"text",size:"small",icon:me?(0,e.jsx)(D.Z,{}):(0,e.jsx)(pe.Z,{}),onClick:function(){return Ft(!me)}})})}),(0,e.jsx)(s.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(Q.Z,{status:!A&&m.length===0?"error":void 0,disabled:A||I,value:A?"root":m,placeholder:"\u5C5E\u6027\u540D\u79F0",onBlur:function(){if((m==null?void 0:m.length)===0){y.error("\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}$&&m&&(m==null?void 0:m.length)!==0&&$(E,m)},onChange:function(r){return ve(r.target.value)}})}),(0,e.jsx)(s.Z,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(st.Z,{disabled:I||A,onChange:function(r){X&&m&&X(E.slice(0,K),m,!r.target.checked)}})}),(0,e.jsx)(s.Z,{flex:"95px",style:{marginLeft:5},children:(0,e.jsx)(ye.Z,{style:{width:"95px"},value:t.type,options:ft,onChange:function(r){Z&&Z(E,Ne(r),"type")}})}),(0,e.jsx)(s.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(Q.Z,{placeholder:"\u6807\u9898",value:ue,onBlur:function(){Z&&Z(E.concat(te(t,"title")),ue,"title")},onChange:function(r){return de(r.target.value)}})}),(0,e.jsx)(s.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(Q.Z,{placeholder:"\u63CF\u8FF0",value:Re,onBlur:function(){Z&&Z(E.concat(te(t,"description")),Re,"description")},onChange:function(r){return jt(r.target.value)}})}),(0,e.jsx)(s.Z,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(v.Z,{style:{width:"72px"},children:[(0,e.jsx)(ie.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)(G.ZP,{type:"text",size:"small",icon:(0,e.jsx)(N.Z,{}),style:{color:"green"},onClick:function(){f(t),fe(!U)}})}),!A||!I||t.type==="object"?(0,e.jsx)(it.Z,{disabled:!Oe,placement:"bottom",menu:{items:[{key:"addNode",label:"\u540C\u7EA7\u8282\u70B9",onClick:function(){M&&M(E,!1)}},{key:"addChildNode",label:"\u5B50\u7EA7\u8282\u70B9",onClick:function(){M&&M(E,!0)}}]},children:(0,e.jsx)(ie.Z,{title:!Oe&&"\u6DFB\u52A0\u8282\u70B9",children:(0,e.jsx)(G.ZP,{type:"text",size:"small",icon:(0,e.jsx)(Be.Z,{}),style:{color:C.colorPrimary},onClick:function(){Oe||M&&M(E,!(!I&&!A))}})})}):(0,e.jsx)("div",{style:{width:"24px"}}),(0,e.jsx)(s.Z,{flex:"24px",children:A?(0,e.jsx)(ie.Z,{title:"\u5BFC\u5165Json",children:(0,e.jsx)(G.ZP,{type:"text",size:"small",icon:(0,e.jsx)(ot.Z,{}),style:{color:"purple"},onClick:function(){return Ie(!0)}})}):I?(0,e.jsx)("div",{style:{width:"24px"}}):(0,e.jsx)(ie.Z,{title:"\u5220\u9664\u8282\u70B9",children:(0,e.jsx)(G.ZP,{danger:!0,type:"text",size:"small",icon:(0,e.jsx)(Me.Z,{}),onClick:function(){W&&W(E)}})})}),A&&t.type!=="object"&&(0,e.jsx)(s.Z,{flex:"24px",children:!I&&(0,e.jsx)("div",{style:{width:"24px"}})})]})})]}),t.type==="object"&&me&&t.properties&&Object.keys(t.properties).map(function(o){return t.properties?(0,e.jsx)("div",{children:(0,e.jsx)(je,S()(S()({},i),{},{isArrayItems:!1,nodeDepth:he+1,parentSchemaDepth:A?0:K+2,namePath:E.concat(te(t,"properties"),te(t.properties,o)),propertyName:o,schema:t.properties[o]}))},String(o)):(0,e.jsx)(e.Fragment,{})}),t.type==="array"&&me&&(0,e.jsx)(je,S()(S()({},i),{},{isArrayItems:!0,nodeDepth:he+1,parentSchemaDepth:A?0:K+1,propertyName:"items",namePath:E.concat(te(t,"items")),schema:t.items})),(0,e.jsx)(Te.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",width:900,open:U,okText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",onOk:function(){if(Z){if(A||t.type==="object"){Z(E,S()(S()({},t),a),"root"),fe(!U);return}g.validateFields().then(function(r){Z(E,S()(S()({},t),r),m),fe(!U)}).catch(function(r){console.log("Failed:",r)})}},onCancel:function(){return fe(!U)},children:(0,e.jsxs)(j.Z,{form:g,onValuesChange:function(r,k){Fe.current&&Fe.current.setValue(JSON.stringify(S()(S()({},a),k),null,2))},children:[!Bt&&Je.indexOf(a==null?void 0:a.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(C.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"\u57FA\u672C\u8BBE\u7F6E"}),(q||ae||oe||et)&&(0,e.jsxs)(v.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u9ED8\u8BA4\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsxs)(j.Z.Item,{noStyle:!0,name:"default",children:[q&&(0,e.jsx)(Q.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"}),(ae||oe)&&(0,e.jsx)(b.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"}),et&&(0,e.jsx)(ye.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",options:[{value:!0,label:"true"},{value:!1,label:"false"}]})]})})]}),q&&(0,e.jsxs)(v.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u957F\u5EA6\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(j.Z.Item,{noStyle:!0,name:"minLength",children:(0,e.jsx)(b.Z,{min:0,style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6"})})}),(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u957F\u5EA6\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(j.Z.Item,{noStyle:!0,name:"maxLength",children:(0,e.jsx)(b.Z,{min:0,style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6"})})})]}),(ae||oe)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(v.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(j.Z.Item,{noStyle:!0,name:"minimum",children:(0,e.jsx)(b.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C"})})}),(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(j.Z.Item,{noStyle:!0,name:"maximum",children:(0,e.jsx)(b.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C"})})})]}),(0,e.jsxs)(v.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(j.Z.Item,{noStyle:!0,name:"exclusiveMinimum",children:(0,e.jsx)(b.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C"})})}),(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(j.Z.Item,{noStyle:!0,name:"exclusiveMaximum",children:(0,e.jsx)(b.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C"})})})]})]}),q&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(v.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6B63\u5219\u5339\u914D\uFF1A"}),(0,e.jsx)(s.Z,{span:20,children:(0,e.jsx)(j.Z.Item,{noStyle:!0,name:"pattern",children:(0,e.jsx)(Q.Z,{placeholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F"})})})]}),(0,e.jsxs)(v.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u683C\u5F0F\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(j.Z.Item,{noStyle:!0,name:"format",children:(0,e.jsx)(ye.Z,{allowClear:!0,options:mt,placeholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",style:{width:"100%"}})})})]})]}),Tt&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(v.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u5143\u7D20\u552F\u4E00\uFF1A"}),(0,e.jsx)(s.Z,{span:20,children:(0,e.jsx)(j.Z.Item,{noStyle:!0,name:"uniqueItems",valuePropName:"checked",children:(0,e.jsx)(lt.Z,{})})})]}),(0,e.jsxs)(v.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(j.Z.Item,{noStyle:!0,name:"minItems",children:(0,e.jsx)(b.Z,{style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570"})})}),(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u591A\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(j.Z.Item,{noStyle:!0,name:"maxItems",children:(0,e.jsx)(b.Z,{style:{width:"100%"},parser:function(r){return r?parseInt(r.replace(/\D/g,""),10):""},formatter:function(r){return r?"".concat(Math.floor(Math.max(r,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570"})})})]})]}),(q||ae||oe)&&(0,e.jsxs)(v.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u679A\u4E3E\uFF1A"}),(0,e.jsx)(s.Z,{span:20,children:(0,e.jsx)(j.Z.List,{name:"enums",children:function(r,k){var Pe=k.add,Ut=k.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v.Z,{children:r.map(function(ge){var Ht=ge.key,at=ge.name,wt=w()(ge,gt);return(0,e.jsx)(s.Z,{span:12,children:(0,e.jsxs)(v.Z,{justify:"start",align:"middle",style:{marginBottom:6},children:[(0,e.jsx)(s.Z,{flex:"auto",children:(0,e.jsxs)(j.Z.Item,S()(S()({},wt),{},{noStyle:!0,name:[at],rules:[{required:!0}],children:[q&&(0,e.jsx)(Q.Z,{placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"}),(ae||oe)&&(0,e.jsx)(b.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})]}))}),(0,e.jsx)(s.Z,{flex:"36px",style:{paddingLeft:7},children:(0,e.jsx)(Me.Z,{onClick:function(){return Ut(at)}})})]})},Ht)})}),(0,e.jsx)(v.Z,{children:(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(j.Z.Item,{noStyle:!0,children:(0,e.jsx)(G.ZP,{onClick:function(){return Pe()},block:!0,icon:(0,e.jsx)(Be.Z,{}),children:"\u6DFB\u52A0\u679A\u4E3E\u503C"})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(C.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)(Le,{height:300,language:"json",value:JSON.stringify(a,null,2),handleEditorDidMount:rt,onChange:function(r){Ee(function(){if(r)try{var k=JSON.parse(r);f(k)}catch(Pe){}})}})]})}),(0,e.jsxs)(Te.Z,{title:"\u5BFC\u5165",width:900,okText:"\u5BFC\u5165",cancelText:"\u53D6\u6D88",open:Ze,onOk:function(){if(!Ce||Ce.length===0){y.warning("\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E");return}var r;try{r=JSON.parse(Ce)}catch(Pe){y.error("\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E");return}var k;switch(we){case"json":k=_e(r);break;case"json-schema":k=r;break}Z&&(Z([],k,"root"),Ie(!Ze),Ge(void 0))},onCancel:function(){return Ie(!Ze)},children:[(0,e.jsx)(v.Z,{style:{marginBottom:16},children:(0,e.jsx)(ut.ZP.Group,{value:we,optionType:"button",buttonStyle:"solid",onChange:function(r){return Pt(r.target.value)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(v.Z,{children:(0,e.jsx)(Le,{height:390,language:"json",handleEditorDidMount:rt,onChange:function(r){return Ge(r)}})})]})]})}var xt=je;function pt(i){var p=H.ZP.useMessage(),C=d()(p,2),_=C[0],T=C[1];function g(t){var h={type:"object",properties:{field:{type:"string"}}};if(!t)return h;switch(O()(t)){case"string":try{return _e(JSON.parse(t))}catch(c){return _.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),h}case"object":return t}}var R=(0,u.useState)(g(i.data)),P=d()(R,2),y=P[0],B=P[1],Z=(0,u.useState)(0),$=d()(Z,2),I=$[0],X=$[1];(0,u.useEffect)(function(){i.onSchemaChange&&i.onSchemaChange(y)},[y]);function Y(t,h,c){if(t.length===0){B(h);return}for(var l=J().cloneDeep(y),a=l,f=0;f<t.length-1;f++){var x=Object.keys(a)[t[f]];a[x]||(a[x]={}),a=a[x]}var F=t[t.length-1],m=Object.keys(a)[F];if(F===-1){if(typeof h=="undefined")return;a[c]=h}else{if(a[m]===h)return;a[m]=h}B(l)}function K(t,h){for(var c=J().cloneDeep(y),l=c,a=null,f="",x=0;x<t.length-1;x++){var F=Object.keys(l),m=void 0;if(typeof t[x]=="number"?m=t[x]:m=F.indexOf(String(t[x])),m<0||m>=F.length){console.error("Path not found: ".concat(t.slice(0,x+1).join(".")));return}a=l,f=F[m],l=l[f]}var ve=t[t.length-1],Se=Object.keys(l),z=Se[ve];if(z!==h){if(l.hasOwnProperty(z))a[f]=Object.fromEntries(Object.entries(l).map(function(ue){var de=d()(ue,2),ce=de[0],re=de[1];return ce===z?[h,re]:[ce,re]}));else{console.error("Key not found: ".concat(z));return}B(c)}}function W(t,h,c){t.required||(t.required=[]);var l=t.required.indexOf(h);c?l!==-1&&t.required.splice(l,1):l===-1&&t.required.push(h),t.required.length===0&&delete t.required}function M(t,h,c){for(var l=J().cloneDeep(y),a=l,f=0;f<t.length;f++){var x=t[f],F=Object.keys(a);typeof a[F[x]]=="undefined"&&(a[F[x]]={}),a=a[F[x]]}W(a,h,c),B(l)}function ne(t){for(var h=J().cloneDeep(y),c=h,l=h,a=0;a<t.length-1;a++)if(c!=null)l=c,c=c[Object.keys(c)[t[a]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",t);return}var f=Object.keys(c)[t[t.length-1]];W(l,f,!0),c&&O()(c)==="object"&&c.hasOwnProperty(f)&&delete c[f],B(h)}function le(t,h){for(var c=J().cloneDeep(y),l=c,a=0;a<t.length-(h?0:1);a++){var f=Object.keys(l)[t[a]];l[f]||(l[f]={}),l=l[f]}var x=Ne("string");h?l.properties["field_".concat(I)]=x:l["field_".concat(I)]=x,X(I+1),B(c)}return(0,e.jsxs)("div",{style:{paddingTop:"10px 10px 0 10px"},children:[T,(0,e.jsx)(xt,{schema:y,changeSchema:Y,renameProperty:K,removeProperty:ne,addProperty:le,updateRequiredProperty:M})]})}var yt=pt},71860:function(De,L,n){n.r(L),n.d(L,{texts:function(){return O}});var se=n(57396);const O=[{value:"1.x.x \u7248\u672C\u7684\u4EE3\u7801\u5DF2\u5B8C\u5168\u91CD\u6784\u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:` UI \u5E03\u5C40\u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528
`,paraId:0,tocIndex:0},{value:"0.x.x",paraId:0,tocIndex:0},{value:" \u7248\u672C\u3002",paraId:0,tocIndex:0},{value:`yarn add @quiet-front-end/json-schema-editor-antd
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"\u53C2\u6570\u540D\u79F0",paraId:6,tocIndex:2},{value:"\u63CF\u8FF0",paraId:6,tocIndex:2},{value:"\u7C7B\u578B",paraId:6,tocIndex:2},{value:"\u9ED8\u8BA4\u503C",paraId:6,tocIndex:2},{value:"onChange",paraId:6,tocIndex:2},{value:"JsonSchema \u53D8\u66F4\u7684\u56DE\u8C03",paraId:6,tocIndex:2},{value:"(schema: JSONSchema7) => void",paraId:6,tocIndex:2},{value:"-",paraId:6,tocIndex:2},{value:"data",paraId:6,tocIndex:2},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E",paraId:6,tocIndex:2},{value:"JSONSchema7 | string | undefined",paraId:6,tocIndex:2},{value:'{"type": "object", "properties": {"field": {"type": "string"}}}',paraId:6,tocIndex:2}]}}]);
