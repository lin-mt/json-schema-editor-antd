"use strict";(self.webpackChunk_quiet_front_end_json_schema_editor_antd=self.webpackChunk_quiet_front_end_json_schema_editor_antd||[]).push([[593],{73513:function(Ae,J,r){r.r(J),r.d(J,{demos:function(){return pe}});var _=r(15009),N=r.n(_),xe=r(99289),d=r.n(xe),U=r(67294),pe={"jsonschemaeditor-demo-0":{component:U.memo(U.lazy(d()(N()().mark(function P(){var l,w;return N()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,Promise.resolve().then(r.bind(r,56506));case 2:return l=D.sent,w=l.JsonSchemaEditor,D.abrupt("return",{default:function(){return U.createElement(w,null)}});case 5:case"end":return D.stop()}},P)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@quiet-front-end/json-schema-editor-antd';

export default () => <JsonSchemaEditor />;`},"@quiet-front-end/json-schema-editor-antd":{type:"NPM",value:"1.0.0"}},entry:"index.jsx"},context:{"@quiet-front-end/json-schema-editor-antd":r(56506)},renderOpts:{compile:function(){var P=d()(N()().mark(function w(){var ee,D=arguments;return N()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,r.e(335).then(r.bind(r,37335));case 2:return L.abrupt("return",(ee=L.sent).default.apply(ee,D));case 3:case"end":return L.stop()}},w)}));function l(){return P.apply(this,arguments)}return l}()}}}},56506:function(Ae,J,r){r.r(J),r.d(J,{JsonSchemaEditor:function(){return yt}});var _=r(52677),N=r.n(_),xe=r(5574),d=r.n(xe),U=r(68872),pe=r(96486),P=r.n(pe),l=r(67294),w=r(13769),ee=r.n(w),D=r(97857),I=r.n(D),L=r(61996),rt=r(91286),at=r(15026),Oe=r(24193),ot=r(80120),Pe=r(79855),De=r(9361),v=r(25796),j=r(71230),s=r(15746),G=r(14726),Q=r(52993),st=r(56616),ye=r(92932),ie=r(61865),it=r(53707),Be=r(38273),B=r(2571),lt=r(72269),ut=r(78045),dt=r(63764),ct={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=r(85893),ht=function(p){var C=p.width,$=p.lineNumbers,T=$===void 0?"on":$,g=p.height,R=p.value,O=p.folding,y=O===void 0?!0:O,M=p.language,S=p.readOnly,W=S===void 0?!1:S,Z=p.renderLineHighlight,X=Z===void 0?"all":Z,Y=p.onChange,z=De.Z.useToken(),K=z.token;function k(ne){ne.editor.defineTheme("x-code-default",ct)}return(0,e.jsx)("div",{style:{border:"1px solid ".concat(K.colorBorder),width:C||"100%"},children:(0,e.jsx)(dt.ZP,{height:g,width:C,value:R,language:M,onChange:Y,onMount:p.handleEditorDidMount,beforeMount:k,theme:"x-code-default",options:{readOnly:W,lineNumbers:T,renderLineHighlight:X,folding:y,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,lineDecorationsWidth:5,lineNumbersMinChars:3,scrollbar:{verticalScrollbarSize:9,horizontalScrollbarSize:9},minimap:{enabled:!1}}})})},Me=ht,ke=["string","number","array","object","boolean","integer"];function te(i,p){if(i===null||N()(i)!=="object")return console.error("The provided value is not an object."),-1;var C=Object.keys(i);return C.indexOf(p)}var mt=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],ft=ke.map(function(i){return{value:i}});function Ne(i){switch(i){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var Te=function(p){var C=function(g){return Array.isArray(g)?"array":g===null?"null":N()(g)},$=function T(g){var R=C(g);switch(R){case"object":{var O={};for(var y in g)g.hasOwnProperty(y)&&(O[y]=T(g[y]));return{type:"object",properties:O,required:Object.keys(g)}}case"array":return{type:"array",items:g.length?T(g[0]):{}};default:return{type:R}}};return $(p)},gt=["key","name"];function ve(i){var p=De.Z.useToken(),C=p.token,$=v.Z.useForm(),T=d()($,1),g=T[0],R=U.ZP.useMessage(),O=d()(R,2),y=O[0],M=O[1],S=i.changeSchema,W=i.renameProperty,Z=i.isArrayItems,X=i.updateRequiredProperty,Y=i.parentSchemaDepth,z=Y===void 0?0:Y,K=i.removeProperty,k=i.addProperty,ne=(0,l.useState)(i.schema),le=d()(ne,2),t=le[0],h=le[1],c=(0,l.useState)(),u=d()(c,2),a=u[0],f=u[1],x=(0,l.useState)(i.propertyName),F=d()(x,2),m=F[0],je=F[1],Se=(0,l.useState)(t.title),H=d()(Se,2),ue=H[0],de=H[1],ce=(0,l.useState)(t.description),re=d()(ce,2),Je=re[0],vt=re[1],jt=(0,l.useState)(i.nodeDepth?i.nodeDepth:0),Le=d()(jt,2),he=Le[0],St=Le[1],Zt=(0,l.useState)(i.namePath?i.namePath:[]),$e=d()(Zt,2),E=$e[0],It=$e[1],Ct=(0,l.useState)(!0),Re=d()(Ct,2),me=Re[0],Ft=Re[1],Et=(0,l.useState)(!1),We=d()(Et,2),V=We[0],fe=We[1],bt=(0,l.useState)(!1),ze=d()(bt,2),Ze=ze[0],Ie=ze[1],At=(0,l.useState)("json"),Ke=d()(At,2),He=Ke[0],Ot=Ke[1],Pt=(0,l.useState)(),Ve=d()(Pt,2),Ce=Ve[0],Ue=Ve[1],Dt=(0,l.useState)(!1),we=d()(Dt,2),Bt=we[0],Mt=we[1],kt=(0,l.useState)(!1),Ge=d()(kt,2),Nt=Ge[0],Tt=Ge[1],Jt=(0,l.useState)(!1),Qe=d()(Jt,2),ae=Qe[0],Lt=Qe[1],$t=(0,l.useState)(!1),Xe=d()($t,2),Ye=Xe[0],Rt=Xe[1],Wt=(0,l.useState)(!1),qe=d()(Wt,2),oe=qe[0],zt=qe[1],Kt=(0,l.useState)(!1),_e=d()(Kt,2),q=_e[0],Ht=_e[1],Fe=(0,l.useRef)(null),b=typeof m=="undefined";(0,l.useEffect)(function(){h(i.schema)},[i.schema]),(0,l.useEffect)(function(){It(i.namePath?i.namePath:[])},[i.namePath]),(0,l.useEffect)(function(){St(i.nodeDepth?i.nodeDepth:0)},[i.nodeDepth]);var Ee=(0,l.useCallback)(P().debounce(function(o){typeof o=="function"?o():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,l.useEffect)(function(){return function(){Ee.cancel()}},[Ee]),(0,l.useEffect)(function(){!V||!a||(g.setFieldsValue(a),Mt(a.type==="object"),Tt(a.type==="array"),Lt(a.type==="number"),Rt(a.type==="boolean"),zt(a.type==="integer"),Ht(a.type==="string"))},[V,a]);function et(){var o=[],n=t.items,A=!!(t.type==="object"||Z&&(n==null?void 0:n.type)==="object"),se=!Z&&!b;return A&&se&&(o=o.concat({key:"addNode",label:"\u540C\u7EA7\u8282\u70B9",onClick:function(){k&&k(E,!1)}},{key:"addChildNode",label:"\u5B50\u7EA7\u8282\u70B9",onClick:function(){k&&k(E,!0)}})),o}function tt(o){Fe.current=o}return(0,e.jsxs)(e.Fragment,{children:[M,(0,e.jsxs)(j.Z,{align:"middle",style:{paddingBottom:10},children:[(0,e.jsx)(s.Z,{flex:"".concat((he+1)*24,"px"),style:{marginLeft:he*5},children:(0,e.jsx)(j.Z,{justify:"end",children:t.type==="object"&&(0,e.jsx)(G.ZP,{type:"text",size:"small",icon:me?(0,e.jsx)(L.Z,{}):(0,e.jsx)(rt.Z,{}),onClick:function(){return Ft(!me)}})})}),(0,e.jsx)(s.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(Q.Z,{status:!b&&m.length===0?"error":void 0,disabled:b||Z,value:b?"root":m,placeholder:"\u5C5E\u6027\u540D\u79F0",onBlur:function(){if((m==null?void 0:m.length)===0){y.error("\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}W&&m&&(m==null?void 0:m.length)!==0&&W(E,m)},onChange:function(n){return je(n.target.value)}})}),(0,e.jsx)(s.Z,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(st.Z,{disabled:Z||b,onChange:function(n){X&&m&&X(E.slice(0,z),m,!n.target.checked)}})}),(0,e.jsx)(s.Z,{flex:"95px",style:{marginLeft:5},children:(0,e.jsx)(ye.Z,{style:{width:"95px"},value:t.type,options:ft,onChange:function(n){S&&S(E,Ne(n),"type")}})}),(0,e.jsx)(s.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(Q.Z,{placeholder:"\u6807\u9898",value:ue,onBlur:function(){S&&S(E.concat(te(t,"title")),ue,"title")},onChange:function(n){return de(n.target.value)}})}),(0,e.jsx)(s.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(Q.Z,{placeholder:"\u63CF\u8FF0",value:Je,onBlur:function(){S&&S(E.concat(te(t,"description")),Je,"description")},onChange:function(n){return vt(n.target.value)}})}),(0,e.jsx)(s.Z,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(j.Z,{style:{width:"72px"},children:[(0,e.jsx)(ie.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",children:(0,e.jsx)(G.ZP,{type:"text",size:"small",icon:(0,e.jsx)(at.Z,{}),style:{color:"green"},onClick:function(){f(t),fe(!V)}})}),!b||!Z||t.type==="object"?(0,e.jsx)(it.Z,{placement:"bottom",menu:{items:et()},children:(0,e.jsx)(ie.Z,{title:"\u6DFB\u52A0\u8282\u70B9",children:(0,e.jsx)(G.ZP,{type:"text",size:"small",icon:(0,e.jsx)(Oe.Z,{}),style:{color:C.colorPrimary},onClick:function(){var n=et();!n||n.length===2||k&&k(E,!(!Z&&!b))}})})}):(0,e.jsx)("div",{style:{width:"24px"}}),(0,e.jsx)(s.Z,{flex:"24px",children:b?(0,e.jsx)(ie.Z,{title:"\u5BFC\u5165Json",children:(0,e.jsx)(G.ZP,{type:"text",size:"small",icon:(0,e.jsx)(ot.Z,{}),style:{color:"purple"},onClick:function(){return Ie(!0)}})}):Z?(0,e.jsx)("div",{style:{width:"24px"}}):(0,e.jsx)(ie.Z,{title:"\u5220\u9664\u8282\u70B9",children:(0,e.jsx)(G.ZP,{danger:!0,type:"text",size:"small",icon:(0,e.jsx)(Pe.Z,{}),onClick:function(){K&&K(E)}})})}),b&&t.type!=="object"&&(0,e.jsx)(s.Z,{flex:"24px",children:!Z&&(0,e.jsx)("div",{style:{width:"24px"}})})]})})]}),t.type==="object"&&me&&t.properties&&Object.keys(t.properties).map(function(o){return t.properties?(0,e.jsx)("div",{children:(0,e.jsx)(ve,I()(I()({},i),{},{isArrayItems:!1,nodeDepth:he+1,parentSchemaDepth:b?0:z+2,namePath:E.concat(te(t,"properties"),te(t.properties,o)),propertyName:o,schema:t.properties[o]}))},String(o)):(0,e.jsx)(e.Fragment,{})}),t.type==="array"&&me&&(0,e.jsx)(ve,I()(I()({},i),{},{isArrayItems:!0,nodeDepth:he+1,parentSchemaDepth:b?0:z+1,propertyName:"items",namePath:E.concat(te(t,"items")),schema:t.items})),(0,e.jsx)(Be.Z,{title:"\u9AD8\u7EA7\u8BBE\u7F6E",width:700,open:V,okText:"\u4FDD\u5B58",cancelText:"\u53D6\u6D88",onOk:function(){if(S){if(b||t.type==="object"){S(E,I()(I()({},t),a),"root"),fe(!V);return}g.validateFields().then(function(n){S(E,I()(I()({},t),n),m),fe(!V)}).catch(function(n){console.log("Failed:",n)})}},onCancel:function(){return fe(!V)},children:(0,e.jsxs)(v.Z,{form:g,onValuesChange:function(n,A){Fe.current&&Fe.current.setValue(JSON.stringify(I()(I()({},a),A),null,2))},children:[!Bt&&ke.indexOf(a==null?void 0:a.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(C.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"\u57FA\u672C\u8BBE\u7F6E"}),(q||ae||oe||Ye)&&(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u9ED8\u8BA4\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsxs)(v.Z.Item,{noStyle:!0,name:"default",children:[q&&(0,e.jsx)(Q.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"}),(ae||oe)&&(0,e.jsx)(B.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C"}),Ye&&(0,e.jsx)(ye.Z,{style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",options:[{value:!0,label:"true"},{value:!1,label:"false"}]})]})})]}),q&&(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u957F\u5EA6\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"minLength",children:(0,e.jsx)(B.Z,{min:0,style:{width:"100%"},parser:function(n){return n?parseInt(n.replace(/\D/g,""),10):""},formatter:function(n){return n?"".concat(Math.floor(Math.max(n,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6"})})}),(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u957F\u5EA6\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"maxLength",children:(0,e.jsx)(B.Z,{min:0,style:{width:"100%"},parser:function(n){return n?parseInt(n.replace(/\D/g,""),10):""},formatter:function(n){return n?"".concat(Math.floor(Math.max(n,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6"})})})]}),(ae||oe)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"minimum",children:(0,e.jsx)(B.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C"})})}),(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"maximum",children:(0,e.jsx)(B.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C"})})})]}),(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5C0F\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"exclusiveMinimum",children:(0,e.jsx)(B.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C"})})}),(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6392\u4ED6\u6700\u5927\u503C\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"exclusiveMaximum",children:(0,e.jsx)(B.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C"})})})]})]}),q&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6B63\u5219\u5339\u914D\uFF1A"}),(0,e.jsx)(s.Z,{span:20,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"pattern",children:(0,e.jsx)(Q.Z,{placeholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F"})})})]}),(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u683C\u5F0F\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"format",children:(0,e.jsx)(ye.Z,{allowClear:!0,options:mt,placeholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",style:{width:"100%"}})})})]})]}),Nt&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u5143\u7D20\u552F\u4E00\uFF1A"}),(0,e.jsx)(s.Z,{span:20,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"uniqueItems",valuePropName:"checked",children:(0,e.jsx)(lt.Z,{})})})]}),(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"minItems",children:(0,e.jsx)(B.Z,{style:{width:"100%"},parser:function(n){return n?parseInt(n.replace(/\D/g,""),10):""},formatter:function(n){return n?"".concat(Math.floor(Math.max(n,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570"})})}),(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u6700\u591A\u5143\u7D20\u4E2A\u6570\uFF1A"}),(0,e.jsx)(s.Z,{span:8,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,name:"maxItems",children:(0,e.jsx)(B.Z,{style:{width:"100%"},parser:function(n){return n?parseInt(n.replace(/\D/g,""),10):""},formatter:function(n){return n?"".concat(Math.floor(Math.max(n,0))):""},placeholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570"})})})]})]}),(q||ae||oe)&&(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsx)(s.Z,{span:4,style:{textAlign:"right"},children:"\u679A\u4E3E\uFF1A"}),(0,e.jsx)(s.Z,{span:20,children:(0,e.jsx)(v.Z.List,{name:"enums",children:function(n,A){var se=A.add,be=A.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z,{children:n.map(function(ge){var Vt=ge.key,nt=ge.name,Ut=ee()(ge,gt);return(0,e.jsx)(s.Z,{span:12,children:(0,e.jsxs)(j.Z,{justify:"start",align:"middle",style:{marginBottom:6},children:[(0,e.jsx)(s.Z,{flex:"auto",children:(0,e.jsxs)(v.Z.Item,I()(I()({},Ut),{},{noStyle:!0,name:[nt],rules:[{required:!0}],children:[q&&(0,e.jsx)(Q.Z,{placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"}),(ae||oe)&&(0,e.jsx)(B.Z,{style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"})]}))}),(0,e.jsx)(s.Z,{flex:"36px",style:{paddingLeft:7},children:(0,e.jsx)(Pe.Z,{onClick:function(){return be(nt)}})})]})},Vt)})}),(0,e.jsx)(j.Z,{children:(0,e.jsx)(s.Z,{span:12,children:(0,e.jsx)(v.Z.Item,{noStyle:!0,children:(0,e.jsx)(G.ZP,{onClick:function(){return se()},block:!0,icon:(0,e.jsx)(Oe.Z,{}),children:"\u6DFB\u52A0\u679A\u4E3E\u503C"})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(C.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)(Me,{height:300,language:"json",value:JSON.stringify(a,null,2),handleEditorDidMount:tt,onChange:function(n){Ee(function(){if(n)try{var A=JSON.parse(n);f(A)}catch(se){}})}})]})}),(0,e.jsxs)(Be.Z,{title:"\u5BFC\u5165",width:900,okText:"\u5BFC\u5165",cancelText:"\u53D6\u6D88",open:Ze,onOk:function(){if(!Ce||Ce.length===0){y.warning("\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E");return}var n;try{n=JSON.parse(Ce)}catch(se){y.error("\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E");return}var A;switch(He){case"json":A=Te(n);break;case"json-schema":A=n;break}S&&(S([],A,"root"),Ie(!Ze),Ue(void 0))},onCancel:function(){return Ie(!Ze)},children:[(0,e.jsx)(j.Z,{style:{marginBottom:16},children:(0,e.jsx)(ut.ZP.Group,{value:He,optionType:"button",buttonStyle:"solid",onChange:function(n){return Ot(n.target.value)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(j.Z,{children:(0,e.jsx)(Me,{height:390,language:"json",handleEditorDidMount:tt,onChange:function(n){return Ue(n)}})})]})]})}var xt=ve;function pt(i){var p=U.ZP.useMessage(),C=d()(p,2),$=C[0],T=C[1];function g(t){var h={type:"object",properties:{field:{type:"string"}}};if(!t)return h;switch(N()(t)){case"string":try{return Te(JSON.parse(t))}catch(c){return $.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),h}case"object":return t}}var R=(0,l.useState)(g(i.data)),O=d()(R,2),y=O[0],M=O[1],S=(0,l.useState)(0),W=d()(S,2),Z=W[0],X=W[1];(0,l.useEffect)(function(){i.onSchemaChange&&i.onSchemaChange(y)},[y]);function Y(t,h,c){if(t.length===0){M(h);return}for(var u=P().cloneDeep(y),a=u,f=0;f<t.length-1;f++){var x=Object.keys(a)[t[f]];a[x]||(a[x]={}),a=a[x]}var F=t[t.length-1],m=Object.keys(a)[F];if(F===-1){if(typeof h=="undefined")return;a[c]=h}else{if(a[m]===h)return;a[m]=h}M(u)}function z(t,h){for(var c=P().cloneDeep(y),u=c,a=null,f="",x=0;x<t.length-1;x++){var F=Object.keys(u),m=void 0;if(typeof t[x]=="number"?m=t[x]:m=F.indexOf(String(t[x])),m<0||m>=F.length){console.error("Path not found: ".concat(t.slice(0,x+1).join(".")));return}a=u,f=F[m],u=u[f]}var je=t[t.length-1],Se=Object.keys(u),H=Se[je];if(H!==h){if(u.hasOwnProperty(H))a[f]=Object.fromEntries(Object.entries(u).map(function(ue){var de=d()(ue,2),ce=de[0],re=de[1];return ce===H?[h,re]:[ce,re]}));else{console.error("Key not found: ".concat(H));return}M(c)}}function K(t,h,c){t.required||(t.required=[]);var u=t.required.indexOf(h);c?u!==-1&&t.required.splice(u,1):u===-1&&t.required.push(h),t.required.length===0&&delete t.required}function k(t,h,c){for(var u=P().cloneDeep(y),a=u,f=0;f<t.length;f++){var x=t[f],F=Object.keys(a);typeof a[F[x]]=="undefined"&&(a[F[x]]={}),a=a[F[x]]}K(a,h,c),M(u)}function ne(t){for(var h=P().cloneDeep(y),c=h,u=h,a=0;a<t.length-1;a++)if(c!=null)u=c,c=c[Object.keys(c)[t[a]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",t);return}var f=Object.keys(c)[t[t.length-1]];K(u,f,!0),c&&N()(c)==="object"&&c.hasOwnProperty(f)&&delete c[f],M(h)}function le(t,h){for(var c=P().cloneDeep(y),u=c,a=0;a<t.length-(h?0:1);a++){var f=Object.keys(u)[t[a]];u[f]||(u[f]={}),u=u[f]}var x=Ne("string");h?u.properties["field_".concat(Z)]=x:u["field_".concat(Z)]=x,X(Z+1),M(c)}return(0,e.jsxs)("div",{style:{paddingTop:"10px 10px 0 10px"},children:[T,(0,e.jsx)(xt,{schema:y,changeSchema:Y,renameProperty:z,removeProperty:ne,addProperty:le,updateRequiredProperty:k})]})}var yt=pt},20588:function(Ae,J,r){r.r(J),r.d(J,{texts:function(){return _}});const _=[{value:"1.x.x \u7248\u672C\u5DF2\u5B8C\u5168\u91CD\u6784 \u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:` \u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528
0.x.x \u7248\u672C\u3002`,paraId:0,tocIndex:0},{value:`yarn add @quiet-front-end/json-schema-editor-antd
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"\u53C2\u6570\u540D\u79F0",paraId:6,tocIndex:2},{value:"\u63CF\u8FF0",paraId:6,tocIndex:2},{value:"\u7C7B\u578B",paraId:6,tocIndex:2},{value:"\u9ED8\u8BA4\u503C",paraId:6,tocIndex:2},{value:"onChange",paraId:6,tocIndex:2},{value:"JsonSchema \u53D8\u66F4\u7684\u56DE\u8C03",paraId:6,tocIndex:2},{value:"(schema: JSONSchema7) => void",paraId:6,tocIndex:2},{value:"-",paraId:6,tocIndex:2},{value:"data",paraId:6,tocIndex:2},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E",paraId:6,tocIndex:2},{value:"JSONSchema7 | string",paraId:6,tocIndex:2},{value:'{"type": "object", "properties": {"field": {"type": "string"}}}',paraId:6,tocIndex:2}]}}]);
