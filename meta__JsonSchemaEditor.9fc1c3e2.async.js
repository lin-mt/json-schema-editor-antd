(self.webpackChunk_flodejs_json_schema_editor_antd=self.webpackChunk_flodejs_json_schema_editor_antd||[]).push([[593],{77102:function($e,ne,r){"use strict";r.r(ne),r.d(ne,{demos:function(){return be}});var Me=r(15009),M=r.n(Me),Ce=r(99289),oe=r.n(Ce),pe=r(67294),S=r(57396),xe=r(50033),be={"jsonschemaeditor-demo-0":{component:pe.memo(pe.lazy(oe()(M()().mark(function ye(){var z,l;return M()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,Promise.resolve().then(r.bind(r,50033));case 2:return z=Q.sent,l=z.JsonSchemaEditor,Q.abrupt("return",{default:function(){return pe.createElement(l,null)}});case 5:case"end":return Q.stop()}},ye)})))),asset:{type:"BLOCK",id:"jsonschemaeditor-demo-0",refAtomIds:["JsonSchemaEditor"],dependencies:{"index.jsx":{type:"FILE",value:`import { JsonSchemaEditor } from '@flodejs/json-schema-editor-antd';

export default () => <JsonSchemaEditor />;`},"@flodejs/json-schema-editor-antd":{type:"NPM",value:"1.0.1"}},entry:"index.jsx"},context:{"@flodejs/json-schema-editor-antd":xe},renderOpts:{compile:function(){var ye=oe()(M()().mark(function l(){var je,Q=arguments;return M()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,r.e(335).then(r.bind(r,37335));case 2:return ee.abrupt("return",(je=ee.sent).default.apply(je,Q));case 3:case"end":return ee.stop()}},l)}));function z(){return ye.apply(this,arguments)}return z}()}}}},50033:function($e,ne,r){"use strict";r.r(ne),r.d(ne,{JsonSchemaEditor:function(){return Et},getDefaultSchema:function(){return ke},registerLocale:function(){return et}});var Me=r(97857),M=r.n(Me),Ce=r(52677),oe=r.n(Ce),pe=r(5574),S=r.n(pe),xe=r(68872),be=r(32983),ye=r(96486),z=r.n(ye),l=r(67294),je=r(39398),Q=r(14313),Ae=r(42952),ee=r(24969),we=r(57546),Ve=r(48689),Qe=r(13769),Xe=r.n(Qe),Fe=r(9361),J=r(23323),Ke=r(75027),L=r(71230),m=r(15746),ce=r(6315),X=r(24435),De=r(51079),Ye=r(41637),se=r(77683),qe=r(21532),_e={"en-us":{PropertyPlaceholder:"Please input the property name",PropertyNameEmptyWarnMsg:"Property name cannot be empty",TitlePlaceholder:"Please input the title",DescriptionPlaceholder:"Please input the description",AdvancedSettings:"Advanced Settings",SiblingNodes:"Sibling Nodes",ChildNodes:"Child Nodes",AddNode:"Add Node",ImportJson:"Import JSON",DeleteNode:"Delete Node",Import:"Import",ImportEmptyJsonWarnMsg:"Please input the JSON data to import",ImportNotJsonWarnMsg:"The imported content is not in JSON format",ImportErrorContentWarnMsg:"The imported content is incorrect, please check and try again",BasicSettings:"Basic Settings",DefaultValue:"Default Value",DefaultValuePlaceholder:"Please input the default value",SelectDefaultValuePlaceholder:"Please select the default value",MinimumLength:"Minimum Length",MinimumLengthPlaceholder:"Please input the minimum length",MaximumLength:"Maximum Length",MaximumLengthPlaceholder:"Please input the maximum length",Minimum:"Minimum Value",MinimumPlaceholder:"Please input the minimum value",Maximum:"Maximum Value",MaximumPlaceholder:"Please input the maximum value",ExclusiveMinimum:"Exclusive Minimum",ExclusiveMinimumPlaceholder:"Please input the exclusive minimum value",ExclusiveMaximum:"Exclusive Maximum",ExclusiveMaximumPlaceholder:"Please input the exclusive maximum value",RegularMatch:"Regular Expression",RegularMatchPlaceholder:"Please input a regular expression",Format:"Format",FormatPlaceholder:"Please select a string format",UniqueItems:"Unique Items",MinItems:"Minimum Number of Items",MinItemsPlaceholder:"Please input the minimum number of items",MaxItems:"Maximum Number of Items",MaxItemsPlaceholder:"Please input the maximum number of items",Enums:"Enumerations",EnumsPlaceholder:"Please input enumeration values",AddEnums:"Add Enumeration"},"zh-cn":{PropertyPlaceholder:"\u8BF7\u8F93\u5165\u5C5E\u6027\u540D\u79F0",PropertyNameEmptyWarnMsg:"\u5C5E\u6027\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",TitlePlaceholder:"\u8BF7\u8F93\u5165\u6807\u9898",DescriptionPlaceholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0\u4FE1\u606F",AdvancedSettings:"\u9AD8\u7EA7\u8BBE\u7F6E",SiblingNodes:"\u540C\u7EA7\u8282\u70B9",ChildNodes:"\u5B50\u7EA7\u8282\u70B9",AddNode:"\u6DFB\u52A0\u8282\u70B9",ImportJson:"\u5BFC\u5165Json",DeleteNode:"\u5220\u9664\u8282\u70B9",Import:"\u5BFC\u5165",ImportEmptyJsonWarnMsg:"\u8BF7\u8F93\u5165\u5BFC\u5165\u7684 Json \u6570\u636E",ImportNotJsonWarnMsg:"\u5BFC\u5165\u7684\u5185\u5BB9\u4E0D\u662F Json \u683C\u5F0F\u7684\u6570\u636E",ImportErrorContentWarnMsg:"\u5BFC\u5165\u7684\u5185\u5BB9\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u540E\u91CD\u65B0\u5BFC\u5165",BasicSettings:"\u57FA\u672C\u8BBE\u7F6E",DefaultValue:"\u9ED8\u8BA4\u503C",DefaultValuePlaceholder:"\u8BF7\u8F93\u5165\u9ED8\u8BA4\u503C",SelectDefaultValuePlaceholder:"\u8BF7\u9009\u62E9\u9ED8\u8BA4\u503C",MinimumLength:"\u6700\u5C0F\u957F\u5EA6",MinimumLengthPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u957F\u5EA6",MaximumLength:"\u6700\u5927\u957F\u5EA6",MaximumLengthPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6",Minimum:"\u6700\u5C0F\u503C",MinimumPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5C0F\u503C",Maximum:"\u6700\u5927\u503C",MaximumPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5927\u503C",ExclusiveMinimum:"\u6392\u4ED6\u6700\u5C0F\u503C",ExclusiveMinimumPlaceholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5C0F\u503C",ExclusiveMaximum:"\u6392\u4ED6\u6700\u5927\u503C",ExclusiveMaximumPlaceholder:"\u8BF7\u8F93\u5165\u6392\u4ED6\u6700\u5927\u503C",RegularMatch:"\u6B63\u5219\u5339\u914D",RegularMatchPlaceholder:"\u8BF7\u8F93\u5165\u6B63\u5219\u5339\u914D\u516C\u5F0F",Format:"\u683C\u5F0F",FormatPlaceholder:"\u8BF7\u9009\u62E9\u5B57\u7B26\u4E32\u683C\u5F0F",UniqueItems:"\u5143\u7D20\u552F\u4E00",MinItems:"\u6700\u5C11\u5143\u7D20\u4E2A\u6570",MinItemsPlaceholder:"\u8BF7\u8F93\u5165\u6700\u5C11\u5143\u7D20\u4E2A\u6570",MaxItems:"\u6700\u591A\u5143\u7D20\u4E2A\u6570",MaxItemsPlaceholder:"\u8BF7\u8F93\u5165\u6700\u591A\u5143\u7D20\u4E2A\u6570",Enums:"\u679A\u4E3E",EnumsPlaceholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C",AddEnums:"\u6DFB\u52A0\u679A\u4E3E"}},Ne={},et=function(n,i){Ne[n]=M()(M()({},Ne[n]||{}),i)},Je=function(){var n,i=(0,l.useContext)(qe.ZP.ConfigContext),x=(i==null||(n=i.locale)===null||n===void 0?void 0:n.locale)||"en-us",f=M()(M()({},_e[x]),Ne[x]),d=function(a){return f[a]||a};return{locale:x,t:d}},tt=r(63764),nt={base:"vs",inherit:!0,rules:[{background:"FFFFFF",token:""},{foreground:"008e00",token:"comment"},{foreground:"7d4726",token:"meta.preprocessor"},{foreground:"7d4726",token:"keyword.control.import"},{foreground:"df0002",token:"string"},{foreground:"3a00dc",token:"constant.numeric"},{foreground:"c800a4",token:"constant.language"},{foreground:"275a5e",token:"constant.character"},{foreground:"275a5e",token:"constant.other"},{foreground:"c800a4",token:"variable.language"},{foreground:"c800a4",token:"variable.other"},{foreground:"c800a4",token:"keyword"},{foreground:"c900a4",token:"storage"},{foreground:"438288",token:"entity.name.class"},{foreground:"790ead",token:"entity.name.tag"},{foreground:"450084",token:"entity.other.attribute-name"},{foreground:"450084",token:"support.function"},{foreground:"450084",token:"support.constant"},{foreground:"790ead",token:"support.type"},{foreground:"790ead",token:"support.class"},{foreground:"790ead",token:"support.other.variable"}],colors:{"editor.foreground":"#000000","editor.background":"#FFFFFF","editor.selectionBackground":"#B5D5FF","editor.lineHighlightBackground":"#00000012","editorCursor.foreground":"#000000","editorWhitespace.foreground":"#BFBFBF"}},e=r(85893),rt=function(n){var i=n.width,x=n.lineNumbers,f=x===void 0?"on":x,d=n.height,O=n.value,a=n.folding,E=a===void 0?!0:a,s=n.language,D=n.readOnly,C=D===void 0?!1:D,k=n.renderLineHighlight,$=k===void 0?"all":k,B=n.onChange,Z=Fe.Z.useToken(),V=Z.token;function Y(G){G.editor.defineTheme("x-code-default",nt)}return(0,e.jsx)("div",{style:{border:"1px solid ".concat(V.colorBorder),width:i||"100%"},children:(0,e.jsx)(tt.ZP,{height:d,width:i,value:O,language:s,onChange:B,onMount:n.handleEditorDidMount,beforeMount:Y,theme:"x-code-default",options:{readOnly:C,lineNumbers:f,renderLineHighlight:$,folding:E,smoothScrolling:!0,fontSize:13,scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:9,horizontalScrollbarSize:9},minimap:{enabled:!1}}})})},ze=rt,at=r(15009),Ze=r.n(at),ot=r(99289),Ue=r.n(ot),st=r(64599),lt=r.n(st),it=r(65009),ut=r.n(it);function le(t,n){if(t.$ref){var i=t.$ref;if(i.startsWith("#/")){var x=i.slice(2).split("/"),f=z().cloneDeep(n),d=lt()(x),O;try{for(d.s();!(O=d.n()).done;){var a=O.value;if(f[a])f=f[a];else throw new Error("Unable to resolve $ref: ".concat(i))}}catch(s){d.e(s)}finally{d.f()}return f}else throw new Error("Unsupported $ref format: ".concat(i))}if(t.properties)for(var E in t.properties)t.properties[E]&&(t.properties[E]=le(t.properties[E],n));return t.items&&(Array.isArray(t.items)?t.items=t.items.map(function(s){return le(s,n)}):t.items=le(t.items,n)),t.oneOf&&(t.oneOf=t.oneOf.map(function(s){return le(s,n)})),t.anyOf&&(t.anyOf=t.anyOf.map(function(s){return le(s,n)})),t.allOf&&(t.allOf=t.allOf.map(function(s){return le(s,n)})),t}function ie(t){var n;if(t.$ref){var i=t.$ref;if(i.startsWith("#/")){var x=i.slice(2).split("/");return x[0]}if(t.properties){for(var f in t.properties)if(t.properties[f]&&(n=ie(t.properties[f]),n))return n}}if(t.items){if(Array.isArray(t.items))for(var d=0;d<t.items.length;d++){var O=t.items[d];if(n=ie(O),n)return n}else if(n=ie(t.items),n)return n}if(t.oneOf)for(var a=0;a<t.oneOf.length;a++){var E=t.oneOf[a];if(n=ie(E),n)return n}if(t.anyOf)for(var s=0;s<t.anyOf.length;s++){var D=t.anyOf[s];if(n=ie(D),n)return n}if(t.allOf)for(var C=0;C<t.allOf.length;C++){var k=t.allOf[C];if(n=ie(k),n)return n}}function dt(t){return Le.apply(this,arguments)}function Le(){return Le=Ue()(Ze()().mark(function t(n){var i,x;return Ze()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,ut().dereference(n,{mutateInputSchema:!1,dereference:{circular:"ignore"}});case 2:if(i=d.sent,x=ie(i),!x){d.next=6;break}return d.abrupt("return",le(i,i));case 6:return d.abrupt("return",i);case 7:case"end":return d.stop()}},t)})),Le.apply(this,arguments)}function ct(t){if(typeof t=="string"){var n=t.trim();if(n.startsWith("{")&&n.endsWith("}"))try{return JSON.parse(n)}catch(i){return}}}var He=["string","number","array","object","boolean","integer"];function Se(t,n){if(t===null||oe()(t)!=="object")return console.error("The provided value is not an object."),-1;var i=Object.keys(t);return i.indexOf(n)}function mt(t,n){if(n.length===0)return t;for(var i=t,x=0;x<n.length;x++){var f=Object.keys(i)[n[x]];if(f===void 0)return;i=i[f]}return i}var ft=[{value:"date-time"},{value:"date"},{value:"time"},{value:"email"},{value:"hostname"},{value:"ipv4"},{value:"ipv6"},{value:"uri"},{value:"regex"}],ht=He.map(function(t){return{value:t}});function ke(t){switch(t){case"string":return{type:"string"};case"number":return{type:"number"};case"boolean":return{type:"boolean"};case"object":return{type:"object",properties:{}};case"integer":return{type:"integer"};case"array":return{type:"array",items:{type:"string"}};case"null":}return{type:"string"}}var vt=function(n){var i=function(d){return Array.isArray(d)?"array":d===null?"null":oe()(d)},x=function f(d){var O=i(d);switch(O){case"object":{var a={};for(var E in d)d.hasOwnProperty(E)&&(a[E]=f(d[E]));return{type:"object",properties:a,required:Object.keys(d)}}case"array":return{type:"array",items:d.length?f(d[0]):{}};default:return{type:O}}};return x(n)},gt=["key","name"],pt=function(t){var n=t.schema,i=t.open,x=i===void 0?!1:i,f=t.onOk,d=t.onCancel,O=Je(),a=O.t,E=Fe.Z.useToken(),s=E.token,D=J.Z.useForm(),C=S()(D,1),k=C[0],$=(0,l.useState)(),B=S()($,2),Z=B[0],V=B[1],Y=(0,l.useState)(!1),G=S()(Y,2),v=G[0],te=G[1],c=(0,l.useState)(!1),p=S()(c,2),o=p[0],g=p[1],P=(0,l.useState)(!1),u=S()(P,2),y=u[0],A=u[1],R=(0,l.useState)(!1),T=S()(R,2),K=T[0],W=T[1],me=(0,l.useState)(!1),I=S()(me,2),U=I[0],re=I[1],q=(0,l.useState)(!1),_=S()(q,2),b=_[0],Re=_[1],Te=(0,l.useState)(!1),Ie=S()(Te,2),w=Ie[0],We=Ie[1],fe=(0,l.useRef)(null);(0,l.useEffect)(function(){V(n)},[n]),(0,l.useEffect)(function(){te(x)},[x]);var he=(0,l.useCallback)(z().debounce(function(N){typeof N=="function"?N():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,l.useEffect)(function(){return function(){he.cancel()}},[he]),(0,l.useEffect)(function(){!v||!Z||(k.setFieldsValue(Z),g(Z.type==="object"),A(Z.type==="array"),W(Z.type==="number"),re(Z.type==="boolean"),Re(Z.type==="integer"),We(Z.type==="string"))},[v,Z]);function Ee(N){fe.current=N,fe.current.setValue(JSON.stringify(n,null,2))}function ue(){d&&d(),te(!1)}return(0,e.jsx)(Ke.Z,{title:a("AdvancedSettings"),width:900,open:v,onOk:function(){k.validateFields().then(function(h){return f&&f(M()(M()({},Z),h))}).catch(function(h){console.log("Failed:",h)}).finally(function(){return ue()})},onCancel:ue,children:(0,e.jsxs)(J.Z,{form:k,onValuesChange:function(h,ae){fe.current&&fe.current.setValue(JSON.stringify(M()(M()({},Z),ae),null,2))},children:[!o&&He.indexOf(Z==null?void 0:Z.type)!==-1&&(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(s.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:a("BasicSettings")}),(w||K||b||U)&&(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("DefaultValue"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsxs)(J.Z.Item,{noStyle:!0,name:"default",children:[w&&(0,e.jsx)(ce.Z,{style:{width:"100%"},placeholder:a("DefaultValuePlaceholder")}),(K||b)&&(0,e.jsx)(X.Z,{style:{width:"100%"},placeholder:a("DefaultValuePlaceholder")}),U&&(0,e.jsx)(De.Z,{style:{width:"100%"},placeholder:a("SelectDefaultValuePlaceholder"),options:[{value:!0,label:"true"},{value:!1,label:"false"}]})]})})]}),w&&(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("MinimumLength"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"minLength",children:(0,e.jsx)(X.Z,{min:0,style:{width:"100%"},parser:function(h){return h?parseInt(h.replace(/\D/g,""),10):""},formatter:function(h){return h?"".concat(Math.floor(Math.max(h,0))):""},placeholder:a("MinimumLengthPlaceholder")})})}),(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("MaximumLength"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"maxLength",children:(0,e.jsx)(X.Z,{min:0,style:{width:"100%"},parser:function(h){return h?parseInt(h.replace(/\D/g,""),10):""},formatter:function(h){return h?"".concat(Math.floor(Math.max(h,0))):""},placeholder:a("MaximumLengthPlaceholder")})})})]}),(K||b)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("Minimum"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"minimum",children:(0,e.jsx)(X.Z,{style:{width:"100%"},placeholder:a("MinimumPlaceholder")})})}),(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("Maximum"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"maximum",children:(0,e.jsx)(X.Z,{style:{width:"100%"},placeholder:a("MaximumPlaceholder")})})})]}),(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("ExclusiveMinimum"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"exclusiveMinimum",children:(0,e.jsx)(X.Z,{style:{width:"100%"},placeholder:a("ExclusiveMinimumPlaceholder")})})}),(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("ExclusiveMaximum"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"exclusiveMaximum",children:(0,e.jsx)(X.Z,{style:{width:"100%"},placeholder:a("ExclusiveMaximumPlaceholder")})})})]})]}),w&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("RegularMatch"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:20,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"pattern",children:(0,e.jsx)(ce.Z,{placeholder:a("RegularMatchPlaceholder")})})})]}),(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("Format"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"format",children:(0,e.jsx)(De.Z,{allowClear:!0,options:ft,placeholder:a("FormatPlaceholder"),style:{width:"100%"}})})})]})]}),y&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("UniqueItems"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:20,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"uniqueItems",valuePropName:"checked",children:(0,e.jsx)(Ye.Z,{})})})]}),(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("MinItems"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"minItems",children:(0,e.jsx)(X.Z,{style:{width:"100%"},parser:function(h){return h?parseInt(h.replace(/\D/g,""),10):""},formatter:function(h){return h?"".concat(Math.floor(Math.max(h,0))):""},placeholder:a("MinItemsPlaceholder")})})}),(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("MaxItems"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:8,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,name:"maxItems",children:(0,e.jsx)(X.Z,{style:{width:"100%"},parser:function(h){return h?parseInt(h.replace(/\D/g,""),10):""},formatter:function(h){return h?"".concat(Math.floor(Math.max(h,0))):""},placeholder:a("MaxItemsPlaceholder")})})})]})]}),(w||K||b)&&(0,e.jsxs)(L.Z,{justify:"start",align:"middle",style:{marginBottom:13},children:[(0,e.jsxs)(m.Z,{span:4,style:{textAlign:"right"},children:[a("Enums"),"\uFF1A"]}),(0,e.jsx)(m.Z,{span:20,children:(0,e.jsx)(J.Z.List,{name:"enums",children:function(h,ae){var ve=ae.add,H=ae.remove;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(L.Z,{gutter:6,children:h.map(function(de){var Pe=de.key,ge=de.name,j=Xe()(de,gt);return(0,e.jsx)(m.Z,{span:12,children:(0,e.jsxs)(L.Z,{gutter:2,justify:"start",align:"middle",style:{marginBottom:6},children:[(0,e.jsx)(m.Z,{flex:"auto",children:(0,e.jsxs)(J.Z.Item,M()(M()({},j),{},{noStyle:!0,name:[ge],rules:[{required:!0}],children:[w&&(0,e.jsx)(ce.Z,{placeholder:a("EnumsPlaceholder")}),(K||b)&&(0,e.jsx)(X.Z,{style:{width:"100%"},placeholder:a("EnumsPlaceholder")})]}))}),(0,e.jsx)(m.Z,{flex:"24px",children:(0,e.jsx)(se.ZP,{icon:(0,e.jsx)(Ve.Z,{}),size:"small",type:"text",danger:!0,onClick:function(){return H(ge)}})})]})},Pe)})}),(0,e.jsx)(L.Z,{children:(0,e.jsx)(m.Z,{span:6,children:(0,e.jsx)(J.Z.Item,{noStyle:!0,children:(0,e.jsx)(se.ZP,{onClick:function(){return ve()},block:!0,icon:(0,e.jsx)(ee.Z,{}),children:a("AddEnums")})})})})]})}})})]}),(0,e.jsx)("div",{style:{borderLeft:"3px solid ".concat(s.colorPrimary),fontSize:16,fontWeight:399,paddingLeft:8,marginBottom:13},children:"Json Schema"}),(0,e.jsx)(ze,{height:300,language:"json",value:JSON.stringify(Z,null,2),handleEditorDidMount:Ee,onChange:function(h){he(function(){if(h)try{var ae=JSON.parse(h);V(ae)}catch(ve){}})}})]})})},xt=r(1581),yt=r.n(xt),jt=r(78045),Ge=r(51539),St=function(n){var i=n.open,x=n.onOk,f=n.onCancel,d=Je(),O=d.t,a=xe.ZP.useMessage(),E=S()(a,2),s=E[0],D=E[1],C=(0,l.useState)(),k=S()(C,2),$=k[0],B=k[1],Z=(0,l.useState)(),V=S()(Z,2),Y=V[0],G=V[1],v=(0,l.useState)("json"),te=S()(v,2),c=te[0],p=te[1],o=(0,l.useRef)(null);function g(u){o.current=u}(0,l.useEffect)(function(){G(i)},[i]);function P(){var u;G(!1),B(void 0),(u=o.current)===null||u===void 0||u.setValue(""),f&&f()}return(0,e.jsxs)(e.Fragment,{children:[D,(0,e.jsxs)(Ke.Z,{title:O("Import"),width:900,open:Y,onOk:Ue()(Ze()().mark(function u(){var y,A,R,T,K,W;return Ze()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(!$||$.length===0)){I.next=3;break}return s.warning(O("ImportEmptyJsonWarnMsg")),I.abrupt("return");case 3:if(y=ct($),y){I.next=7;break}return s.warning(O("ImportNotJsonWarnMsg")),I.abrupt("return");case 7:I.t0=c,I.next=I.t0==="json"?10:I.t0==="json-schema"?12:16;break;case 10:return A=(0,Ge.ES)(Ge.GP).createSchema(y),I.abrupt("break",16);case 12:return I.next=14,dt(y);case 14:return A=I.sent,I.abrupt("break",16);case 16:if(A){I.next=21;break}return s.warning(O("ImportErrorContentWarnMsg")),I.abrupt("return");case 21:if(R=new(yt())({allErrors:!0}),T=R.getSchema("http://json-schema.org/draft-07/schema#"),!(T&&!T(A))){I.next=27;break}return W=(K=T.errors)===null||K===void 0?void 0:K.map(function(U,re){var q=U.instancePath.split("/").pop()||"root",_="".concat(q," ").concat(U.message);return(0,e.jsx)("div",{children:'Error in field "'.concat(q,'": ').concat(_)},re)}),((W==null?void 0:W.length)||0)>0&&s.error({content:(0,e.jsx)("div",{children:W})}),I.abrupt("return");case 27:x&&x(A),P();case 29:case"end":return I.stop()}},u)})),onCancel:P,children:[(0,e.jsx)(L.Z,{style:{marginBottom:16},children:(0,e.jsx)(jt.ZP.Group,{value:c,optionType:"button",buttonStyle:"solid",onChange:function(y){return p(y.target.value)},options:[{value:"json",label:"Json"},{value:"json-schema",label:"JsonSchema"}]})}),(0,e.jsx)(L.Z,{children:(0,e.jsx)(ze,{height:390,language:"json",handleEditorDidMount:g,onChange:function(y){return B(y)}})})]})]})},It=St,Pt=r(56616),Oe=r(61781),Mt=r(34550);function Be(t){var n=Fe.Z.useToken(),i=n.token,x=Je(),f=x.t,d=xe.ZP.useMessage(),O=S()(d,2),a=O[0],E=O[1],s=t.changeSchema,D=t.renameProperty,C=t.isArrayItems,k=t.updateRequiredProperty,$=t.removeProperty,B=t.addProperty,Z=t.isRequire,V=t.handleAdvancedSettingClick,Y=(0,l.useState)(t.schema),G=S()(Y,2),v=G[0],te=G[1],c=(0,l.useState)(t.propertyName),p=S()(c,2),o=p[0],g=p[1],P=(0,l.useState)(v.title),u=S()(P,2),y=u[0],A=u[1],R=(0,l.useState)(v.description),T=S()(R,2),K=T[0],W=T[1],me=(0,l.useState)(t.nodeDepth?t.nodeDepth:0),I=S()(me,2),U=I[0],re=I[1],q=(0,l.useState)(t.namePath?t.namePath:[]),_=S()(q,2),b=_[0],Re=_[1],Te=(0,l.useState)(!0),Ie=S()(Te,2),w=Ie[0],We=Ie[1],fe=(0,l.useState)(!1),he=S()(fe,2),Ee=he[0],ue=he[1],N=(0,l.useState)(!1),h=S()(N,2),ae=h[0],ve=h[1],H=typeof o=="undefined";(0,l.useEffect)(function(){te(t.schema)},[t.schema]),(0,l.useEffect)(function(){Re(t.namePath?t.namePath:[])},[t.namePath]),(0,l.useEffect)(function(){re(t.nodeDepth?t.nodeDepth:0)},[t.nodeDepth]);var de=(0,l.useCallback)(z().debounce(function(j){typeof j=="function"?j():console.log("Provided argument is not a function")},300,{maxWait:1e3}),[]);(0,l.useEffect)(function(){return function(){de.cancel()}},[de]);var Pe=v.items,ge=!!(v.type==="object"||C&&(Pe==null?void 0:Pe.type)==="object")&&!C&&!H;return v.type?(0,e.jsxs)(e.Fragment,{children:[E,(0,e.jsxs)(L.Z,{align:"middle",style:{paddingBottom:10},children:[(0,e.jsx)(m.Z,{flex:"".concat(24+U*17,"px"),style:{marginLeft:U*5},children:(0,e.jsx)(L.Z,{justify:"end",children:v.type==="object"&&(0,e.jsx)(se.ZP,{type:"text",size:"small",icon:w?(0,e.jsx)(je.Z,{}):(0,e.jsx)(Q.Z,{}),onClick:function(){return We(!w)}})})}),(0,e.jsx)(m.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(ce.Z,{status:!H&&o.length===0?"error":void 0,disabled:H||C,value:H?"root":o,placeholder:f("PropertyPlaceholder"),onBlur:function(){if((o==null?void 0:o.length)===0){a.warning(f("PropertyNameEmptyWarnMsg")).then();return}D&&o&&(o==null?void 0:o.length)!==0&&D(b,o)},onChange:function(F){return g(F.target.value)}})}),(0,e.jsx)(m.Z,{flex:"16px",style:{marginLeft:5},children:(0,e.jsx)(Pt.Z,{disabled:C||H,checked:Z,onChange:function(F){k&&o&&k(b,!F.target.checked)}})}),(0,e.jsx)(m.Z,{flex:"95px",style:{marginLeft:5},children:(0,e.jsx)(De.Z,{style:{width:"95px"},value:v.type,options:ht,onChange:function(F){s&&s(b,ke(F),"type")}})}),(0,e.jsx)(m.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(ce.Z,{placeholder:f("TitlePlaceholder"),value:y,onBlur:function(){s&&s(b.concat(Se(v,"title")),y,"title")},onChange:function(F){return A(F.target.value)}})}),(0,e.jsx)(m.Z,{flex:"auto",style:{marginLeft:5},children:(0,e.jsx)(ce.Z,{placeholder:f("DescriptionPlaceholder"),value:K,onBlur:function(){s&&s(b.concat(Se(v,"description")),K,"description")},onChange:function(F){return W(F.target.value)}})}),(0,e.jsx)(m.Z,{flex:"72px",style:{marginLeft:5},children:(0,e.jsxs)(L.Z,{style:{width:"72px"},children:[(0,e.jsx)(Oe.Z,{title:f("AdvancedSettings"),children:(0,e.jsx)(se.ZP,{type:"text",size:"small",icon:(0,e.jsx)(Ae.Z,{}),style:{color:"green"},onClick:function(){V&&!V(b,v,H||v.type==="object"?void 0:o)||ue(!Ee)}})}),!H&&!C||v.type==="object"?(0,e.jsx)(Mt.Z,{disabled:!ge,placement:"bottom",menu:{items:[{key:"addNode",label:f("SiblingNodes"),onClick:function(){B&&B(b,!1)}},{key:"addChildNode",label:f("ChildNodes"),onClick:function(){B&&B(b,!0)}}]},children:(0,e.jsx)(Oe.Z,{title:!ge&&f("AddNode"),children:(0,e.jsx)(se.ZP,{type:"text",size:"small",icon:(0,e.jsx)(ee.Z,{}),style:{color:i.colorPrimary},onClick:function(){ge||B&&B(b,!(!C&&!H))}})})}):(0,e.jsx)("div",{style:{width:"24px"}}),(0,e.jsx)(m.Z,{flex:"24px",children:H?(0,e.jsx)(Oe.Z,{title:f("ImportJson"),children:(0,e.jsx)(se.ZP,{type:"text",size:"small",icon:(0,e.jsx)(we.Z,{}),style:{color:"purple"},onClick:function(){return ve(!0)}})}):C?(0,e.jsx)("div",{style:{width:"24px"}}):(0,e.jsx)(Oe.Z,{title:f("DeleteNode"),children:(0,e.jsx)(se.ZP,{danger:!0,type:"text",size:"small",icon:(0,e.jsx)(Ve.Z,{}),onClick:function(){$&&$(b)}})})}),H&&v.type!=="object"&&(0,e.jsx)(m.Z,{flex:"24px",children:!C&&(0,e.jsx)("div",{style:{width:"24px"}})})]})})]}),v.type==="object"&&w&&v.properties&&Object.keys(v.properties).map(function(j){if(v.properties){var F;return(0,e.jsx)("div",{children:(0,e.jsx)(Be,M()(M()({},t),{},{isRequire:(F=v.required)===null||F===void 0?void 0:F.includes(j),isArrayItems:!1,nodeDepth:U+1,namePath:b.concat(Se(v,"properties"),Se(v.properties,j)),propertyName:j,schema:v.properties[j],handleAdvancedSettingClick:V}))},String(j))}return(0,e.jsx)(e.Fragment,{})}),v.type==="array"&&w&&(0,e.jsx)(Be,M()(M()({},t),{},{isRequire:!1,isArrayItems:!0,nodeDepth:U+1,propertyName:"items",namePath:b.concat(Se(v,"items")),schema:v.items,handleAdvancedSettingClick:V})),(0,e.jsx)(pt,{schema:v,open:Ee,onOk:function(F){if(s){if(H||v.type==="object"){s(b,M()({},F)),ue(!1);return}s(b,M()({},F),o),ue(!1)}},onCancel:function(){return ue(!1)}}),(0,e.jsx)(It,{open:ae,onOk:function(F){s&&(s([],F),ve(!1))},onCancel:function(){return ve(!1)}})]}):(0,e.jsx)(e.Fragment,{})}var Zt=Be,Ot=(0,l.forwardRef)(function(t,n){var i=xe.ZP.useMessage(),x=S()(i,2),f=x[0],d=x[1];function O(c){var p={type:"object",properties:{field:{type:"string"}}};if(!c)return p;switch(oe()(c)){case"string":try{return vt(JSON.parse(c))}catch(o){return f.warning("\u521D\u59CB\u5316\u6570\u636E\u4E0D\u662F Json \u5B57\u7B26\u4E32\uFF0C\u65E0\u6CD5\u751F\u6210 JsonSchema"),p}case"object":return c}}var a=(0,l.useState)(O(t.value)),E=S()(a,2),s=E[0],D=E[1],C=(0,l.useState)(0),k=S()(C,2),$=k[0],B=k[1];(0,l.useEffect)(function(){t.onSchemaChange&&t.onSchemaChange(s)},[s]);var Z=function(p,o,g){if(p.length===0){D(o);return}for(var P=z().cloneDeep(s),u=P,y=0;y<p.length-1;y++){var A=Object.keys(u)[p[y]];u[A]||(u[A]={}),u=u[A]}var R=p[p.length-1],T=Object.keys(u)[R];if(R===-1){if(typeof o=="undefined"||!g)return;u[g]=o}else{if(u[T]===o)return;u[T]=o}D(P)};function V(c,p){for(var o=z().cloneDeep(s),g=o,P=null,u="",y=0;y<c.length-1;y++){var A=Object.keys(g),R=void 0;if(typeof c[y]=="number"?R=c[y]:R=A.indexOf(String(c[y])),R<0||R>=A.length){console.error("Path not found: ".concat(c.slice(0,y+1).join(".")));return}P=g,u=A[R],g=g[u]}var T=c[c.length-1],K=Object.keys(g),W=K[T];if(W!==p){if(g.hasOwnProperty(W))P[u]=Object.fromEntries(Object.entries(g).map(function(me){var I=S()(me,2),U=I[0],re=I[1];if(U===W){var q=P.required;if(q){var _=q.indexOf(W);_>=0&&q.splice(_,1,p)}return[p,re]}return[U,re]}));else{console.error("Key not found: ".concat(W));return}D(o)}}function Y(c,p,o){c.required||(c.required=[]);var g=c.required.indexOf(p);o?g!==-1&&c.required.splice(g,1):g===-1&&c.required.push(p),c.required.length===0&&delete c.required}function G(c,p){if(c.length<2){console.error("\u8DEF\u5F84\u957F\u5EA6\u4E0D\u8DB3\uFF0C\u65E0\u6CD5\u66F4\u65B0\u5FC5\u9009\u5C5E\u6027");return}var o=z().cloneDeep(s),g=c.slice(0,-2),P=c[c.length-1],u=mt(o,g);if(!u||!u.properties){console.error("\u65E0\u6CD5\u627E\u5230\u5FC5\u9009\u5C5E\u6027\u7684\u7236\u5BF9\u8C61",u);return}var y=Object.keys(u.properties);if(P<0||P>=y.length){console.error("\u5C5E\u6027\u7D22\u5F15\u8D85\u51FA\u8303\u56F4",P);return}var A=y[P];Y(u,A,p),D(o)}function v(c){for(var p=z().cloneDeep(s),o=p,g=p,P=0;P<c.length-1;P++)if(o!=null)g=o,o=o[Object.keys(o)[c[P]]];else{console.error("\u79FB\u9664\u7684\u8DEF\u5F84\u65E0\u6548",c);return}var u=Object.keys(o)[c[c.length-1]];Y(g,u,!0),o&&oe()(o)==="object"&&o.hasOwnProperty(u)&&delete o[u],D(p)}function te(c,p){for(var o=z().cloneDeep(s),g=o,P=0;P<c.length-(p?0:1);P++){var u=Object.keys(g)[c[P]];g[u]||(g[u]={}),g=g[u]}var y=ke("string");p?g.properties["field_".concat($)]=y:g["field_".concat($)]=y,B($+1),D(o)}return(0,l.useImperativeHandle)(n,function(){return{changeSchema:Z}}),(0,e.jsxs)("div",{style:M()({},t.style),children:[d,s?(0,e.jsx)(Zt,{schema:s,changeSchema:Z,renameProperty:V,removeProperty:v,addProperty:te,updateRequiredProperty:G,handleAdvancedSettingClick:t.handleAdvancedSettingClick}):(0,e.jsx)(be.Z,{})]})}),Et=Ot},71860:function($e,ne,r){"use strict";r.r(ne),r.d(ne,{texts:function(){return M}});var Me=r(57396);const M=[{value:"1.x.x \u7248\u672C\u7684\u4EE3\u7801\u5DF2\u5B8C\u5168\u91CD\u6784\u3002",paraId:0,tocIndex:0},{value:"\u9700\u8981\u4E0E ",paraId:0,tocIndex:0},{value:"json-schema-editor-visual",paraId:0,tocIndex:0},{value:` UI \u5E03\u5C40\u7C7B\u4F3C\u7684\u7EC4\u4EF6\uFF0C\u53EF\u4EE5\u4F7F\u7528
`,paraId:0,tocIndex:0},{value:"0.x.x",paraId:0,tocIndex:0},{value:" \u7248\u672C\u3002",paraId:0,tocIndex:0},{value:`yarn add @flodejs/json-schema-editor-antd
`,paraId:1,tocIndex:0},{value:"\u7EC4\u4EF6\u4E2D\u7684 JSON \u7F16\u8F91\u5668\u7528\u7684\u662F\u52A0\u8F7D cdn \u7684\u65B9\u5F0F\uFF0C\u79BB\u7EBF\u4F7F\u7528\u9700\u6DFB\u52A0 ",paraId:2,tocIndex:1},{value:"monaco-editor",paraId:2,tocIndex:1},{value:`yarn add monaco-editor
`,paraId:3,tocIndex:1},{value:"\u52A0\u8F7D monaco-editor",paraId:4,tocIndex:1},{value:`import { loader } from '@monaco-editor/react';
import * as monaco from 'monaco-editor';

loader.config({ monaco });
`,paraId:5,tocIndex:1},{value:"JsonSchema \u53D8\u66F4\u7684\u56DE\u8C03\u3002",paraId:6,tocIndex:3},{value:"\u7C7B\u578B\uFF1A",paraId:7,tocIndex:3},{value:"(schema: JSONSchema) => void",paraId:7,tocIndex:3},{value:"\u9ED8\u8BA4\u503C\uFF1A ",paraId:8,tocIndex:3},{value:"-",paraId:8,tocIndex:3},{value:"\u521D\u59CB\u5316\u7EC4\u4EF6\u6570\u636E\u3002",paraId:9,tocIndex:4},{value:"\u7C7B\u578B\uFF1A",paraId:10,tocIndex:4},{value:"JSONSchema | string | undefined",paraId:10,tocIndex:4},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:11,tocIndex:4},{value:`{
  "type": "object",
  "properties": {
    "field": {
      "type": "string"
    }
  }
}
`,paraId:12,tocIndex:4},{value:"\u70B9\u51FB",paraId:13,tocIndex:5},{value:"\u9AD8\u7EA7\u8BBE\u7F6E",paraId:13,tocIndex:5},{value:"\u6309\u94AE\u7684\u56DE\u8C03\uFF0C\u8FD4\u56DE",paraId:13,tocIndex:5},{value:"false",paraId:13,tocIndex:5},{value:"\uFF1A\u4E0D\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\uFF0C\u8FD4\u56DE",paraId:13,tocIndex:5},{value:"true",paraId:13,tocIndex:5},{value:"\uFF1A\u4F7F\u7528\u9ED8\u8BA4\u8868\u5355\u3002",paraId:13,tocIndex:5},{value:"\u7C7B\u578B\uFF1A",paraId:14,tocIndex:5},{value:"(namePath: number[], schema: JSONSchema, propertyName?: string) => boolean",paraId:14,tocIndex:5},{value:"\u9ED8\u8BA4\u503C\uFF1A",paraId:15,tocIndex:5},{value:"-",paraId:15,tocIndex:5},{value:"\u8BF4\u660E\uFF1A\u53EF\u4EE5\u7ED3\u5408",paraId:16,tocIndex:5},{value:"\u7EC4\u4EF6\u5F15\u7528",paraId:16,tocIndex:5},{value:"\u5B9E\u73B0\u70B9\u51FB\u9AD8\u7EA7\u8BBE\u7F6E\u6309\u94AE\u540E\u83B7\u53D6\u8DEF\u5F84\u4E0B\u7684 JsonSchema\uFF0C\u6DFB\u52A0\u3001\u4FEE\u6539\u81EA\u5B9A\u4E49\u5B57\u6BB5\u7B49\uFF0C\u7136\u540E\u4FEE\u6539\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema\u3002",paraId:16,tocIndex:5},{value:"\u652F\u6301 antd \u7684 ConfigureProvider\u3002",paraId:17,tocIndex:6},{value:`// \u652F\u6301\u6269\u5C55\u6216\u8986\u76D6\u9ED8\u8BA4\u8BED\u8A00\u914D\u7F6E
registerLocale('zh-cn', {
  PropertyPlaceholder: '\u8BF7\u8F93\u5165\u5C5E\u6027\u540D\u79F0',
  // ...
});
`,paraId:18,tocIndex:6},{value:`export interface JsonSchemaEditorHandle {
  /* \u66F4\u65B0\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684 JsonSchema */
  changeSchema: (namePath: number[], value: any, propertyName?: string) => void;
}
`,paraId:19,tocIndex:7}]},49832:function(){}}]);
